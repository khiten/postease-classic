<?php
 goto BQeTa; sHrHL: $target = isset($_POST["\x74\141\x72\x67\x65\x74"]) ? $_POST["\164\x61\x72\147\x65\164"] : null; goto pJGIz; n97k7: $page = "\x70\157\163\x74"; goto kg88w; NY93K: $page_title_target = $page == "\160\x6f\163\164" ? $_SESSION[$session_key]["\x63\157\155\x6d\157\x6e"]["\x70\x6f\163\x74\x74\x79\x70\145\x73"][$_SESSION[$session_key]["\143\x6f\x6d\155\157\156"]["\164\x68\x69\163\x5f\x70\x6f\x73\164\x74\171\x70\145"]]["\156\141\155\x65"] : TXT_CATEGORY_PAGETITLE_CONTACT; goto xgqCA; BQeTa: $target_posttype = $_SESSION[$session_key]["\x63\157\156\x66\x69\x67\137\x70\x6f\x73\164\x74\x79\x70\x65"]["\x74\141\x72\x67\145\x74\137\x70\157\x73\x74\164\x79\x70\145"] = empty($_GET["\x74\150\x69\163\x5f\x70\157\x73\164\x74\171\x70\145"]) ? empty($_SESSION[$session_key]["\x63\x6f\156\146\x69\x67\137\x70\x6f\x73\164\x74\x79\160\145"]["\164\141\162\x67\x65\x74\137\160\x6f\163\x74\164\x79\x70\145"]) ? null : $_SESSION[$session_key]["\x63\157\x6e\x66\151\x67\x5f\160\x6f\163\x74\x74\171\160\145"]["\x74\x61\x72\147\145\x74\x5f\160\x6f\x73\164\164\x79\x70\x65"] : $_GET["\x74\150\151\x73\137\160\x6f\x73\x74\x74\x79\160\145"]; goto n97k7; mr3Ki: $mode = isset($_GET["\x6d\157\144\x65"]) ? $_GET["\x6d\157\x64\145"] : 1; goto hc3dX; yERdf: $process_msg_type = null; goto B9WNh; pJGIz: $process_msg = null; goto gqLlg; xgqCA: $page_title_main = TXT_CONFIGPOSTTYPE_PAGETITLEMAIN($page_title_target); goto rTrsg; sY93q: if ($mode == 4) { require_once dirname(__FILE__) . "\57\56\56\x2f\x63\x6c\141\163\163\57\125\x70\154\x6f\x61\144\x2f\143\x6c\x61\163\x73\x2e\165\x70\x6c\157\141\x64\56\x70\x68\160"; ini_set("\144\x69\163\160\x6c\141\171\x5f\145\162\162\x6f\x72\163", 0); $site_id = $_SESSION[$session_key]["\x63\157\x6d\x6d\157\x6e"]["\164\x68\x69\x73\137\x73\151\164\145"]; $posttype_id = $_SESSION[$session_key]["\143\157\x6d\155\157\156"]["\164\x68\151\163\137\x70\x6f\x73\164\x74\171\x70\x65"]; $posttype_order = $_SESSION[$session_key]["\143\x6f\x6d\x6d\x6f\x6e"]["\164\x68\151\x73\137\x70\x6f\163\x74\x74\171\x70\x65\x5f\x6f\162\144\x65\x72"]; $dist_dir = dirname(__FILE__) . "\57\x2e\56\x2f\x69\155\x70\x6f\x72\x74\163"; if (!file_exists($dist_dir)) { mkdir($dist_dir); } $data_type = !empty($_POST["\x64\x61\164\141\x5f\164\171\160\x65"]) ? $_POST["\144\x61\164\x61\137\x74\x79\x70\x65"] : null; $file_type = !empty($_POST["\146\x69\x6c\145\x5f\x74\171\160\x65"]) ? $_POST["\x66\151\154\145\x5f\x74\x79\160\145"] : null; $custom_list_id = !empty($_POST["\x63\165\x73\x74\x6f\155\137\x6c\x69\x73\x74\137\151\x64"]) ? $_POST["\x63\x75\x73\x74\157\x6d\137\x6c\151\163\164\x5f\151\x64"] : null; $key_column = !empty($_POST["\x6b\145\x79\x5f\x63\x6f\154\x75\155\x6e"]) ? $_POST["\153\x65\171\137\143\157\x6c\x75\155\x6e"] : null; if (empty($data_type) || empty($file_type)) { header("\114\x6f\x63\x61\164\x69\157\156\72\x20\x2e\57\x3f\166\x69\x65\x77\137\x70\x61\x67\x65\75\143\157\156\x66\151\x67\137\x70\157\163\x74\164\x79\x70\145"); die; } $handle = new Upload($_FILES["\144\x61\164\x61\x5f\x66\x69\154\145"]); $handle->file_overwrite = true; $handle->file_new_name_body = "\x75\160\154\x6f\141\144\x65\x64"; $handle->file_new_name_ext = "\x63\163\166"; if ($handle->uploaded) { $handle->process($dist_dir); $file = new SplFileObject($handle->file_dst_pathname); $file->setFlags(SplFileObject::READ_CSV); $keys = array(); $data = array(); if (!empty($file)) { $row_num = 0; foreach ($file as $row_key => $row) { if (!empty($row[0])) { foreach ($row as $column_key => $column) { if ($row_key == 0) { $keys[$column_key] = (string) $column; } else { $data[$row_num][$column_key] = $column; } } } if ($row_key > 0) { $row_num++; } } if (unlink($dist_dir . "\57\x75\x70\154\x6f\x61\144\x65\144\x2e\143\x73\x76")) { rmdir($dist_dir); } if ($data_type == "\143\165\x73\164\x6f\155\x5f\166\141\154\x75\145\163" && !empty($custom_list_id)) { $target_table = $table_prefix . "\143\165\x73\164\157\x6d\x5f\166\x61\x6c\x75\x65\x73\x5f\x62\141\163\145"; $new_id = getNextId($target_table); $new_line_order = getNewLineOrder($target_table, 0, 0, 1); $ids = array(); $sql = "\x53\x45\114\105\x43\x54\x20\x69\144\x20\x46\122\117\x4d\40{$table_prefix}\x63\165\x73\x74\x6f\x6d\x5f\166\x61\x6c\165\145\x73\137\142\x61\x73\145\40\x57\x48\105\x52\x45\x20\x64\145\154\145\164\145\137\146\154\x67\40\x3d\x20\x30\x20\x41\x4e\104\40\154\151\x73\x74\137\151\x64\40\75\40\x3a\114\x49\x53\124\x5f\111\x44\x20\117\122\104\x45\x52\40\x42\131\x20\154\x69\x6e\145\137\157\162\x64\x65\x72\x20\x41\x53\x43"; $read_records = $pdo->prepare($sql); $read_records->bindValue("\114\x49\123\124\137\x49\x44", $custom_list_id); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $ids[] = $record["\x69\x64"]; } foreach ($data as $row_key => $row) { $language_id = false !== array_search("\x6c\x61\x6e\147\x75\141\147\x65\x5f\x69\144", $keys) ? $row[array_search("\154\x61\x6e\x67\x75\141\x67\x65\137\151\144", $keys)] : 1; $label = $row[array_search("\154\141\x62\x65\154", $keys)]; try { $pdo->beginTransaction(); if (!empty($ids) && isset($ids[$row_key])) { $id = $ids[$row_key]; $sql = "\123\105\114\105\103\124\x20\52\40\x46\122\117\115\x20{$table_prefix}\x63\x75\x73\x74\157\x6d\x5f\166\141\154\x75\145\163\137\x6c\x61\x62\145\x6c\x20\x57\110\105\x52\x45\x20\x62\141\163\145\137\151\x64\x20\x3d\x20\x3a\102\101\123\x45\x5f\x49\x44\40\101\116\104\40\x6c\141\x6e\x67\165\141\x67\145\x5f\151\144\40\x3d\40\72\x4c\x41\116\x47\x55\x41\107\105\x5f\111\104"; $read_record = $pdo->prepare($sql); $read_record->bindValue("\102\101\123\105\x5f\x49\x44", $id); $read_record->bindValue("\x4c\x41\116\107\x55\x41\107\x45\x5f\x49\x44", $language_id); $read_record->execute(); if ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { $sql = "\12\40\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\x20\40\40\40\x20\40\40\40\x55\x50\104\x41\124\105\x20{$table_prefix}\x63\x75\x73\x74\157\x6d\137\x76\141\x6c\165\x65\x73\137\x6c\x61\x62\x65\x6c\40\x53\x45\x54\40\xa\40\40\40\x20\40\x20\x20\40\x20\x20\40\40\40\x20\40\x20\x20\40\40\40\x20\40\154\141\142\x65\x6c\x20\75\x20\72\x4c\x41\x42\105\x4c\x20\xa\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x20\x20\x20\40\x20\x20\x20\x57\x48\105\x52\x45\40\x62\141\x73\x65\x5f\151\144\40\75\40\72\x42\101\123\x45\x5f\111\104\40\101\116\x44\40\x6c\x61\156\x67\x75\141\x67\145\x5f\151\144\40\75\x20\72\114\101\x4e\107\125\x41\x47\105\137\x49\x44\x3b\xa\x20\x20\x20\40\40\40\40\x20\40\40\x20\x20\x20\40\x20\x20"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\x4c\x41\x42\x45\114", $label); $update_record->bindValue("\x42\x41\x53\x45\137\x49\x44", $id); $update_record->bindValue("\x4c\x41\116\107\x55\101\107\x45\137\x49\104", $language_id); $update_record->execute(); unset($update_record); } else { $sql = "\xa\40\x20\40\40\40\40\40\40\40\x20\x20\x20\x20\x20\40\x20\40\x20\x20\x20\111\x4e\x53\x45\122\x54\40\111\x4e\124\117\40{$table_prefix}\143\165\x73\x74\157\x6d\x5f\x76\141\154\165\145\x73\137\154\141\x62\x65\154\12\40\x20\40\40\x20\40\40\x20\40\x20\x20\x20\40\40\x20\x20\x20\40\40\40\x20\x20\x28\40\142\x61\163\145\137\x69\x64\54\x20\x6c\141\x6e\x67\x75\x61\147\145\137\x69\x64\x2c\40\x20\x6c\x61\142\145\154\x29\xa\40\40\x20\40\x20\x20\40\x20\x20\40\40\40\40\x20\40\40\40\x20\40\x20\126\x41\x4c\125\x45\123\xa\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x20\x20\50\x3a\x42\101\123\x45\x5f\x49\x44\x2c\x20\x3a\x4c\x41\x4e\x47\x55\101\107\x45\137\x49\104\x2c\40\72\114\x41\102\105\x4c\x29\12\x20\x20\x20\40\x20\x20\x20\x20\40\x20\40\x20\x20\40\40\40"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\x42\101\x53\x45\x5f\111\104", $id); $create_record->bindValue("\114\101\116\107\125\x41\x47\105\x5f\111\104", $language_id); $create_record->bindValue("\114\x41\102\105\114", $label); $create_record->execute(); unset($create_record); } } else { $sql = "\xa\40\x20\40\40\40\40\x20\x20\40\x20\40\40\40\40\40\x20\x20\40\111\x4e\x53\x45\x52\x54\40\x49\x4e\x54\117\x20{$table_prefix}\x63\x75\163\x74\157\x6d\x5f\x76\x61\x6c\165\145\163\x5f\x62\x61\163\145\xa\x20\40\40\x20\x20\40\x20\x20\40\40\x20\40\40\x20\40\40\40\x20\40\40\50\40\151\144\54\x20\x20\154\x69\163\x74\x5f\x69\x64\54\x20\x20\x6c\151\156\145\x5f\x6f\x72\144\145\x72\x2c\40\x20\x73\x74\141\164\x75\163\x29\xa\40\40\40\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\x20\x20\x56\x41\114\125\x45\x53\xa\x20\x20\x20\x20\x20\40\x20\40\x20\40\40\x20\40\40\x20\x20\40\x20\40\x20\x28\72\111\x44\x2c\40\72\x4c\x49\x53\x54\x5f\111\x44\x2c\x20\72\114\x49\116\105\x5f\x4f\x52\x44\105\122\x2c\40\72\123\124\x41\124\x55\x53\51\12\40\40\x20\40\40\40\40\40\40\40\x20\x20\40\x20"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\111\104", $new_id); $create_record->bindValue("\x4c\111\123\124\x5f\111\x44", $custom_list_id); $create_record->bindValue("\x4c\x49\116\x45\x5f\x4f\x52\x44\105\122", $new_line_order); $create_record->bindValue("\123\x54\x41\x54\125\123", 1); $create_record->execute(); unset($create_record); $sql = "\xa\x20\x20\40\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\40\40\x20\x20\x20\x49\116\123\x45\122\124\x20\x49\x4e\x54\117\40{$table_prefix}\143\165\x73\x74\x6f\155\137\166\x61\x6c\x75\145\x73\x5f\154\x61\x62\145\x6c\xa\40\x20\x20\40\40\40\40\x20\x20\x20\40\x20\40\x20\40\x20\40\x20\x20\x20\x28\40\142\x61\x73\145\137\151\144\x2c\x20\x6c\141\156\147\165\x61\147\145\137\151\144\x2c\40\x20\x6c\x61\142\145\x6c\x29\12\40\40\40\40\x20\40\40\40\x20\40\x20\40\40\40\40\40\40\40\x56\101\114\125\x45\123\xa\40\40\40\x20\x20\40\x20\x20\40\40\40\x20\40\40\x20\x20\40\40\40\x20\50\x3a\x42\x41\x53\105\x5f\x49\x44\x2c\40\72\114\x41\x4e\107\x55\x41\107\105\137\x49\x44\x2c\x20\72\x4c\101\x42\105\x4c\51\xa\x20\40\x20\40\40\x20\x20\40\x20\x20\40\x20\40\40"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\102\x41\x53\105\137\x49\104", $new_id); $create_record->bindValue("\114\x41\116\x47\125\101\x47\105\137\111\104", $language_id); $create_record->bindValue("\114\101\x42\105\114", $label); $create_record->execute(); unset($create_record); $new_id++; $new_line_order++; } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\x63\x61\164\151\x6f\x6e\72\40\x2e\x2f\x3f\166\x69\x65\167\137\160\141\x67\x65\x3d\x63\141\164\145\x67\x6f\162\x79\46\141\155\160\73\x6d\157\144\145\75{$process}\x26\160\162\157\143\145\163\x73\75\x31\71\x26\x65\162\x72\157\x72\137\143\157\x64\145\x3d\60\x34{$query_string}"); die; } } $sql = "\x53\105\x4c\105\103\x54\x20\160\157\163\164\x74\x79\x70\145\137\x69\144\54\x20\x6e\141\x6d\145\40\x46\x52\x4f\115\x20{$table_prefix}\x63\165\163\x74\x6f\x6d\x5f\154\151\x73\164\x73\40\127\x48\105\x52\105\40\151\144\75{$custom_list_id}"; $read_record = $pdo->prepare($sql); $read_record->execute(); if ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { $posttype_id = $record["\160\x6f\x73\x74\164\171\160\145\x5f\x69\x64"]; $name = $record["\x6e\141\155\x65"]; } unset($read_record); header("\114\x6f\143\x61\x74\x69\157\156\72\x20\x2e\x2f\77\166\151\x65\167\137\x70\x61\147\x65\75\x63\165\x73\x74\157\x6d\137\166\141\154\x75\x65\46\154\x69\163\x74\x5f\151\x64\75{$custom_list_id}\46\154\x69\163\x74\137\x6e\141\155\x65\75{$name}\x26\x70\157\163\164\164\x79\x70\x65\x5f\x69\x64\x3d{$posttype_id}"); die; } if ($data_type == "\143\141\164\x65\147\157\162\x79" || $data_type == "\x74\x61\x67") { $target_table = $table_prefix . "\164\x61\170\x6f\x6e\x6f\x6d\x69\145\163\x5f\x62\141\163\x65"; $classification = $data_type == "\x63\141\x74\x65\x67\157\x72\x79" ? 1 : 2; $new_id = getNextId($target_table); foreach ($data as $row_key => $row) { $language_id = false !== array_search("\x6c\141\x6e\147\165\141\x67\145\137\x69\144", $keys) ? $row[array_search("\x6c\x61\x6e\x67\x75\141\x67\145\x5f\151\144", $keys)] : 1; $slug = $row[array_search("\163\154\165\x67", $keys)]; $label = $row[array_search("\154\141\142\x65\154", $keys)]; $parent_id = $data_type == "\x63\141\164\145\x67\157\162\x79" && false !== array_search("\160\141\x72\x65\x6e\164\137\x69\x64", $keys) ? $row[array_search("\x70\x61\x72\145\x6e\164\137\x69\144", $keys)] : 0; if (!($overlap_slug = checkOverlapSlug($target_table, $slug, 0, $posttype_id, $classification))) { $new_line_order = getNewLineOrder($target_table, $posttype_id, $classification); try { $pdo->beginTransaction(); $sql = "\12\x20\x20\40\x20\x20\x20\40\40\x20\40\40\x20\x20\40\40\40\x20\40\111\x4e\x53\x45\x52\x54\40\x49\116\124\117\x20{$table_prefix}\164\141\170\x6f\x6e\157\155\151\145\x73\137\142\x61\x73\x65\12\40\x20\x20\x20\40\40\x20\40\40\x20\x20\x20\40\40\40\x20\40\40\40\x20\50\40\x69\144\x2c\x20\x20\160\x6f\163\164\164\171\160\145\137\x69\144\54\x20\x20\x63\154\x61\163\163\151\x66\x69\143\x61\164\x69\x6f\156\54\40\40\x70\141\162\x65\x6e\164\137\151\144\54\40\x20\x73\x6c\165\x67\54\x20\40\x6c\x69\156\145\137\x6f\x72\x64\145\x72\x2c\x20\40\x73\x74\x61\x74\165\x73\x29\xa\x20\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\x20\x20\40\40\x20\40\x56\101\114\x55\105\123\xa\40\40\x20\40\x20\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x20\x28\72\x49\x44\54\40\x3a\120\x4f\x53\124\124\131\x50\105\x5f\111\x44\54\40\x3a\x43\x4c\101\x53\x53\111\x46\111\103\x41\x54\x49\x4f\116\54\x20\x3a\120\x41\x52\105\x4e\124\137\x49\x44\54\40\72\123\x4c\x55\107\54\40\x3a\x4c\x49\x4e\105\137\117\122\x44\105\122\x2c\40\72\123\x54\101\124\x55\x53\51\xa\x20\40\40\x20\40\x20\x20\x20\40\40\x20\40\x20\x20"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\111\104", $new_id); $create_record->bindValue("\x50\x4f\x53\x54\x54\x59\x50\x45\137\111\104", $posttype_id); $create_record->bindValue("\103\114\x41\123\x53\111\x46\x49\103\x41\124\x49\x4f\116", $classification); $create_record->bindValue("\x50\101\x52\105\116\124\137\x49\x44", $parent_id); $create_record->bindValue("\x53\x4c\125\x47", $slug); $create_record->bindValue("\x4c\x49\116\x45\x5f\117\122\x44\105\122", $new_line_order); $create_record->bindValue("\123\x54\101\x54\x55\x53", 1); $create_record->execute(); unset($create_record); $sql = "\xa\40\40\x20\40\40\40\x20\40\40\x20\40\40\40\40\x20\40\x20\40\x49\116\x53\105\122\x54\40\x49\x4e\x54\117\40{$table_prefix}\x74\141\170\x6f\156\157\155\151\x65\163\137\154\141\142\145\154\xa\40\x20\40\40\x20\x20\x20\40\40\40\x20\x20\40\x20\40\x20\40\40\x20\x20\50\40\142\x61\163\x65\137\x69\x64\x2c\40\154\141\156\147\165\x61\147\145\x5f\x69\144\54\40\x20\154\x61\x62\145\x6c\51\xa\40\40\x20\40\40\x20\x20\40\40\40\x20\40\x20\x20\x20\40\x20\x20\126\x41\x4c\125\105\123\xa\40\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\40\x28\x3a\102\x41\x53\x45\x5f\x49\104\x2c\40\x3a\x4c\x41\116\107\125\x41\x47\105\x5f\x49\x44\x2c\x20\x3a\114\101\102\x45\x4c\51\xa\x20\40\40\40\40\x20\x20\x20\x20\40\40\x20\40\40"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\102\x41\x53\x45\137\111\104", $new_id); $create_record->bindValue("\x4c\x41\x4e\x47\125\x41\107\x45\x5f\111\x44", $language_id); $create_record->bindValue("\x4c\x41\x42\105\114", $label); $create_record->execute(); unset($create_record); $pdo->commit(); $new_id++; } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\143\x61\164\151\x6f\x6e\72\40\x2e\57\x3f\x76\151\145\167\137\x70\x61\147\x65\x3d\x63\141\x74\145\147\x6f\162\171\x26\x61\155\160\73\x6d\x6f\144\x65\x3d{$process}\x26\160\162\157\143\x65\163\x73\x3d\x31\71\46\145\162\x72\x6f\162\137\x63\157\144\x65\75\x30\x34{$query_string}"); die; } } else { try { $pdo->beginTransaction(); $base_id = 0; $sql = "\x53\x45\114\105\x43\x54\x20\x69\144\40\x46\x52\x4f\x4d\40{$table_prefix}\164\x61\x78\157\x6e\157\155\151\145\163\x5f\142\141\163\x65\x20\127\110\x45\122\x45\x20\160\x6f\x73\164\x74\x79\160\x65\x5f\151\x64\x20\x3d\40\x3a\120\x4f\123\x54\x54\x59\120\x45\137\111\104\x20\x41\116\104\x20\143\154\141\x73\163\151\146\151\x63\x61\164\x69\157\x6e\40\75\x20\x3a\103\114\x41\123\123\x49\x46\x49\103\x41\124\111\117\116\x20\x41\116\104\x20\x73\154\x75\147\x20\x3d\x20\x3a\x53\114\125\107"; $read_record = $pdo->prepare($sql); $read_record->bindValue("\x50\117\123\x54\x54\x59\120\105\137\x49\x44", $posttype_id); $read_record->bindValue("\x43\114\101\123\x53\111\106\x49\103\x41\x54\x49\x4f\x4e", $classification); $read_record->bindValue("\x53\x4c\x55\x47", $slug); $read_record->execute(); while ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { $base_id = $record["\151\144"]; } unset($read_record); $sql = "\xa\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\40\x20\40\125\120\104\x41\x54\105\x20{$table_prefix}\x74\x61\170\157\x6e\x6f\155\151\145\163\x5f\142\141\x73\x65\x20\123\x45\124\xa\40\40\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\x20\40\x20\x20\40\x20\x20\160\141\x72\145\156\164\x5f\151\144\40\75\40\72\120\x41\x52\x45\x4e\x54\x5f\111\104\xa\x20\40\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\40\40\40\40\x20\x57\110\105\122\105\x20\x69\144\x20\75\x20\72\x49\x44\xa\x20\x20\x20\40\40\x20\x20\x20\40\40\x20\40\40\x20"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\120\101\x52\105\x4e\x54\x5f\x49\104", $parent_id); $update_record->bindValue("\111\x44", $base_id); $update_record->execute(); unset($update_record); $check_flg = 0; $sql = "\123\105\114\105\x43\124\x20\103\117\125\116\x54\50\52\x29\40\x41\123\x20\143\157\x75\156\x74\40\106\x52\x4f\x4d\40{$table_prefix}\x74\141\x78\157\156\x6f\155\151\145\x73\x5f\x6c\141\x62\x65\154\x20\x57\x48\x45\x52\105\40\x62\x61\x73\145\x5f\x69\x64\x20\75\x20{$base_id}\x20\x41\116\x44\x20\x6c\141\156\147\165\141\147\145\x5f\x69\x64\x20\75\x20{$language_id}"; $check_record = $pdo->prepare($sql); $check_record->execute(); while ($record = $check_record->fetch(PDO::FETCH_ASSOC)) { $check_flg = $record["\143\157\x75\x6e\164"]; } unset($check_record); if ($check_flg) { $sql = "\12\x20\40\x20\x20\40\40\40\40\40\x20\40\40\x20\x20\40\40\x20\40\x20\40\125\120\x44\x41\x54\105\40{$table_prefix}\164\x61\170\157\156\157\155\151\145\x73\x5f\x6c\x61\142\145\x6c\40\123\105\124\xa\x20\40\40\x20\x20\40\40\40\x20\x20\x20\40\40\x20\x20\40\x20\40\40\40\40\x20\x6c\x61\x62\145\154\40\x3d\40\x3a\x4c\101\x42\105\114\12\x20\x20\x20\40\x20\x20\40\40\40\40\x20\40\40\x20\40\40\x20\x20\40\40\x57\110\x45\122\x45\12\40\40\x20\x20\x20\40\40\x20\40\40\x20\x20\40\x20\40\x20\40\x20\40\40\40\x20\142\x61\x73\145\137\x69\x64\40\x3d\x20\72\102\101\x53\x45\137\111\x44\12\40\40\40\40\x20\x20\x20\40\40\40\x20\40\40\40\40\x20\40\x20\40\40\x20\x20\x41\116\x44\x20\x6c\141\x6e\x67\165\x61\x67\x65\x5f\x69\144\x20\x3d\40\72\x4c\101\116\107\125\101\107\105\137\x49\x44\xa\40\x20\x20\40\40\x20\x20\x20\40\40\x20\x20\40\40\x20\x20"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\114\101\102\105\114", $label); $update_record->bindValue("\102\x41\x53\x45\137\x49\x44", $base_id); $update_record->bindValue("\x4c\x41\116\x47\125\x41\107\105\x5f\111\104", $language_id); $update_record->execute(); unset($update_record); } else { $sql = "\12\x20\40\x20\40\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\x20\x20\40\x20\40\x49\116\123\105\x52\x54\40\111\116\x54\x4f\x20{$table_prefix}\x74\x61\x78\157\156\x6f\x6d\x69\145\163\x5f\x6c\141\x62\145\154\xa\40\40\40\x20\40\x20\x20\x20\x20\x20\x20\40\40\40\x20\40\40\x20\40\40\40\40\x28\x62\141\x73\145\137\151\144\54\40\x20\x6c\141\156\x67\165\141\147\145\x5f\151\x64\54\x20\40\x6c\x61\142\145\x6c\51\12\40\40\40\x20\x20\x20\40\x20\40\40\40\x20\40\x20\x20\40\x20\x20\x20\40\126\101\114\x55\x45\123\xa\40\40\40\x20\40\x20\40\40\40\40\40\x20\40\40\40\40\40\x20\40\x20\40\40\x28\72\x42\101\x53\x45\137\111\x44\54\x20\72\114\x41\116\107\125\101\x47\x45\x5f\x49\104\54\x20\x3a\x4c\x41\102\x45\114\51\12\40\x20\x20\40\40\40\40\40\x20\x20\x20\40\40\40\40\x20"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\x42\x41\x53\105\137\111\x44", $base_id); $create_record->bindValue("\x4c\101\x4e\x47\x55\101\x47\x45\x5f\111\104", $language_id); $create_record->bindValue("\114\x41\102\105\114", $label); $create_record->execute(); unset($create_record); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\143\x61\164\151\x6f\156\72\40\56\x2f\x3f\166\151\x65\167\x5f\x70\x61\147\145\x3d\143\141\x74\145\x67\157\162\x79\46\x61\x6d\160\x3b\x6d\157\x64\x65\75{$process}\x26\160\x72\157\x63\145\163\x73\x3d\x31\x39\x26\145\162\x72\157\162\x5f\x63\157\144\145\x3d\60\x35\x26{$query_string}"); die; } } } header("\114\157\x63\x61\x74\x69\x6f\x6e\x3a\40\56\57\x3f\166\x69\x65\x77\x5f\x70\x61\147\x65\75{$data_type}\x26\164\x68\151\x73\x5f\160\157\163\164\x74\x79\x70\x65\75{$posttype_id}\x26\164\150\151\163\x5f\160\157\x73\164\x74\x79\x70\x65\137\x6f\162\144\x65\x72\x3d{$posttype_order}"); die; } if ($data_type == "\160\157\x73\x74" && !empty($key_column)) { $target_table = $table_prefix . "\160\157\x73\x74\163\x5f\x62\x61\x73\x65"; $new_id = getNextId($target_table); try { $categories = array(); $tags = array(); $sql = "\xa\40\x20\x20\40\40\40\x20\40\40\40\x20\x20\40\x20\123\105\x4c\x45\x43\124\x20\151\144\54\40\x63\x6c\x61\163\x73\151\146\151\143\141\164\x69\157\156\54\x20\163\x6c\x75\x67\x2c\40\x6c\x61\142\145\x6c\40\106\122\117\x4d\40{$table_prefix}\x74\x61\x78\x6f\156\157\x6d\x69\145\163\137\142\141\x73\x65\40\101\x53\40\164\x62\xa\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\40\x20\x20\114\105\x46\124\x20\x4a\117\x49\x4e\x20{$table_prefix}\164\x61\x78\157\156\157\x6d\x69\145\163\x5f\x6c\x61\142\x65\x6c\40\x41\123\x20\x74\154\xa\x20\40\x20\x20\40\40\x20\x20\40\x20\x20\40\40\x20\x4f\116\x20\x74\x62\x2e\151\x64\40\x3d\40\x74\154\56\x62\141\163\x65\137\151\144\12\x20\40\40\x20\x20\40\40\x20\x20\x20\x20\40\40\40\x57\x48\105\122\x45\40\x74\142\56\144\x65\x6c\x65\x74\x65\137\146\154\147\40\x3d\x20\60\40\x41\116\104\x20\164\142\x2e\x70\157\163\164\164\171\x70\145\x5f\151\x64\40\x3d\40{$posttype_id}\12\40\40\x20\x20\40\x20\40\x20\40\40\x20\x20"; $read_record = $pdo->prepare($sql); $read_record->execute(); while ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { if ($record["\143\154\141\163\x73\x69\146\x69\143\x61\x74\x69\x6f\x6e"] == 1) { $categories[sprintf("\x25\60\64\x64", $record["\x69\144"])] = $record["\154\141\x62\x65\154"]; } else { $tags[sprintf("\45\x30\x34\144", $record["\151\144"])] = $record["\154\141\142\145\x6c"]; } } } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\x63\141\164\x69\157\156\72\x20\56\x2f\77\x76\x69\145\x77\x5f\160\141\x67\x65\75\x63\x6f\156\x66\x69\147\137\x70\157\x73\164\164\171\160\x65\x26\160\x72\x6f\143\145\x73\x73\75\x31\71\x26\145\x72\x72\157\162\x5f\143\157\x64\145\x3d\x38\71"); die; } foreach ($data as $row) { $base_columns["\151\x64"] = $new_id; $base_columns["\x68\141\163\150\137\x69\x64"] = generateHashId($new_id); $base_columns["\163\151\x74\x65\137\151\144"] = $_SESSION[$session_key]["\143\x6f\x6d\x6d\x6f\156"]["\x74\150\x69\163\x5f\x73\x69\x74\145"]; $base_columns["\x70\x6f\163\164\x74\x79\160\x65\137\151\144"] = $_SESSION[$session_key]["\x63\x6f\155\x6d\x6f\x6e"]["\164\150\151\163\137\x70\x6f\x73\164\x74\171\160\x65"]; $base_columns["\x63\x72\145\x61\164\x65\x64\137\142\171"] = $_SESSION[$session_key]["\x75\x73\145\162"]["\151\144"]; $base_columns["\165\160\144\141\164\145\x64\137\142\171"] = $_SESSION[$session_key]["\165\163\x65\162"]["\151\144"]; $base_columns["\147\162\157\165\x70\145\144\x5f\142\x79"] = $_SESSION[$session_key]["\165\x73\x65\x72"]["\x67\x72\157\x75\160\137\151\144"]; try { $q_where = ''; $q_key = ''; switch ($key_column) { case "\x69\144": $q_where = "\160\142\x2e\x69\144\40\x3d\x20\x3a\113\x45\131"; $q_key = $row[array_search("\151\x64", $keys)]; break; case "\150\141\163\x68\x5f\x69\x64": $q_where = "\160\x62\56\150\x61\x73\150\x5f\151\x64\40\75\40\72\x4b\x45\x59"; $q_key = $row[array_search("\150\141\163\x68\x5f\151\x64", $keys)]; break; case "\163\x6c\165\x67": $q_where = "\x70\142\56\x73\x6c\x75\147\x20\x3d\40\x3a\x4b\105\131"; $q_key = $row[array_search("\x73\154\165\x67", $keys)]; break; } $new_id++; $is_exist = 0; $version = 1; $sql = "\xa\40\40\40\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\x53\x45\x4c\x45\x43\x54\x20\52\40\x46\x52\x4f\115\x20{$table_prefix}\x70\x6f\163\164\163\137\x62\141\x73\145\x20\x41\x53\40\x70\142\xa\x20\40\40\40\40\x20\40\x20\40\40\x20\40\40\40\x20\40\114\105\x46\124\x20\x4a\117\x49\116\40{$table_prefix}\160\157\x73\x74\x73\x5f\x74\145\x78\164\x20\x41\123\x20\160\x74\12\40\x20\x20\40\40\40\x20\x20\40\x20\40\x20\40\x20\x20\x20\117\x4e\x20\x70\x62\x2e\x69\144\40\75\40\160\x74\56\x62\141\163\x65\x5f\x69\144\12\x20\x20\40\40\x20\x20\x20\x20\40\40\x20\40\x20\x20\40\40\127\x48\x45\122\x45\40{$q_where}\xa\40\x20\x20\40\40\40\40\40\x20\40\x20\40"; $read_record = $pdo->prepare($sql); $read_record->bindValue("\x4b\x45\x59", $q_key); $read_record->execute(); while ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { $is_exist = 1; if ($record["\x63\x75\x72\x72\145\x6e\x74\x5f\146\x6c\x67"] == 1) { foreach ($record as $key => $value) { if (isset($base_columns[$key])) { $base_columns[$key] = $value; } if (isset($text_columns[$key])) { $text_columns[$key] = $value; } } } } unset($read_record); $values_base = array(); foreach ($base_columns as $key => $value) { $values_base[$key] = false === in_array($key, array("\x63\141\164\145\147\157\162\x79\137\151\144", "\164\141\147\x5f\x69\144")) && false !== in_array($key, $keys) ? $row[array_search($key, $keys)] : $value; } $category_ids = array(); if (false !== in_array("\143\x61\164\145\x67\x6f\162\171", $keys)) { $this_categories = explode("\x20", $row[array_search("\143\x61\x74\145\147\x6f\162\x79", $keys)]); foreach ($this_categories as $label) { if (false !== in_array($label, $categories)) { $category_ids[] = array_search($label, $categories); } } $category_id = !empty($category_ids) ? implode("\54", $category_ids) : "\x30\x30\60\x30"; $values_base["\x63\x61\x74\145\147\x6f\x72\x79\137\151\144"] = $category_id; } $tag_ids = array(); if (false !== in_array("\164\x61\x67", $keys)) { $this_tags = explode("\x20", $row[array_search("\x74\x61\147", $keys)]); foreach ($this_tags as $label) { if (false !== in_array($label, $tags)) { $tag_ids[] = array_search($label, $tags); } } $tag_id = !empty($tag_ids) ? implode("\x2c", $tag_ids) : "\x30\60\60\x30"; $values_base["\164\141\x67\137\x69\144"] = $tag_id; } $text_columns["\x62\x61\x73\x65\137\151\144"] = $values_base["\x69\x64"]; $text_columns["\x62\141\163\145\x5f\x76\145\162\x73\151\157\156"] = $values_base["\x76\x65\x72\163\x69\x6f\x6e"]; if (isset($keys["\144\x65\163\x63\162\151\160\x74\x69\x6f\156"])) { $text_columns["\141\x64\x64\151\x74\151\157\x6e"] = $row[array_search("\144\145\163\x63\162\151\160\164\x69\157\x6e", $keys)]; } $values_text = array(); foreach ($text_columns as $key => $value) { $values_text[$key] = false !== in_array($key, $keys) ? $row[array_search($key, $keys)] : $value; } $custom_items = array(); $values_custom = array(); $custom_columns = array(); $sql = "\123\105\114\x45\103\x54\x20\151\144\x2c\x20\163\x6c\x75\147\x20\x46\122\x4f\x4d\x20{$table_prefix}\143\165\163\x74\x6f\x6d\137\151\164\x65\x6d\x73\40\x57\110\105\x52\x45\x20\x64\x65\154\x65\164\145\x5f\x66\x6c\x67\40\x3d\x20\x30\x20\101\x4e\x44\40\160\157\x73\164\x74\171\x70\x65\x5f\x69\144\40\x3d\x20{$_SESSION[$session_key]["\143\x6f\x6d\155\x6f\156"]["\164\x68\x69\x73\x5f\x70\x6f\x73\x74\x74\171\160\x65"]}"; $read_record = $pdo->prepare($sql); $read_record->execute(); while ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { $custom_items[$record["\151\144"]] = $record["\163\154\x75\x67"]; $values_custom[$record["\163\154\165\147"]] = null; } unset($read_record); $custom_columns["\142\141\x73\145\137\151\144"] = $values_text["\x62\141\x73\x65\x5f\x69\144"]; $custom_columns["\x62\141\x73\x65\137\166\145\162\x73\151\x6f\x6e"] = $values_text["\142\141\163\145\137\166\145\162\163\151\157\x6e"]; $custom_columns["\154\141\156\147\x75\x61\x67\145\x5f\151\144"] = $values_text["\154\141\x6e\x67\165\141\x67\x65\x5f\151\144"]; foreach ($values_custom as $key => $value) { $values_custom[array_search($key, $custom_items)] = false !== in_array($key, $keys) ? $row[array_search($key, $keys)] : $value; unset($values_custom[$key]); } $pdo->beginTransaction(); if ($is_exist) { $sql = "\xa\40\40\40\x20\x20\40\x20\x20\40\x20\x20\x20\40\x20\40\x20\40\40\125\120\x44\101\x54\x45\40{$table_prefix}\x70\x6f\163\164\163\137\x62\x61\163\x65\x20\123\105\124\xa\40\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x20\40\x20\x20\40\x20\x70\x65\162\155\x61\154\151\156\153\137\153\x65\x79\40\40\40\40\x3d\x20\x3a\x50\x45\122\115\101\x4c\x49\116\x4b\137\x4b\x45\x59\x2c\xa\40\x20\x20\40\40\x20\40\40\40\x20\x20\40\x20\40\x20\40\40\x20\40\40\x70\145\162\155\141\154\x69\156\153\137\x75\x72\x69\40\x20\x20\x20\x3d\x20\x3a\120\105\x52\x4d\101\114\111\x4e\113\137\125\122\x49\x2c\12\x20\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\40\40\x20\x20\x20\x20\40\x70\x75\x62\x6c\x69\163\150\137\x64\141\x74\x65\x74\151\155\145\x20\x3d\x20\72\x50\125\102\114\x49\x53\x48\137\x44\101\x54\x45\x54\111\115\105\54\xa\x20\x20\40\x20\x20\x20\40\x20\40\40\40\40\40\40\40\x20\x20\40\x20\40\160\x75\142\x6c\151\163\x68\137\x65\x6e\x64\x5f\x61\164\x20\40\x20\x3d\40\72\120\125\102\x4c\111\123\110\x5f\105\116\x44\x5f\101\124\x2c\12\40\x20\40\40\x20\x20\x20\40\x20\40\x20\40\40\40\40\40\40\x20\40\40\x73\x69\164\x65\137\x69\144\40\x20\40\40\40\40\x20\40\40\40\75\x20\x3a\123\111\124\x45\137\111\x44\54\12\x20\x20\x20\x20\x20\40\40\x20\x20\x20\x20\40\40\40\x20\40\x20\40\40\40\x70\157\x73\x74\164\x79\160\145\137\x69\144\x20\x20\x20\x20\40\40\x3d\x20\x3a\120\117\123\x54\x54\x59\120\x45\137\x49\x44\54\xa\x20\x20\40\40\40\40\x20\40\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\40\143\141\x74\145\x67\157\162\171\x5f\151\144\x20\x20\x20\40\40\40\x3d\x20\x3a\103\x41\x54\105\x47\117\122\x59\137\x49\x44\54\xa\40\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\40\40\40\40\40\x20\x20\x20\x74\141\x67\x5f\151\144\40\40\x20\x20\40\x20\x20\x20\40\40\x20\75\x20\72\124\x41\107\137\111\104\54\12\40\40\x20\40\x20\x20\40\x20\x20\40\x20\40\40\40\x20\40\x20\x20\40\x20\163\154\165\x67\x20\x20\40\40\40\40\40\40\x20\40\x20\x20\40\x3d\x20\72\123\x4c\x55\x47\54\xa\40\40\40\40\40\x20\40\x20\40\40\40\x20\x20\40\40\40\x20\x20\40\40\x65\171\x65\x63\x61\164\x63\150\x20\x20\40\40\40\x20\x20\40\40\x3d\40\72\105\x59\105\x43\101\x54\103\x48\54\xa\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\40\x61\156\x63\150\x6f\x72\x20\x20\40\x20\40\x20\40\x20\x20\x20\40\75\40\72\x41\x4e\x43\x48\x4f\122\x2c\12\x20\40\x20\x20\40\40\40\40\x20\40\x20\40\x20\x20\x20\40\x20\40\40\40\165\160\x64\141\164\x65\144\x5f\141\x74\x20\x20\x20\x20\40\x20\x20\x3d\40\72\125\x50\104\x41\124\x45\x44\137\101\x54\54\xa\x20\x20\40\40\40\x20\x20\40\x20\40\40\40\40\x20\x20\x20\x20\40\x20\x20\x75\x70\144\x61\164\145\144\x5f\x62\171\x20\x20\40\40\x20\40\x20\75\x20\72\125\120\104\x41\x54\x45\x44\137\x42\x59\54\xa\x20\x20\40\40\40\x20\40\x20\40\40\x20\40\40\x20\40\x20\40\x20\40\40\x67\162\x6f\165\x70\x65\x64\137\x62\171\40\x20\x20\40\x20\40\x20\75\40\72\x47\x52\x4f\x55\x50\105\104\x5f\x42\x59\54\xa\x20\40\x20\x20\x20\x20\40\x20\40\x20\40\x20\x20\40\40\x20\40\40\40\x20\163\164\141\x74\x75\x73\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\75\x20\x3a\123\x54\101\124\125\123\xa\40\40\x20\x20\40\x20\40\x20\x20\40\x20\x20\x20\x20\40\x20\40\x20\127\x48\x45\x52\105\40\x69\x64\40\x3d\40\x3a\111\104\40\101\x4e\104\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\75\x20\72\126\105\x52\x53\111\117\116\12\40\40\x20\40\x20\x20\x20\x20\40\x20\x20\40\40\x20"; $update_post_base = $pdo->prepare($sql); $update_post_base->bindValue("\120\105\122\x4d\x41\x4c\111\x4e\113\x5f\113\x45\x59", $values_base["\160\x65\162\x6d\x61\x6c\x69\156\x6b\137\153\x65\171"]); $update_post_base->bindValue("\x50\105\x52\x4d\x41\114\111\116\x4b\137\125\x52\x49", $values_base["\x70\x65\x72\x6d\x61\154\151\x6e\153\137\165\x72\x69"]); $update_post_base->bindValue("\120\x55\102\114\x49\x53\x48\x5f\104\101\124\105\124\x49\115\105", $values_base["\x70\x75\142\154\151\163\150\x5f\144\141\164\x65\x74\x69\x6d\145"]); $update_post_base->bindValue("\120\125\x42\114\x49\123\x48\137\x45\116\104\137\101\124", $values_base["\160\165\x62\x6c\x69\x73\x68\137\x65\x6e\144\x5f\141\164"]); $update_post_base->bindValue("\123\x49\x54\105\137\111\104", $values_base["\x73\151\x74\x65\x5f\151\144"]); $update_post_base->bindValue("\120\117\123\x54\124\x59\x50\x45\137\x49\x44", $values_base["\x70\157\x73\164\164\x79\160\145\137\151\x64"]); $update_post_base->bindValue("\x43\101\x54\x45\107\x4f\122\131\137\x49\104", $values_base["\143\x61\x74\x65\x67\x6f\x72\171\137\151\x64"]); $update_post_base->bindValue("\124\101\107\x5f\x49\x44", $values_base["\x74\141\x67\x5f\x69\x64"]); $update_post_base->bindValue("\123\114\x55\x47", $values_base["\x73\x6c\x75\147"]); $update_post_base->bindValue("\105\x59\x45\x43\101\124\103\110", $values_base["\145\x79\x65\x63\141\x74\143\150"]); $update_post_base->bindValue("\101\x4e\x43\x48\117\x52", $values_base["\141\156\x63\150\157\x72"]); $update_post_base->bindValue("\x55\x50\104\x41\124\105\x44\137\x41\124", $values_base["\165\x70\x64\141\164\145\x64\137\141\x74"]); $update_post_base->bindValue("\x55\x50\x44\101\x54\105\x44\137\102\131", $values_base["\165\160\x64\x61\x74\x65\x64\x5f\142\171"]); $update_post_base->bindValue("\107\122\117\x55\120\105\x44\x5f\x42\x59", $values_base["\147\x72\157\x75\x70\145\x64\x5f\142\x79"]); $update_post_base->bindValue("\123\124\101\124\125\x53", $values_base["\x73\164\141\164\x75\163"]); $update_post_base->bindValue("\111\104", $values_base["\x69\x64"]); $update_post_base->bindValue("\x56\105\122\x53\111\x4f\116", $values_base["\166\145\162\x73\x69\157\x6e"]); $update_post_base->execute(); unset($update_post_base); $sql = "\12\x20\40\x20\40\x20\40\40\x20\40\x20\x20\x20\x20\x20\x20\40\x20\40\x55\120\104\101\124\105\x20{$table_prefix}\x70\x6f\163\164\x73\137\x74\x65\x78\x74\40\x53\105\x54\12\40\40\40\40\x20\x20\x20\40\40\40\40\40\x20\40\x20\40\x20\x20\40\40\164\x69\x74\154\145\x20\x20\40\x20\75\x20\72\124\x49\124\x4c\105\x2c\12\x20\x20\40\40\x20\40\x20\40\x20\x20\40\40\x20\40\x20\40\40\40\40\40\x61\144\144\151\164\x69\x6f\x6e\x20\75\40\x3a\101\x44\104\x49\124\x49\117\116\x2c\12\x20\40\x20\40\40\40\x20\40\x20\40\x20\x20\x20\x20\x20\40\x20\x20\x20\40\x63\157\x6e\164\x65\x6e\164\40\40\x3d\x20\x3a\103\x4f\116\x54\x45\x4e\x54\12\x20\40\x20\40\x20\40\40\40\40\x20\40\x20\40\x20\40\40\40\40\x57\110\x45\122\105\40\142\x61\163\x65\137\x69\144\x20\x3d\40\x3a\x42\101\x53\105\137\111\104\40\101\x4e\x44\40\x62\141\163\x65\x5f\166\145\x72\163\151\157\x6e\40\x3d\x20\x3a\102\x41\x53\105\137\x56\x45\122\123\x49\x4f\116\40\101\116\x44\x20\x6c\x61\156\x67\165\x61\x67\x65\x5f\151\x64\40\x3d\x20\x3a\114\x41\116\107\x55\101\107\105\x5f\x49\x44\xa\x20\x20\40\40\40\40\40\x20\x20\40\40\40\x20\40"; $update_post_text = $pdo->prepare($sql); $update_post_text->bindValue("\x54\x49\124\114\x45", $values_text["\x74\x69\x74\x6c\x65"]); $update_post_text->bindValue("\101\104\104\x49\124\x49\x4f\x4e", $values_text["\x61\144\x64\151\x74\151\157\156"]); $update_post_text->bindValue("\x43\x4f\116\124\105\116\124", $values_text["\x63\x6f\x6e\x74\145\x6e\164"]); $update_post_text->bindValue("\x42\101\x53\105\137\111\x44", $values_text["\x62\141\163\145\x5f\151\144"]); $update_post_text->bindValue("\x42\101\123\x45\x5f\126\x45\x52\x53\x49\117\x4e", $values_text["\142\x61\163\x65\137\166\x65\x72\163\151\157\156"]); $update_post_text->bindValue("\114\101\x4e\107\x55\x41\x47\105\x5f\111\x44", $values_text["\x6c\141\156\147\165\141\x67\145\137\151\144"]); $update_post_text->execute(); unset($update_post_text); foreach ($values_custom as $key => $value) { $sql = "\12\40\x20\x20\40\40\x20\x20\40\x20\40\40\x20\40\x20\40\40\x20\x20\40\x20\x55\120\104\101\124\x45\x20{$table_prefix}\160\157\163\x74\163\x5f\x63\165\x73\164\x6f\x6d\x20\x53\105\124\12\40\x20\x20\x20\40\40\x20\40\40\40\40\x20\40\x20\40\40\x20\40\40\x20\x20\40\x76\x61\x6c\165\x65\40\x3d\40\72\126\x41\114\125\x45\12\40\x20\x20\40\x20\x20\40\x20\40\40\40\40\x20\40\x20\40\x20\40\40\x20\127\110\x45\122\105\12\x20\40\x20\x20\x20\x20\40\x20\40\40\40\40\40\40\40\40\40\x20\40\40\x20\40\142\x61\x73\x65\137\151\x64\x20\75\40\72\x42\x41\123\x45\x5f\x49\104\12\x20\40\x20\x20\40\40\x20\40\40\40\40\x20\x20\40\x20\40\40\x20\x20\x20\40\40\x41\116\104\40\154\141\156\147\165\x61\x67\145\137\x69\x64\40\x3d\40\72\114\101\116\107\x55\x41\x47\x45\x5f\x49\104\12\40\40\x20\40\40\x20\40\40\x20\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x41\x4e\x44\x20\x62\x61\163\x65\x5f\x76\145\x72\163\151\157\156\x20\x3d\x20\x3a\x42\x41\x53\x45\x5f\x56\x45\122\123\x49\x4f\x4e\12\40\40\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\40\40\40\x20\40\40\40\40\40\x20\x41\116\104\x20\143\x75\x73\x74\x6f\x6d\x5f\151\x74\145\x6d\137\151\144\40\75\x20\72\103\125\123\x54\117\x4d\137\x49\x54\x45\x4d\137\x49\104\12\40\40\x20\x20\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\40"; $update_post_custom = $pdo->prepare($sql); $update_post_custom->bindValue("\126\101\x4c\125\105", $value); $update_post_custom->bindValue("\x42\x41\x53\105\x5f\111\x44", $custom_columns["\x62\x61\163\x65\137\x69\144"]); $update_post_custom->bindValue("\x42\101\123\x45\137\126\105\122\123\x49\x4f\x4e", $custom_columns["\142\141\x73\x65\137\166\145\162\163\x69\x6f\156"]); $update_post_custom->bindValue("\x4c\x41\116\x47\x55\101\107\x45\137\x49\104", $custom_columns["\x6c\x61\156\x67\x75\x61\147\145\x5f\151\144"]); $update_post_custom->bindValue("\x43\x55\123\124\x4f\115\137\111\x54\x45\x4d\x5f\111\x44", $key); $update_post_custom->execute(); unset($update_post_custom); } } else { $sql = "\12\x20\40\40\40\x20\x20\40\x20\x20\x20\x20\x20\40\x20\x49\x4e\x53\105\x52\124\x20\111\x4e\x54\x4f\40{$table_prefix}\160\x6f\163\x74\163\x5f\x62\141\163\x65\xa\40\40\40\40\40\40\x20\40\40\x20\x20\40\x20\40\40\x20\40\40\x20\40\50\40\x69\144\54\40\x20\x76\145\162\163\151\157\x6e\54\40\40\x76\x65\162\x73\x69\157\156\x65\x64\137\141\164\54\40\x20\x68\x61\x73\x68\x5f\x69\x64\x2c\40\40\160\x65\x72\155\x61\154\x69\156\153\137\153\145\x79\54\40\40\160\145\x72\x6d\141\x6c\x69\156\153\x5f\x75\162\151\x2c\40\x20\x70\165\142\154\x69\163\x68\137\144\x61\164\145\164\x69\x6d\x65\x2c\x20\40\160\x75\x62\x6c\151\163\x68\x5f\x65\156\144\x5f\x61\x74\x2c\x20\x20\x73\x69\x74\x65\137\151\144\54\40\40\x70\x6f\x73\x74\x74\x79\x70\145\x5f\151\144\54\40\x20\x70\141\162\145\x6e\164\x5f\x69\x64\x2c\x20\40\143\141\x74\145\147\157\x72\171\x5f\151\x64\x2c\x20\x20\164\141\x67\137\151\144\54\40\40\x73\x6c\165\x67\54\40\x20\x65\171\145\143\x61\x74\143\150\54\40\x20\141\156\143\150\x6f\x72\54\40\40\143\162\145\x61\164\145\144\x5f\x61\x74\54\x20\x20\143\x72\x65\x61\164\x65\x64\x5f\x62\171\54\x20\40\x67\162\157\165\x70\x65\x64\137\x62\x79\x2c\x20\x20\x73\x74\141\164\x75\163\x29\xa\40\x20\40\40\40\x20\40\x20\x20\x20\40\40\x20\40\40\x20\x20\x20\126\x41\x4c\x55\x45\x53\12\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\40\40\40\40\x20\40\x20\50\x3a\111\x44\54\x20\72\x56\x45\122\123\111\117\x4e\54\x20\72\x56\x45\122\123\x49\x4f\116\x45\x44\137\101\124\x2c\x20\72\110\101\123\x48\x5f\x49\x44\x2c\x20\72\x50\x45\x52\x4d\x41\x4c\x49\116\x4b\137\113\105\131\x2c\x20\72\120\x45\x52\115\101\114\111\x4e\x4b\137\125\x52\x49\54\40\72\x50\x55\102\114\x49\x53\110\x5f\x44\x41\x54\105\124\x49\115\105\54\x20\72\120\125\x42\114\x49\123\110\137\x45\116\x44\137\x41\x54\54\40\x3a\123\x49\x54\x45\x5f\x49\104\x2c\40\72\x50\x4f\x53\x54\x54\x59\120\105\137\x49\104\54\40\x3a\120\x41\x52\x45\x4e\124\137\x49\x44\x2c\40\x3a\103\x41\x54\x45\107\117\x52\x59\137\111\104\x2c\x20\72\124\x41\x47\137\111\104\x2c\40\x3a\123\x4c\x55\107\54\40\x3a\105\x59\105\103\101\124\x43\x48\x2c\x20\72\101\116\103\x48\117\x52\54\x20\72\x43\x52\x45\x41\124\x45\104\x5f\x41\x54\x2c\x20\72\x43\x52\105\x41\124\x45\x44\137\102\x59\54\x20\x3a\107\x52\x4f\125\x50\x45\x44\137\102\131\54\x20\72\x53\x54\101\x54\125\123\x29\xa\x20\40\x20\x20\40\x20\x20\x20\40\40\40\x20\x20\x20"; $create_post_base = $pdo->prepare($sql); $create_post_base->bindValue("\111\104", $values_base["\151\x64"]); $create_post_base->bindValue("\126\105\122\123\111\117\x4e", $values_base["\x76\x65\x72\x73\x69\157\156"]); $create_post_base->bindValue("\x56\x45\x52\123\111\x4f\x4e\x45\104\x5f\101\124", $values_base["\166\x65\162\x73\x69\157\156\x65\x64\137\x61\x74"]); $create_post_base->bindValue("\110\x41\123\110\x5f\111\104", $values_base["\x68\x61\x73\150\137\151\x64"]); $create_post_base->bindValue("\120\x45\122\x4d\101\x4c\111\x4e\x4b\137\113\105\131", $values_base["\x70\x65\x72\x6d\x61\x6c\x69\156\153\137\x6b\x65\x79"]); $create_post_base->bindValue("\120\105\122\115\101\114\111\x4e\113\137\125\122\111", $values_base["\x70\145\x72\155\x61\154\151\156\153\137\x75\x72\151"]); $create_post_base->bindValue("\x50\x55\102\x4c\111\123\110\137\x44\101\124\105\x54\x49\x4d\x45", $values_base["\x70\165\x62\x6c\x69\163\x68\137\144\141\x74\145\x74\x69\155\x65"]); $create_post_base->bindValue("\120\125\102\x4c\x49\123\110\137\105\x4e\104\137\101\124", $values_base["\160\x75\x62\x6c\x69\x73\150\137\x65\156\144\137\141\164"]); $create_post_base->bindValue("\x53\111\124\105\x5f\111\x44", $values_base["\x73\x69\164\145\137\x69\144"]); $create_post_base->bindValue("\x50\x4f\123\x54\x54\131\x50\x45\x5f\111\x44", $values_base["\160\x6f\163\164\x74\171\x70\x65\137\x69\x64"]); $create_post_base->bindValue("\x50\x41\122\105\116\124\137\x49\104", $values_base["\160\141\162\145\x6e\164\x5f\x69\144"]); $create_post_base->bindValue("\x43\101\x54\105\x47\x4f\122\131\137\111\104", $values_base["\x63\141\x74\145\x67\x6f\x72\171\x5f\151\x64"]); $create_post_base->bindValue("\x54\101\107\x5f\x49\x44", $values_base["\x74\x61\147\137\x69\144"]); $create_post_base->bindValue("\123\x4c\x55\107", $values_base["\163\x6c\165\147"]); $create_post_base->bindValue("\105\131\x45\103\x41\124\103\x48", $values_base["\145\x79\x65\x63\x61\164\x63\150"]); $create_post_base->bindValue("\x41\x4e\x43\110\x4f\x52", $values_base["\x61\156\143\150\157\162"]); $create_post_base->bindValue("\x43\122\105\x41\x54\105\104\x5f\101\x54", $values_base["\143\162\145\141\x74\x65\x64\137\141\x74"]); $create_post_base->bindValue("\103\122\x45\x41\124\x45\104\x5f\102\131", $values_base["\143\162\145\x61\164\145\x64\x5f\142\171"]); $create_post_base->bindValue("\x47\122\x4f\125\120\x45\x44\x5f\102\131", $values_base["\x67\162\157\165\x70\145\144\137\142\171"]); $create_post_base->bindValue("\x53\x54\x41\124\x55\123", $values_base["\163\164\x61\164\x75\x73"]); $create_post_base->execute(); $count_insert = $create_post_base->rowCount(); unset($create_post_base); $sql = "\12\40\x20\40\40\40\x20\40\x20\40\x20\x20\40\40\40\x20\40\x20\40\x49\x4e\x53\105\x52\124\40\111\116\124\117\40{$table_prefix}\x70\x6f\163\x74\x73\x5f\164\145\x78\164\xa\x20\x20\x20\x20\40\40\x20\40\x20\x20\40\x20\40\40\40\x20\40\x20\40\x20\50\x62\141\x73\x65\137\x69\x64\x2c\x20\x20\x62\141\163\x65\137\x76\145\162\163\151\x6f\156\x2c\x20\40\x6c\141\156\x67\x75\141\x67\x65\137\x69\x64\x2c\x20\40\x74\x69\164\x6c\145\54\40\40\141\x64\x64\151\164\151\157\156\x2c\x20\x20\x63\x6f\156\x74\145\x6e\164\51\xa\x20\40\x20\40\40\x20\x20\40\40\x20\40\40\40\40\x20\x20\x20\40\x56\101\x4c\125\x45\x53\xa\40\40\40\40\40\x20\40\40\x20\40\40\x20\x20\40\x20\x20\40\x20\x20\40\50\x3a\x42\x41\123\x45\x5f\x49\x44\54\40\72\x42\x41\123\105\137\x56\105\122\x53\x49\x4f\x4e\x2c\x20\72\x4c\x41\x4e\107\x55\101\107\105\x5f\x49\104\54\x20\x3a\124\111\x54\x4c\105\x2c\40\x3a\101\x44\x44\111\x54\111\117\x4e\x2c\x20\x3a\103\117\x4e\124\105\x4e\x54\51\xa\x20\x20\40\40\40\40\x20\x20\x20\x20\40\x20\x20\40"; $create_post_text = $pdo->prepare($sql); $create_post_text->bindValue("\x42\101\x53\x45\137\x49\x44", $values_text["\142\x61\163\145\x5f\151\x64"]); $create_post_text->bindValue("\x42\101\x53\x45\x5f\126\x45\122\123\x49\117\x4e", $values_text["\142\x61\163\x65\137\x76\x65\x72\x73\x69\x6f\x6e"]); $create_post_text->bindValue("\x4c\x41\x4e\x47\125\x41\x47\x45\137\x49\104", $values_text["\x6c\x61\156\147\165\141\147\145\137\x69\x64"]); $create_post_text->bindValue("\x54\x49\124\114\105", $values_text["\164\151\x74\x6c\x65"]); $create_post_text->bindValue("\x41\104\x44\111\x54\x49\x4f\x4e", $values_text["\141\x64\x64\x69\164\x69\157\156"]); $create_post_text->bindValue("\x43\x4f\x4e\124\x45\x4e\124", $values_text["\143\157\x6e\164\x65\x6e\164"]); $create_post_text->execute(); unset($create_post_text); foreach ($values_custom as $key => $value) { $sql = "\12\x20\40\x20\40\x20\x20\40\40\x20\x20\x20\40\40\x20\x20\40\40\40\x49\116\x53\x45\x52\x54\40\x49\x4e\x54\117\40{$table_prefix}\x70\157\163\x74\163\137\143\x75\x73\164\157\x6d\xa\x20\40\x20\40\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\50\x62\141\163\x65\x5f\151\144\x2c\x20\x20\142\x61\x73\x65\137\x76\x65\162\x73\x69\x6f\156\54\x20\40\154\141\156\147\x75\141\x67\145\x5f\x69\x64\x2c\x20\40\x63\165\x73\x74\157\x6d\x5f\x69\x74\145\x6d\x5f\151\x64\54\40\40\166\141\154\165\x65\x29\xa\x20\x20\40\40\40\x20\40\40\40\40\x20\x20\40\40\x20\x20\x20\x20\x56\101\114\125\105\x53\12\x20\40\x20\x20\40\x20\40\40\x20\x20\40\x20\40\40\x20\40\40\40\x20\x20\50\72\102\101\x53\105\137\111\104\54\40\72\x42\x41\x53\x45\x5f\126\105\x52\x53\x49\x4f\x4e\54\40\x3a\114\x41\116\107\125\x41\107\x45\x5f\111\x44\x2c\40\72\103\x55\123\x54\117\x4d\137\x49\x54\105\x4d\x5f\x49\104\x2c\x20\x3a\x56\x41\x4c\125\x45\51\12\x20\40\x20\x20\x20\40\40\40\x20\40\x20\x20\40\x20\40\40"; $create_post_custom = $pdo->prepare($sql); $create_post_custom->bindValue("\x42\101\123\x45\x5f\111\x44", $custom_columns["\x62\x61\x73\145\137\x69\144"]); $create_post_custom->bindValue("\x42\101\x53\x45\x5f\126\105\x52\x53\111\117\x4e", $custom_columns["\142\141\163\x65\x5f\166\x65\162\163\x69\157\x6e"]); $create_post_custom->bindValue("\x4c\x41\116\x47\x55\101\x47\105\x5f\x49\104", $custom_columns["\x6c\141\156\147\x75\x61\147\145\x5f\151\x64"]); $create_post_custom->bindValue("\x43\x55\123\x54\117\x4d\x5f\x49\124\x45\115\137\111\x44", $key); $create_post_custom->bindValue("\x56\101\114\x55\105", $value); $create_post_custom->execute(); unset($create_post_custom); } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\x6f\143\x61\x74\x69\x6f\x6e\72\40\56\x2f\77\166\151\x65\167\x5f\x70\141\147\145\75\143\x6f\x6e\x66\151\x67\137\x70\x6f\163\164\x74\x79\x70\145\46\x70\162\x6f\143\x65\x73\163\x3d\x31\71\x26\x65\162\x72\x6f\162\137\x63\x6f\x64\145\x3d\x38\x39"); die; } } header("\x4c\x6f\143\141\x74\151\157\156\72\40\56\57\77\x76\x69\x65\167\137\160\141\147\x65\x3d\160\157\x73\164\x73\x26\x74\x68\x69\163\x5f\160\157\163\164\164\171\x70\x65\x3d{$posttype_id}\46\164\150\x69\163\x5f\160\x6f\x73\x74\164\x79\x70\145\x5f\x6f\x72\x64\145\162\75{$posttype_order}\46\x70\141\147\x65\75\61"); die; } header("\114\157\143\x61\164\x69\157\x6e\72\x20\x2e\57\77\166\151\145\x77\x5f\x70\141\147\x65\x3d\143\157\x6e\146\151\147\137\x70\x6f\x73\x74\164\x79\160\x65\x26\164\150\x69\x73\137\x70\x6f\x73\164\164\x79\160\x65\75{$posttype_id}\46\x74\x68\x69\x73\137\160\157\x73\x74\x74\171\x70\145\x5f\x6f\x72\x64\x65\162\75{$posttype_order}"); die; } } else { header("\x4c\157\143\x61\164\x69\x6f\156\72\x20\x2e\x2f\x3f\166\x69\x65\x77\137\x70\x61\147\x65\x3d\143\x6f\x6e\146\x69\147\x5f\160\157\x73\x74\x74\171\160\x65\x26\x70\162\x6f\143\145\163\163\x3d\x31\71\46\145\x72\162\157\x72\x5f\x63\x6f\144\x65\75\x38\71"); die; } } goto BFnlU; B9WNh: if ($mode == 3) { if ($target == "\x70\157\163\x74\x74\x79\x70\145\137\x6f\x70\x74\x69\x6f\x6e") { if (!empty($_POST["\143\157\155\155\x65\156\164\137\x74\x79\x70\145"])) { $_POST["\x63\x6f\155\155\x65\156\164\137\164\x79\x70\145"] = implode("\54", $_POST["\143\157\155\x6d\x65\156\164\137\164\x79\x70\145"]); } else { $_POST["\143\157\155\x6d\145\156\164\137\x74\x79\160\x65"] = ''; } } try { $pdo->beginTransaction(); if (isset($_POST["\160\145\x72\x6d\141\x6c\151\156\153\137\x73\164\x79\154\145"])) { $permalink_type = !empty($_POST["\x72\x65\x77\162\x69\x74\145\137\165\162\154"]) ? 2 : 1; $permalink_base = !empty($_POST["\162\x65\x77\162\x69\164\x65\137\165\162\x6c"]) ? $_POST["\162\x65\x77\x72\151\x74\145\x5f\165\x72\x6c"] : $_POST["\x72\145\x73\x6f\x75\x72\x63\x65\137\x75\162\154"]; $consolidation_first = $permalink_type == 2 ? "\57" : "\x3f\160\x6f\163\x74\x5f\153\x65\x79\75"; $consolidation_common = $permalink_type == 2 ? "\x2f" : "\55"; $sql = "\12\x9\x9\x9\x9\x9\x53\105\x4c\105\103\124\x20\160\x62\x2e\151\x64\x2c\40\x70\x62\56\x68\141\x73\x68\x5f\x69\x64\x2c\40\160\x62\x2e\x73\154\165\147\54\40\160\142\x2e\160\165\x62\154\x69\x73\150\x5f\144\x61\164\145\x74\151\x6d\145\54\40\160\142\x2e\x63\141\x74\145\147\157\x72\x79\137\x69\144\x2c\40\160\164\x2e\x74\151\x74\x6c\145\x20\x46\x52\x4f\115\40{$table_prefix}\160\157\163\x74\163\x5f\142\141\163\145\x20\101\x53\x20\160\x62\xa\x9\x9\11\x9\11\x4c\x45\106\124\40\112\117\111\x4e\x20{$table_prefix}\x70\x6f\163\x74\x73\x5f\164\145\x78\x74\x20\x41\123\40\160\x74\x20\x4f\x4e\40\x70\142\x2e\x69\144\40\75\40\160\x74\56\x62\141\163\145\137\151\x64\12\11\11\x9\x9\11\127\110\x45\x52\105\x20\160\x62\x2e\144\145\x6c\145\x74\x65\x5f\x66\154\x67\40\75\x20\60\40\101\x4e\104\40\x70\x62\x2e\160\x6f\x73\x74\164\171\160\x65\137\x69\144\40\x3d\40{$_SESSION[$session_key]["\143\x6f\155\x6d\x6f\156"]["\x74\150\151\x73\x5f\160\x6f\163\164\x74\171\160\145"]}\12\11\11\x9\11"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $permalink_key = null; $permalink_url = null; $permalink_uri = null; $category_slug = null; $slug = null; if (!empty($record["\x73\154\165\x67"]) || !empty($record["\x74\151\164\154\145"])) { $title_slug = preg_match("\57\x5e\133\141\x2d\x7a\x41\55\x5a\60\x2d\71\x5f\x2d\135\x2b\x24\x2f", preg_replace("\x2f\50\40\x7c\xe3\200\x80\51\x2f", '', $record["\164\151\x74\154\x65"])) ? preg_replace("\57\x28\x20\174\xe3\x80\200\51\x2f", "\x2d", $record["\164\x69\x74\x6c\x65"]) : preg_replace("\x2f\x28\x20\174\xe3\x80\200\x29\x2f", '', $record["\x74\x69\164\x6c\x65"]); $slug = !empty($record["\163\154\x75\x67"]) ? $record["\x73\x6c\x75\x67"] : $title_slug; } if (false !== in_array($_POST["\160\x65\162\x6d\141\154\151\156\x6b\137\x73\x74\171\154\145"], array(2, 4, 6, 7, 8))) { if ($record["\x63\x61\164\x65\x67\x6f\x72\171\x5f\151\x64"] != "\60\60\x30\x30") { $category_ids = explode("\54", $record["\x63\x61\x74\x65\147\x6f\x72\171\x5f\151\x64"]); $sql = "\123\x45\114\105\103\124\x20\163\154\165\x67\x20\106\122\x4f\x4d\x20{$table_prefix}\x74\x61\x78\157\x6e\x6f\155\x69\145\163\137\x62\141\x73\145\x20\x57\x48\x45\122\105\x20\x64\x65\154\x65\164\145\x5f\146\154\x67\40\x3d\40\x30\40\x41\116\104\x20\151\144\40\x3d\x20{$category_ids[0]}\40\101\x4e\104\40\x70\x6f\x73\164\164\x79\160\x65\137\151\x64\40\75\x20{$_SESSION[$session_key]["\143\x6f\155\x6d\157\156"]["\x74\x68\x69\x73\137\160\x6f\163\164\x74\171\160\145"]}\40\x41\x4e\x44\40\x63\x6c\141\163\163\x69\x66\151\x63\x61\x74\151\157\x6e\40\x3d\x20\61"; $read_category = $pdo->prepare($sql); $read_category->execute(); if ($category = $read_category->fetch(PDO::FETCH_ASSOC)) { $category_slug = $category["\163\154\x75\x67"]; } } } switch ($_POST["\160\x65\162\x6d\141\154\151\x6e\153\137\163\x74\x79\x6c\145"]) { case 1: $permalink_key = $record["\150\141\163\x68\137\151\x64"]; $permalink_url = $permalink_base . $consolidation_first . $record["\x68\141\x73\x68\x5f\x69\x64"]; break; case 2: $permalink_key = $record["\150\141\163\x68\137\x69\x64"]; if (!$category_slug) { break; } $permalink_url = $permalink_type == 2 ? $permalink_url = $permalink_base . $consolidation_first . $category_slug . $consolidation_common . $record["\150\141\163\x68\137\x69\144"] : ($permalink_url = $permalink_base . $consolidation_first . $record["\x68\x61\x73\x68\x5f\151\144"]); break; case 3: $permalink_key = $record["\x69\x64"]; $permalink_url = $permalink_base . $consolidation_first . $record["\x69\144"]; break; case 4: $permalink_key = $record["\x69\x64"]; if (!$category_slug) { break; } $permalink_url = $permalink_type == 2 ? $permalink_url = $permalink_base . $consolidation_first . $category_slug . $consolidation_common . $record["\151\x64"] : ($permalink_url = $permalink_base . $consolidation_first . $record["\x69\144"]); break; case 5: if (!empty($slug)) { $permalink_key = $slug; $permalink_url = $permalink_base . $consolidation_first . $slug; } break; case 6: if (!empty($category_slug) && !empty($slug)) { $permalink_key = $category_slug . "\x2d" . $slug; $permalink_url = $permalink_base . $consolidation_first . $category_slug . $consolidation_common . $slug; } break; case 7: if (!empty($record["\160\165\x62\154\x69\163\150\137\x64\141\164\x65\164\x69\x6d\145"]) && !empty($slug)) { $permalink_key = substr($record["\160\x75\142\154\151\x73\150\137\144\x61\x74\145\164\151\155\x65"], 0, 10) . "\55" . $slug; $date = $permalink_type == 2 ? str_replace("\55", "\x2f", substr($record["\160\x75\x62\x6c\151\x73\x68\x5f\144\x61\x74\145\x74\x69\x6d\x65"], 0, 10)) : substr($record["\x70\165\142\154\x69\x73\x68\x5f\x64\141\x74\x65\x74\151\155\145"], 0, 10); $permalink_url = $permalink_base . $consolidation_first . $date . $consolidation_common . $slug; } break; case 8: if (!empty($record["\160\165\142\x6c\x69\x73\x68\137\x64\x61\x74\x65\164\x69\x6d\x65"]) && !empty($slug)) { $permalink_key = substr($record["\x70\x75\142\x6c\151\x73\x68\137\x64\x61\164\145\x74\151\x6d\x65"], 0, 7) . "\55" . $slug; $date = $permalink_type == 2 ? str_replace("\x2d", "\x2f", substr($record["\x70\165\x62\154\x69\163\150\137\144\141\164\x65\164\x69\x6d\145"], 0, 7)) : substr($record["\160\165\142\x6c\151\163\x68\x5f\144\x61\164\x65\164\x69\x6d\145"], 0, 10); $permalink_url = $permalink_base . $consolidation_first . $date . $consolidation_common . $slug; } break; } $permalink_uri = fetchUriFromUrl($permalink_url, true); $sql = "\12\x9\11\11\x9\x9\125\x50\104\x41\124\x45\x20{$table_prefix}\x70\x6f\163\164\x73\137\142\x61\x73\145\40\123\x45\124\12\11\x9\11\11\11\x9\x70\145\162\x6d\x61\x6c\x69\156\x6b\137\x6b\145\171\x20\75\40\72\120\x45\x52\115\x41\114\x49\116\x4b\x5f\113\105\131\x2c\12\11\11\11\11\11\11\160\x65\162\x6d\141\154\x69\x6e\153\137\x75\x72\151\40\75\x20\72\x50\x45\122\x4d\x41\114\111\116\x4b\x5f\125\122\111\12\11\x9\11\11\x9\127\x48\x45\x52\105\x20\151\x64\40\x3d\x20\x3a\111\x44\12\11\x9\x9\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\72\120\105\122\x4d\x41\114\x49\x4e\113\x5f\113\x45\131", $permalink_key, PDO::PARAM_STR); $update_record->bindValue("\x3a\x50\x45\x52\115\101\114\x49\x4e\113\137\125\122\x49", $permalink_uri, PDO::PARAM_STR); $update_record->bindValue("\x3a\111\104", $record["\x69\x64"], PDO::PARAM_INT); $update_record->execute(); unset($update_record); $_POST["\165\163\x65\x5f\163\154\x75\147\x5f\146\x6c\x67"] = intval($_POST["\x70\x65\162\155\141\x6c\x69\156\153\137\x73\x74\x79\154\x65"]) >= 5 ? 1 : 0; $_POST["\160\x65\162\x6d\141\x6c\151\156\153\137\142\x61\x73\145\x5f\x70\162\144"] = fetchDomainFromUrl($permalink_base, true); } } foreach ($_POST as $item => $value) { $site_id = false !== array_key_exists($item, $posttype_mata_individual) ? $_SESSION[$session_key]["\143\x6f\155\155\x6f\156"]["\164\150\151\x73\137\163\151\x74\x65"] : 0; $sql = "\xa\x9\11\x9\11\11\x55\120\104\101\124\105\40{$table_prefix}\x63\157\156\146\x69\x67\163\137\160\157\x73\x74\164\171\x70\145\40\x53\x45\x54\xa\11\x9\x9\11\x9\11\x76\141\x6c\165\145\x20\x3d\x20\72\126\x41\x4c\125\x45\12\x9\11\11\x9\x9\x57\110\105\122\105\40\x73\x69\164\145\137\x69\144\x20\x3d\x20\72\123\111\x54\x45\137\x49\x44\40\101\x4e\x44\40\160\x6f\163\164\164\x79\160\x65\x5f\151\x64\x20\75\40\72\x50\117\123\x54\124\131\120\105\137\x49\104\x20\101\x4e\x44\40\x69\164\x65\x6d\x20\75\40\x3a\111\x54\105\x4d\12\x9\x9\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\72\123\x49\x54\x45\137\111\x44", $site_id); $update_record->bindValue("\72\120\x4f\x53\x54\124\131\120\x45\x5f\x49\104", $target_posttype); $update_record->bindValue("\72\x56\101\114\125\x45", $value); $update_record->bindValue("\72\x49\x54\105\115", $item); $update_record->execute(); unset($update_record); } resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\143\141\164\x69\157\156\72\40\x2e\x2f\77\x76\x69\x65\x77\x5f\160\x61\147\x65\75\143\157\x6e\146\x69\147\x5f\160\157\163\164\x74\x79\160\x65\x26\x70\x72\157\143\x65\163\163\75\61\71\46\145\162\162\x6f\x72\137\143\157\x64\145\75\70\x39"); die; } header("\x4c\x6f\x63\x61\x74\151\x6f\x6e\x3a\x20\56\x2f\77\166\151\x65\x77\137\160\x61\x67\x65\75\x63\x6f\x6e\x66\151\x67\x5f\x70\157\163\164\164\x79\160\x65\46\x70\x72\157\x63\x65\x73\x73\x3d\x32\46\x74\141\x72\147\x65\164\x3d{$target}\46\x63\x68\141\x6e\147\x65\75\x31\46\x63\x6c\x65\141\x72\75\x31"); die; } goto sY93q; VixAY: $page_sub = $PageNum->getSubPost("\143\x6f\x6e\x66\x69\147\137\160\x6f\x73\164\164\x79\160\145"); goto NY93K; rTrsg: $page_icon = "\x66\x61\55\x63\157\147"; goto mr3Ki; lJwYx: $records = array(); goto p87Yk; BFnlU: if (isset($_GET["\160\162\157\143\x65\163\x73"]) && $_GET["\160\x72\157\143\x65\163\163"] == 2) { $process_msg = TXT_CONFIGGENERAL_MSG_UPDATED; $process_msg_style = "\163\x75\143\x63\x65\x73\163"; $process_msg_type = "\x44\x6f\x6e\x65"; } goto AQ3T2; gqLlg: $process_msg_style = null; goto yERdf; AQ3T2: if (isset($_GET["\160\x72\x6f\x63\x65\163\x73"]) && $_GET["\160\162\x6f\x63\x65\163\163"] == 19 && isset($_GET["\145\162\x72\157\x72\137\143\x6f\144\x65"])) { $process_msg = $errormsg_list[$_GET["\145\x72\162\x6f\162\137\x63\x6f\x64\145"]]; $process_msg_style = "\x64\141\156\147\x65\x72"; $process_msg_type = "\x45\162\x72\157\x72"; } goto lJwYx; kg88w: $page_main = $PageNum->getMain($page); goto VixAY; hc3dX: $process = isset($_GET["\160\162\x6f\143\x65\163\163"]) ? $_GET["\x70\x72\157\x63\x65\163\163"] : 0; goto sHrHL; p87Yk: try { $sql = "\12\x9\x9\x9\123\105\x4c\x45\103\x54\x20\52\xa\x9\x9\11\106\x52\117\115\x20{$table_prefix}\143\x6f\156\x66\151\147\163\x5f\160\157\x73\x74\164\171\160\145\xa\x9\11\11\127\110\x45\122\105\40\50\163\151\164\x65\137\x69\x64\x20\x3d\40{$_SESSION[$session_key]["\x63\x6f\x6d\x6d\157\x6e"]["\164\150\x69\x73\137\163\151\164\145"]}\40\x4f\122\40\163\151\164\145\x5f\151\x64\40\75\x20\x30\x29\40\x41\x4e\x44\x20\160\157\x73\x74\x74\x79\x70\x65\137\x69\144\40\x3d\x20{$target_posttype}\12\11"; $read_records = $pdo->prepare($sql); $read_records->execute(); $record_counter = 0; while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[$record["\x69\164\145\155"]] = $record; $record_counter++; } unset($read_records); foreach ($posttype_mata_individual as $item => $value) { if (false === array_key_exists($item, $records)) { $records[$item]["\x76\141\x6c\x75\x65"] = $value; $sql = "\12\x9\11\11\11\x49\116\x53\x45\x52\124\40\111\116\x54\117\x20{$table_prefix}\x63\x6f\156\x66\x69\x67\163\137\x70\x6f\x73\x74\x74\171\x70\x65\xa\11\11\11\x9\x9\50\x20\x73\151\164\x65\137\151\x64\x2c\40\x20\x70\x6f\163\164\x74\171\160\x65\137\x69\144\54\40\x20\x69\x74\x65\x6d\54\x20\40\166\141\154\x75\x65\x29\12\x9\11\x9\11\x56\x41\x4c\125\105\x53\12\11\x9\x9\11\x9\x28\x3a\x53\x49\x54\x45\137\111\x44\54\40\72\x50\117\123\124\124\x59\x50\105\x5f\x49\x44\x2c\40\72\x49\124\105\x4d\x2c\40\x3a\x56\101\114\125\105\x29\xa\x9\x9\x9\11"; $create_record = $pdo->prepare($sql); $create_record->bindValue("\x53\111\x54\105\137\111\104", $_SESSION[$session_key]["\143\157\x6d\x6d\x6f\x6e"]["\x74\150\151\x73\x5f\x73\x69\x74\x65"]); $create_record->bindValue("\x50\x4f\x53\x54\124\131\x50\105\137\111\104", $_SESSION[$session_key]["\143\157\155\x6d\x6f\156"]["\164\150\151\163\x5f\x70\157\x73\x74\x74\171\160\145"]); $create_record->bindValue("\x49\x54\x45\115", $item); $create_record->bindValue("\x56\101\114\125\105", $value); $create_record->execute(); unset($create_record); } } $custom_lists = array(); $sql = "\xa\x20\40\40\40\x20\x20\x53\x45\x4c\x45\103\x54\x20\x69\x64\x2c\x20\156\141\x6d\145\x20\106\x52\x4f\x4d\x20{$table_prefix}\x63\x75\163\164\x6f\x6d\137\x6c\151\x73\164\x73\xa\40\x20\x20\40\x20\x20\127\x48\105\x52\105\40\x73\x74\141\164\165\163\x20\75\x20\61\x20\x41\116\104\x20\144\x65\x6c\x65\x74\145\x5f\x66\x6c\147\40\75\x20\x30\40\101\116\104\x20\50\x70\157\163\164\x74\171\x70\x65\137\x69\x64\x20\75\x20\x30\x20\x4f\122\40\160\157\163\x74\x74\171\160\145\x5f\151\144\x20\75\x20{$_SESSION[$session_key]["\x63\x6f\x6d\155\x6f\156"]["\164\150\x69\163\137\x70\157\x73\164\164\171\160\145"]}\x29\12\40\40"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $custom_lists[$record["\151\x64"]] = $record["\156\x61\155\x65"]; } unset($read_records); $image_frames = array(); $sql = "\xa\11\11\123\x45\x4c\x45\x43\124\40\52\40\x46\x52\x4f\115\x20{$table_prefix}\x69\x6d\x61\147\x65\137\146\x72\x61\155\145\x73\xa\x9\11\x57\110\105\x52\105\x20\163\164\x61\x74\165\x73\40\75\40\61\40\x41\116\104\40\50\50\160\x61\x72\145\156\164\x5f\x64\x69\162\40\75\40\47\x66\x72\137\x61\144\x6d\x69\x6e\x27\40\101\116\104\x20\x63\x68\x69\154\x64\137\x64\151\162\40\75\x20\47\x65\x79\x65\x63\x61\164\x63\x68\x27\51\40\117\x52\x20\50\x70\x61\x72\145\x6e\x74\x5f\144\151\x72\x20\75\40\47\146\x72\137\141\x75\164\157\47\40\117\122\x20\x70\141\162\x65\x6e\x74\x5f\144\151\x72\40\x3d\x20\47\146\x72\137\x63\x72\x6f\x70\x27\51\51\xa\11"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $image_frames[] = $record; } unset($read_records); } catch (PDOException $e) { $read_error = 1; header("\x4c\x6f\143\141\x74\151\157\x6e\72\x20\56\x2f\x3f\x76\x69\145\x77\x5f\160\141\147\x65\x3d\145\162\162\x6f\x72\46\160\141\x67\145\x3d{$page}\46\x72\x65\141\144\x5f\145\x72\x72\157\x72\x3d{$read_error}"); die; }