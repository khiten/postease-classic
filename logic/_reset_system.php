<?php
 goto wSCsA; LlS2V: $client_domain = !empty($_SERVER["\110\124\x54\x50\137\x48\117\123\124"]) ? $_SERVER["\x48\124\124\x50\137\110\117\123\x54"] : null; goto rLOjd; WxrZT: $established_prefix = defined("\x54\x41\102\114\105\137\x50\x52\105\106\111\x58") && TABLE_PREFIX ? TABLE_PREFIX : null; goto x6oX6; xyifC: if (intval($mode) === 2) { if (empty($_SERVER["\x48\124\124\x50\x5f\122\105\x46\105\122\105\x52"]) || isset($_SERVER["\x48\124\124\120\137\122\105\x46\105\x52\x45\122"]) && !strstr($_SERVER["\110\x54\124\x50\137\122\x45\x46\x45\122\105\x52"], $_SERVER["\110\124\124\x50\137\x48\117\123\x54"]) && !strstrArray($_SERVER["\x48\x54\x54\120\137\122\105\x46\105\x52\105\x52"], array($_SERVER["\110\124\x54\120\x5f\110\117\x53\x54"], "\143\157\x6e\146\x69\147\137\143\157\162\x65", "\162\x65\163\x65\164\137\x73\171\163\164\145\155"))) { header("\x4c\157\143\x61\164\x69\x6f\156\x3a\40\x2e\57\x5f\154\157\147\x6f\165\x74\56\x70\x68\160"); die; } } goto i0xfv; LLwLK: require_once dirname(__FILE__) . "\57\x2e\56\x2f\154\x61\x6e\x67\x2f\x70\x6f\x70\x6f\x76\145\x72\x5f{$lang}\56\x70\x68\x70"; goto HjIWY; MCZ37: $db_pass = $_SESSION["\x70\x6f\x73\x74\145\x61\x73\x65"]["\144\x62\137\160\141\163\x73"] = !isset($_POST["\144\x62\137\160\141\163\163"]) ? !isset($_SESSION["\160\157\x73\164\x65\x61\163\x65"]["\144\142\137\x70\x61\163\163"]) ? null : $_SESSION["\160\x6f\x73\x74\145\x61\163\x65"]["\144\142\x5f\160\141\163\163"] : $_POST["\x64\x62\137\x70\141\x73\163"]; goto LlS2V; NhWMM: $host_update = $_SESSION["\160\x6f\163\164\145\x61\163\145"]["\150\x6f\163\164\x5f\165\160\144\x61\164\x65"] = file_exists(dirname(__FILE__) . "\x2f\56\x2e\57\x63\157\x72\x65\57\150\x6f\x73\x74\137\x75\x70\144\x61\x74\x65\x2e\x74\170\164") && ($get_host_update = file_get_contents(dirname(__FILE__) . "\57\x2e\x2e\57\143\157\162\x65\57\x68\157\x73\164\x5f\x75\160\144\141\x74\145\x2e\164\170\164")) ? $get_host_update : null; goto gLfw1; yBsTR: $mode = $_SESSION["\160\x6f\163\164\x65\x61\163\x65"]["\155\x6f\x64\x65"] = !isset($_GET["\x6d\x6f\x64\145"]) ? empty($_SESSION["\160\x6f\163\164\145\141\x73\x65"]["\155\157\144\145"]) ? 0 : $_SESSION["\160\157\163\164\x65\141\x73\x65"]["\x6d\x6f\144\145"] : $_GET["\x6d\157\144\145"]; goto s2Pqc; hgb_A: $lang = $_SESSION["\160\157\163\x74\x65\141\163\x65"]["\x6c\141\x6e\x67"] = !isset($_GET["\x6c\141\156\x67"]) ? empty($_SESSION["\x70\157\x73\164\x65\141\163\x65"]["\x6c\x61\x6e\147"]) ? $default_lang : $_SESSION["\160\157\x73\164\x65\x61\163\x65"]["\154\x61\x6e\147"] : $_GET["\154\x61\x6e\x67"]; goto fr6Vc; gLfw1: $activation_key = $_SESSION["\x70\x6f\x73\x74\x65\141\163\145"]["\x61\143\x74\x69\166\141\164\x69\157\156\x5f\x6b\x65\x79"] = !isset($_POST["\141\x63\164\151\x76\141\164\x69\x6f\x6e\137\x6b\x65\171"]) ? !isset($_SESSION["\x70\x6f\163\164\x65\x61\x73\145"]["\x61\x63\x74\x69\x76\x61\x74\151\x6f\156\x5f\x6b\145\x79"]) ? null : trim($_SESSION["\160\x6f\x73\164\x65\x61\x73\145"]["\141\143\x74\x69\166\x61\164\x69\x6f\x6e\137\x6b\x65\171"]) : trim($_POST["\x61\x63\x74\151\166\x61\x74\151\x6f\x6e\x5f\153\145\x79"]); goto O1lVr; szHFd: error_reporting(E_ALL & ~E_DEPRECATED); goto qCYEM; x6oX6: $title = $reset_system_titles[$mode]; goto fHZNz; ZSZ_p: $host_activation = $_SESSION["\x70\157\x73\x74\x65\x61\x73\x65"]["\x68\157\163\x74\x5f\x61\x63\x74\x69\x76\x61\x74\x69\x6f\x6e"] = file_exists(dirname(__FILE__) . "\57\56\56\x2f\143\157\162\x65\x2f\x68\x6f\x73\x74\x5f\141\x63\x74\x69\166\x61\164\x69\157\x6e\56\164\170\164") && ($get_host_activation = file_get_contents(dirname(__FILE__) . "\x2f\x2e\56\x2f\x63\157\162\x65\57\x68\x6f\x73\x74\137\x61\x63\x74\x69\166\141\164\151\x6f\x6e\x2e\x74\x78\164")) ? $get_host_activation : null; goto NhWMM; Sy1ya: $dir_name = $_SESSION["\x70\157\163\164\x65\x61\163\x65"]["\144\151\162\x5f\x6e\x61\155\145"] = ltrim(rtrim(str_replace(basename($_SERVER["\x50\110\120\137\123\105\x4c\x46"]), '', $_SERVER["\x50\110\120\x5f\123\x45\114\x46"]), "\x2f"), "\x2f"); goto jVdBW; kv7LQ: require_once dirname(__FILE__) . "\57\56\x2e\x2f\x6c\151\x62\x2f\146\x75\156\143\x74\151\157\x6e\x73\56\x70\x68\x70"; goto KR0B3; DYobX: $password = $_SESSION["\160\x6f\163\x74\x65\141\x73\x65"]["\160\x61\163\163\x77\157\x72\144"] = !isset($_POST["\160\141\163\x73\167\157\162\144"]) ? !isset($_SESSION["\160\x6f\163\164\145\x61\x73\x65"]["\x70\141\x73\x73\x77\x6f\162\144"]) ? null : trim($_SESSION["\x70\x6f\x73\x74\x65\x61\x73\x65"]["\x70\141\163\163\x77\x6f\162\x64"]) : trim($_POST["\160\141\x73\163\x77\x6f\x72\144"]); goto xT2yc; OPdFb: $tmp_login = $_SESSION["\x70\x6f\x73\x74\145\141\x73\x65"]["\x74\155\160\137\154\x6f\147\x69\156"] = empty($_COOKIE["\x74\x6d\x70\137\154\x6f\147\x69\156"]) ? empty($_SESSION["\160\x6f\x73\164\x65\x61\163\145"]["\x74\x6d\x70\137\x6c\157\x67\x69\x6e"]) ? 0 : $_SESSION["\160\x6f\163\x74\145\141\x73\145"]["\164\x6d\x70\137\154\157\x67\x69\x6e"] : $_COOKIE["\164\x6d\160\137\154\157\x67\x69\156"]; goto goiuS; eMvAX: $php_version = (double) phpversion(); goto WxrZT; z4QRd: $lbl_database = $mode == 2 ? TXT_RESETSYSTEM_LBL_DATABASE_CHANGEDB : TXT_RESETSYSTEM_LBL_DATABASE_FIRSTSET; goto XRGaB; r3jDl: $db_host = $_SESSION["\160\x6f\x73\164\x65\x61\163\x65"]["\144\142\x5f\150\x6f\x73\x74"] = !isset($_POST["\x64\142\x5f\150\157\163\164"]) ? !isset($_SESSION["\160\157\x73\164\145\141\x73\x65"]["\x64\x62\137\x68\x6f\x73\164"]) ? null : $_SESSION["\x70\157\163\164\x65\141\163\x65"]["\144\142\137\x68\x6f\163\x74"] : $_POST["\x64\x62\x5f\150\157\163\x74"]; goto hxrLR; i0xfv: if (intval($mode) === 3 || intval($mode) === 4) { if (empty($tmp_login)) { header("\114\x6f\x63\141\164\x69\x6f\x6e\x3a\x20\x2e\57\137\x6c\157\x67\x6f\165\164\x2e\160\x68\160"); die; } else { setcookie("\x74\x6d\160\x5f\154\157\x67\x69\x6e", '', time() - 1); } } goto xLlbM; gYWfU: $nickname = $_SESSION["\160\x6f\x73\164\145\141\x73\x65"]["\x6e\151\143\153\156\x61\x6d\145"] = empty($_POST["\156\151\143\153\x6e\141\155\145"]) ? empty($_SESSION["\x70\x6f\x73\164\x65\x61\x73\x65"]["\156\x69\x63\x6b\156\x61\x6d\x65"]) ? $account : $_SESSION["\160\157\163\164\145\x61\163\145"]["\156\x69\x63\x6b\156\x61\x6d\145"] : $_POST["\x6e\151\143\153\x6e\141\x6d\145"]; goto DYobX; P7WTf: require_once dirname(__FILE__) . "\x2f\x2e\56\57\154\141\156\147\57\x62\157\x64\x79\137{$lang}\56\160\x68\x70"; goto eMvAX; xLlbM: $default_lang = file_exists(dirname(__FILE__) . "\x2f\x2e\x2e\57\143\x6f\162\x65\x2f\x6c\141\x6e\147\x2e\164\170\164") ? file_get_contents(dirname(__FILE__) . "\x2f\x2e\56\x2f\143\x6f\x72\x65\57\x6c\x61\x6e\147\56\164\170\164") : "\x65\x6e"; goto hgb_A; qCYEM: ini_set("\x64\151\x73\x70\154\141\x79\x5f\x65\x72\162\157\x72\x73", 1); goto HCzt4; jVdBW: $postease_version = $_SESSION["\x70\x6f\163\164\145\x61\163\x65"]["\160\x6f\163\x74\145\141\163\x65\x5f\x76\x65\x72\163\151\157\x6e"] = file_exists(dirname(__FILE__) . "\57\x2e\56\x2f\143\x6f\162\145\57\x76\x65\162\x73\151\157\x6e\56\164\170\164") && ($get_version = file_get_contents(dirname(__FILE__) . "\57\56\56\x2f\x63\157\x72\x65\57\x76\145\x72\x73\x69\x6f\x6e\x2e\x74\x78\x74")) ? $get_version : null; goto ZSZ_p; kIh0E: $database = $_SESSION["\x70\157\x73\164\x65\141\163\145"]["\144\x61\x74\141\x62\x61\x73\145"] = !isset($_POST["\x64\141\164\141\x62\x61\x73\145"]) ? !isset($_SESSION["\x70\157\x73\164\145\x61\163\145"]["\144\141\x74\x61\x62\141\163\145"]) ? $default_database : $_SESSION["\x70\157\163\164\145\141\163\145"]["\x64\x61\164\x61\142\141\x73\x65"] : $_POST["\144\x61\164\141\142\141\163\x65"]; goto ahIaN; s2Pqc: if (defined("\103\x55\x52\x52\x45\116\x54\137\x44\x41\x54\x41\x42\x41\123\105") && CURRENT_DATABASE > 0) { $_SESSION["\160\157\x73\164\145\141\163\145"]["\145\x73\x74\x61\x62\154\x69\163\x68\145\144\x5f\x64\x62"] = CURRENT_DATABASE; } else { if (!isset($_SESSION["\x70\x6f\x73\164\x65\x61\163\x65"]["\x65\163\164\141\142\x6c\x69\163\x68\145\144\x5f\x64\x62"])) { $_SESSION["\x70\157\x73\164\x65\141\x73\145"]["\145\x73\164\141\x62\x6c\x69\x73\150\145\x64\137\144\x62"] = 0; } else { $_SESSION["\x70\157\x73\164\145\x61\163\x65"]["\x65\x73\x74\x61\142\x6c\x69\163\x68\x65\x64\x5f\144\142"] = $_SESSION["\160\x6f\x73\164\145\x61\x73\145"]["\x65\x73\164\141\x62\154\x69\x73\x68\145\144\x5f\144\x62"]; } } goto f8x0S; HCzt4: session_start(); goto kv7LQ; HUyk8: require_once dirname(__FILE__) . "\57\x2e\x2e\57\154\151\x62\57\164\151\155\145\x7a\157\156\x65\x2e\x70\x68\x70"; goto LLwLK; fHZNz: $lbl_submit = $reset_system_submit[$mode]; goto z4QRd; fr6Vc: $db_file_name = makeRandomKey(20); goto IePYm; IePYm: $sqlite_path = dirname(__FILE__) . "\x2f\56\x2e\57\x63\157\x72\145\57\144\x62\57" . $db_file_name . "\x2e\144\x62"; goto FhPY1; O1lVr: $email = $_SESSION["\x70\157\163\164\x65\141\163\x65"]["\145\x6d\141\x69\154"] = !isset($_POST["\145\x6d\x61\x69\x6c"]) ? !isset($_SESSION["\160\157\x73\x74\x65\x61\163\x65"]["\x65\x6d\141\x69\x6c"]) ? null : $_SESSION["\x70\x6f\x73\164\145\x61\x73\145"]["\x65\155\x61\x69\154"] : $_POST["\145\155\x61\x69\x6c"]; goto wtaN8; rLOjd: if (($mode == 3 || $mode == 4) && (empty($_GET["\145\162\162\157\162\x6d\163\x67"]) || isset($_GET["\x65\x72\x72\157\162\155\x73\x67"]) && $_GET["\x65\162\162\x6f\162\x6d\x73\147"] != 10)) { $established_db_connetion = 0; $established_activation_key = null; try { if ($established_db == 1) { $pdo = new PDO("\163\x71\154\151\x74\x65\x3a" . $sqlite_path); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $established_db_connetion = 1; } elseif ($established_db == 2) { require_once dirname(__FILE__) . "\x2f\x2e\x2e\x2f\x63\x6f\x72\145\57\144\142\x2f\x70\x64\x6f\137\155\171\163\161\154\x2e\x70\150\160"; if (empty($db_host)) { $db_host = DB_HOST; } if (empty($db_name)) { $db_name = DB_NAME; } if (empty($db_user)) { $db_user = DB_USER; } if (empty($db_pass)) { $db_pass = DB_PASS; } $dsn = $php_version >= 5.3 ? "\155\x79\x73\161\x6c\x3a\x68\157\x73\164\x3d" . $db_host . "\x3b\x64\x62\x6e\x61\155\145\75" . $db_name . "\73\x63\x68\141\162\x73\x65\x74\75\165\x74\x66\x38" : "\155\x79\x73\161\x6c\72\150\157\163\x74\x3d" . $db_host . "\x3b\144\x62\x6e\141\155\x65\x3d" . $db_name; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\123\105\x54\x20\116\x41\115\x45\x53\40\165\x74\146\x38")); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo->setAttribute(PDO::ATTR_TIMEOUT, 300); $established_db_connetion = 1; } } catch (PDOException $e) { header("\x4c\x6f\143\x61\x74\x69\x6f\156\x3a\x20\56\57\162\145\163\x65\164\x5f\163\x79\163\x74\145\155\56\160\x68\x70\x3f\x6d\x6f\144\145\75\x35"); die; } if ($established_db_connetion) { $configs = array(); try { $sql = "\123\x45\114\x45\x43\x54\x20\52\40\x46\x52\x4f\115\x20{$table_prefix}\143\157\156\146\151\x67\163\x20\x57\x48\105\122\105\x20\x69\x74\x65\155\x20\x49\116\50\x27\141\143\164\x69\x76\141\x74\x69\157\x6e\137\153\145\171\47\x2c\40\x27\144\157\x6d\x61\151\x6e\x27\x2c\40\x27\144\x69\x72\137\x6e\141\x6d\x65\47\54\x20\x27\x74\141\142\154\145\x5f\160\x72\x65\146\x69\x78\47\51"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $configs[$record["\151\x74\x65\155"]] = $record["\166\x61\154\165\145"]; } unset($read_records); $sql = "\x53\105\114\x45\x43\x54\40\x61\143\143\157\165\x6e\164\54\x20\x6e\x69\143\153\x6e\141\x6d\145\x20\106\122\x4f\115\40{$table_prefix}\x75\x73\x65\162\x73\x20\x57\110\105\x52\105\40\x72\x6f\x6c\x65\x20\x3d\x20\61"; $read_record = $pdo->prepare($sql); $read_record->execute(); while ($record = $read_record->fetch(PDO::FETCH_ASSOC)) { $configs["\x61\x63\143\157\x75\x6e\x74"] = $record["\x61\x63\x63\x6f\165\x6e\x74"]; $configs["\156\151\x63\153\156\x61\155\x65"] = $record["\x6e\151\x63\x6b\x6e\141\155\x65"]; } unset($read_records); $established_activation_key = !empty($configs["\141\x63\164\151\x76\141\164\x69\157\156\137\153\145\x79"]) ? $configs["\141\143\164\151\166\141\164\x69\157\x6e\137\x6b\x65\x79"] : null; if ($mode == 3 && $established_activation_key) { $activation_key = $established_activation_key; } } catch (PDOException $e) { var_dump($e->getMessage()); } } } goto iJTG6; RKzFj: $table_prefix = $_SESSION["\x70\x6f\x73\x74\x65\141\x73\145"]["\164\141\142\x6c\x65\137\160\162\145\146\x69\x78"] = !isset($_POST["\164\x61\x62\154\145\x5f\x70\x72\x65\146\x69\x78"]) ? !isset($_SESSION["\160\x6f\x73\x74\x65\141\163\x65"]["\x74\x61\142\154\x65\x5f\x70\x72\x65\146\151\x78"]) ? $default_table_prefix : $_SESSION["\160\157\163\164\x65\x61\163\145"]["\164\x61\142\x6c\x65\x5f\160\162\145\146\151\x78"] : $_POST["\164\141\142\154\145\x5f\x70\162\145\x66\x69\x78"]; goto r3jDl; hxrLR: $db_name = $_SESSION["\x70\x6f\163\164\x65\141\x73\x65"]["\144\142\x5f\x6e\x61\x6d\x65"] = !isset($_POST["\144\x62\137\156\x61\x6d\x65"]) ? !isset($_SESSION["\x70\157\163\164\145\141\163\145"]["\x64\x62\137\x6e\x61\x6d\x65"]) ? null : $_SESSION["\x70\x6f\163\x74\145\x61\163\x65"]["\144\142\137\156\141\155\x65"] : $_POST["\144\x62\137\156\x61\155\145"]; goto WEXtN; WtXel: $default_database = $established_db > 0 ? $established_db : 1; goto LZgj5; xT2yc: $timezone = $_SESSION["\x70\x6f\163\x74\x65\x61\163\145"]["\164\151\155\x65\172\157\156\145"] = !isset($_POST["\164\151\x6d\x65\172\x6f\x6e\145"]) ? !isset($_SESSION["\160\x6f\163\x74\x65\x61\163\x65"]["\164\151\x6d\145\x7a\x6f\x6e\x65"]) ? $default_timezone : $_SESSION["\x70\x6f\x73\x74\x65\141\x73\x65"]["\164\x69\x6d\145\172\x6f\156\x65"] : $_POST["\x74\x69\x6d\145\172\x6f\x6e\145"]; goto kIh0E; OSBbs: $default_timezone = $lang == "\152\x61" ? "\101\x73\151\141\x2f\x54\x6f\x6b\171\x6f" : "\105\165\162\157\160\x65\x2f\x4c\x6f\156\144\x6f\156"; goto WtXel; dK9WU: require_once dirname(__FILE__) . "\x2f\56\x2e\x2f\x6c\x61\x6e\x67\x2f\x6c\x69\x73\x74\163\137{$lang}\56\x70\x68\x70"; goto P7WTf; KR0B3: if (file_exists(dirname(__FILE__) . "\57\x2e\x2e\57\143\x6f\162\x65\57\144\x62\x2f\x63\157\x6e\146\151\147\56\x70\x68\x70")) { require_once dirname(__FILE__) . "\57\56\56\x2f\143\x6f\x72\x65\57\144\142\x2f\143\x6f\x6e\146\151\x67\x2e\160\150\x70"; } goto yBsTR; LZgj5: $default_shift_db = 0; goto YzW91; HjIWY: require_once dirname(__FILE__) . "\57\56\x2e\x2f\154\141\x6e\147\x2f\154\x69\163\x74\x73\x2e\160\150\160"; goto dK9WU; f8x0S: $established_db = $_SESSION["\x70\157\163\x74\x65\141\x73\x65"]["\145\x73\164\141\142\154\x69\x73\150\145\x64\137\x64\x62"]; goto OPdFb; FhPY1: if (file_exists(dirname(__FILE__) . "\57\x2e\x2e\x2f\143\x6f\x72\x65\x2f\144\x62\57\160\144\x6f\x5f\x73\161\154\151\x74\145\x2e\x70\x68\x70")) { require_once dirname(__FILE__) . "\x2f\56\x2e\x2f\143\157\x72\x65\57\144\x62\57\x70\144\x6f\x5f\163\161\154\x69\164\x65\56\160\x68\x70"; $sqlite_path = SQLITE_PATH; if ($mode == 3 || $mode == 4) { $sqlite_path_arr = explode("\57", $sqlite_path); $established_sqlite_name = end($sqlite_path_arr); $sqlite_path = dirname(__FILE__) . "\x2f\x2e\x2e\x2f\143\x6f\x72\145\57\144\142\x2f" . $established_sqlite_name; } } goto HUyk8; wtaN8: $site_name = $_SESSION["\160\157\x73\164\145\x61\163\x65"]["\163\151\164\145\x5f\x6e\x61\155\145"] = !isset($_POST["\x73\151\x74\145\137\156\141\155\x65"]) ? !isset($_SESSION["\160\157\x73\x74\x65\141\x73\145"]["\x73\x69\164\x65\x5f\x6e\141\x6d\145"]) ? null : $_SESSION["\x70\157\163\x74\x65\141\x73\145"]["\x73\151\x74\145\137\x6e\141\155\x65"] : $_POST["\163\x69\x74\145\x5f\x6e\141\x6d\x65"]; goto RB4OS; XRGaB: $default_table_prefix = $established_prefix; goto OSBbs; iJTG6: if ($mode == 6 && empty($_POST)) { require_once dirname(__FILE__) . "\57\x2e\x2e\57\x63\157\x72\145\x2f\x64\x62\57\x70\x64\x6f\137\155\x79\163\161\x6c\x2e\160\150\x70"; if (empty($db_host)) { $db_host = defined("\104\102\137\x48\x4f\123\x54") ? DB_HOST : null; } if (empty($db_name)) { $db_name = defined("\104\x42\x5f\116\101\115\105") ? DB_NAME : null; } if (empty($db_user)) { $db_user = defined("\x44\x42\137\x55\x53\x45\122") ? DB_USER : null; } if (empty($db_pass)) { $db_pass = defined("\104\102\137\x50\x41\x53\x53") ? DB_PASS : null; } } goto O9JcJ; goiuS: if (empty($mode) || !empty($mode) && intval($mode) < 1 && intval($mode) > 6 || $mode == 1 && $established_db > 0) { header("\x4c\x6f\143\x61\164\151\x6f\x6e\x3a\40\56\x2f\x3f\166\x69\145\167\x5f\160\x61\x67\145\75\x65\x72\x72\157\x72"); die; } goto xyifC; ahIaN: $shift_db = $_SESSION["\x70\x6f\x73\164\x65\x61\163\x65"]["\x73\150\x69\x66\164\x5f\x64\x62"] = !isset($_POST["\163\150\151\146\x74\x5f\144\x62"]) ? !isset($_SESSION["\x70\x6f\163\x74\145\x61\x73\x65"]["\x73\x68\x69\x66\x74\137\x64\x62"]) ? $default_shift_db : $_SESSION["\160\x6f\x73\164\x65\141\x73\145"]["\x73\x68\x69\x66\x74\137\x64\142"] : $_POST["\163\x68\151\x66\164\137\x64\x62"]; goto RKzFj; WEXtN: $db_user = $_SESSION["\160\157\163\164\x65\141\163\x65"]["\144\142\137\165\x73\x65\162"] = !isset($_POST["\x64\142\137\165\163\145\x72"]) ? !isset($_SESSION["\160\157\163\x74\x65\x61\x73\145"]["\144\142\x5f\165\163\x65\162"]) ? null : $_SESSION["\x70\157\x73\164\145\141\163\145"]["\x64\142\137\165\163\x65\x72"] : $_POST["\144\x62\137\x75\x73\x65\162"]; goto MCZ37; wSCsA: header("\x43\157\x6e\164\x65\156\164\x2d\164\171\x70\145\72\40\164\145\170\164\57\150\x74\x6d\154\x3b\40\x63\x68\x61\x72\x73\145\164\75\x75\164\146\55\x38"); goto szHFd; RB4OS: $account = $_SESSION["\160\x6f\x73\164\145\141\x73\145"]["\141\143\143\157\165\x6e\x74"] = !isset($_POST["\x61\x63\143\x6f\165\x6e\x74"]) ? !isset($_SESSION["\160\157\x73\164\145\x61\x73\x65"]["\x61\143\x63\x6f\165\x6e\x74"]) ? null : trim($_SESSION["\x70\157\x73\x74\x65\x61\x73\x65"]["\x61\143\143\x6f\x75\x6e\x74"]) : trim($_POST["\141\x63\143\x6f\x75\156\164"]); goto gYWfU; YzW91: $protocol = isset($_SERVER["\110\x54\124\120\123"]) && (!in_array(strtolower($_SERVER["\x48\x54\x54\120\x53"]), array("\x6f\146\146", "\x6e\157")) || $_SERVER["\123\105\x52\x56\x45\122\137\x50\117\x52\x54"]) == 443 ? "\x68\x74\164\x70\163" : "\x68\164\164\x70"; goto Y3tKN; Y3tKN: $domain = $_SESSION["\160\x6f\x73\x74\x65\x61\x73\x65"]["\144\x6f\x6d\x61\151\156"] = $protocol . "\72\x2f\57" . $_SERVER["\x48\124\124\x50\137\x48\x4f\x53\x54"]; goto Sy1ya; O9JcJ: if (!empty($_POST)) { if (empty($_GET)) { if ($mode == 1 || ($mode == 3 || $mode == 4) && empty($configs)) { if (!empty($domain) && !empty($activation_key) && !empty($account) && !empty($password) && !empty($timezone) && !empty($database) && !empty($table_prefix) && $established_db == 0) { if ($postease_version && $host_activation) { require_once dirname(__FILE__) . "\x2f\x2e\x2e\57\143\154\x61\163\x73\57\x70\x68\x70\x72\x70\143\57\160\x68\160\x72\160\x63\x5f\x63\x6c\151\x65\156\164\56\x70\x68\x70"; $client = new PHPRPC_Client(); $client->useService($host_activation . "\57\x69\x6e\x63\57\x67\x65\164\x5f\x6c\x69\x63\145\156\x73\x65\x2e\160\150\160"); if (!empty($email)) { $check_activation_key = $client->reuseActivationKey($activation_key, $email); } else { $check_activation_key = $client->checkActivationKey($activation_key); } } if ($check_activation_key == 1) { if ($database == 1 || $database == 2) { if ($database == 2) { if (!empty($db_host) && !empty($db_name) && !empty($db_user) && !empty($db_pass)) { $dsn = $php_version >= 5.3 ? "\155\171\x73\161\154\x3a\150\157\163\164\75" . $db_host . "\73\x64\x62\156\x61\155\x65\75" . $db_name . "\x3b\x63\x68\x61\162\x73\x65\164\x3d\x75\164\146\70" : "\x6d\x79\163\x71\154\x3a\x68\157\163\x74\75" . $db_host . "\x3b\x64\142\x6e\141\x6d\145\75" . $db_name; try { $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\123\x45\x54\x20\x4e\x41\x4d\x45\x53\x20\165\164\146\x38")); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo = null; } catch (PDOException $e) { header("\x4c\157\143\141\x74\151\157\x6e\x3a\40\x2e\x2f\162\145\163\145\x74\137\x73\171\163\164\145\x6d\56\160\x68\160\77\x65\x72\x72\157\162\x6d\x73\147\x3d\62\x33"); die; } $pdo_mysql_content = "\74\x3f\160\x68\160\12\12\x64\x65\x66\x69\x6e\x65\x28\x27\x44\x42\x5f\110\x4f\x53\x54\x27\x2c\40\x27{$db_host}\x27\x29\73\12\x64\x65\x66\x69\x6e\x65\50\x27\x44\102\137\116\x41\115\x45\x27\54\x20\47{$db_name}\x27\51\x3b\xa\x64\x65\146\151\156\145\50\47\x44\x42\x5f\125\x53\105\x52\x27\x2c\x20\x27{$db_user}\x27\x29\x3b\xa\x64\145\146\151\156\145\50\x27\x44\102\137\x50\101\123\x53\47\54\40\x27{$db_pass}\x27\x29\x3b\xa"; $file = dirname(__FILE__) . "\x2f\x2e\56\57\x63\x6f\162\x65\57\144\x62\x2f\160\144\157\x5f\155\171\163\161\x6c\56\x70\150\160"; if (!file_put_contents($file, $pdo_mysql_content, LOCK_EX)) { header("\x4c\x6f\x63\x61\x74\151\x6f\156\x3a\x20\56\x2f\162\145\x73\145\164\x5f\x73\x79\163\164\145\155\x2e\160\150\x70\x3f\145\162\162\x6f\162\x6d\x73\147\75\x30\x32"); die; } require_once dirname(__FILE__) . "\x2f\x2e\56\57\143\x6f\x72\145\x2f\x64\142\x2f\x70\144\157\137\155\x79\x73\161\154\56\160\x68\160"; try { $dsn = $php_version >= 5.3 ? "\155\171\x73\x71\x6c\x3a\x68\157\163\164\75" . DB_HOST . "\x3b\144\x62\156\x61\x6d\145\75" . DB_NAME . "\73\x63\150\141\162\x73\145\164\x3d\x75\164\146\x38" : "\155\171\x73\x71\x6c\72\150\157\x73\164\x3d" . DB_HOST . "\x3b\144\x62\x6e\x61\x6d\145\75" . DB_NAME; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\105\x54\40\116\101\x4d\x45\123\x20\x75\164\x66\x38")); $pdo->setAttribute(PDO::ATTR_TIMEOUT, 300); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); } catch (PDOException $e) { header("\114\x6f\143\141\x74\x69\x6f\x6e\72\40\x2e\x2f\x72\145\163\145\x74\137\x73\171\163\164\145\x6d\56\160\x68\x70\x3f\x65\x72\162\157\x72\155\163\147\x3d\62\x33"); die; } require_once dirname(__FILE__) . "\x2f\56\56\57\143\x6f\162\x65\57\x64\x62\x2f\x69\156\151\x74\x5f\x6d\x79\163\x71\x6c\x2e\160\x68\160"; try { $pdo->beginTransaction(); foreach ($init_sql as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\x63\141\x74\151\157\x6e\x3a\40\x2e\57\162\x65\163\x65\164\x5f\x73\171\x73\164\145\155\x2e\160\150\160\x3f\x65\162\x72\157\162\x6d\163\x67\x3d\63\61"); die; } require_once dirname(__FILE__) . "\x2f\56\56\57\143\157\162\x65\57\x64\142\x2f\x69\x6e\151\164\x5f\x72\x65\x63\x6f\162\x64\163\x2e\160\150\160"; try { $pdo->beginTransaction(); foreach ($init_records as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\x6f\x63\141\x74\x69\157\x6e\x3a\40\x2e\x2f\162\145\163\x65\164\137\163\171\x73\x74\145\155\56\160\150\x70\77\x65\162\162\157\x72\155\x73\x67\75\x33\62"); die; } } else { header("\x4c\157\143\141\x74\151\157\x6e\72\x20\x2e\57\x72\x65\x73\145\164\137\x73\x79\x73\164\145\155\x2e\x70\150\x70\x3f\145\162\x72\x6f\162\x6d\163\x67\75\62\62"); die; } } elseif ($database == 1) { foreach (glob(dirname(__FILE__) . "\57\x2e\56\57\x63\157\162\145\57\x64\142\x2f\52\56\144\x62") as $past_db) { unlink($past_db); } if ((double) phpversion() >= 5.3) { if (!($db = new SQLite3($sqlite_path))) { header("\x4c\157\x63\x61\x74\x69\157\156\x3a\x20\56\x2f\x72\x65\163\x65\164\x5f\163\171\163\x74\145\155\56\160\x68\x70\x3f\145\x72\x72\x6f\162\x6d\x73\x67\x3d\62\x34"); die; } } else { if (!($db = sqlite_open($sqlite_path, 438, $error))) { header("\114\157\143\141\164\x69\x6f\156\72\x20\x2e\57\162\x65\163\x65\164\137\163\171\163\164\145\x6d\56\x70\150\160\x3f\x65\x72\162\x6f\x72\x6d\x73\147\75\62\64"); die; } } unset($db); $sqlite_path_real = realpath($sqlite_path); $pdo_sqlite_content = "\74\x3f\160\150\160\xa\xa\144\145\x66\151\x6e\x65\50\47\x53\121\114\x49\x54\x45\137\120\x41\124\110\47\x2c\x20\x27{$sqlite_path_real}\x27\x29\x3b\12"; $file = dirname(__FILE__) . "\x2f\56\x2e\57\x63\157\162\145\x2f\x64\142\57\x70\144\157\137\163\161\x6c\x69\x74\145\x2e\x70\x68\x70"; if (!file_put_contents($file, $pdo_sqlite_content, LOCK_EX)) { header("\114\x6f\143\141\x74\151\x6f\x6e\72\x20\x2e\x2f\162\145\x73\x65\164\x5f\x73\171\x73\164\x65\155\x2e\160\x68\160\x3f\x65\162\x72\157\x72\155\x73\147\x3d\x30\62"); die; } try { $pdo = new PDO("\x73\x71\x6c\151\x74\145\72" . $sqlite_path); $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); } catch (PDOException $e) { header("\114\x6f\143\x61\x74\x69\x6f\x6e\x3a\40\56\x2f\x72\x65\163\145\x74\x5f\163\171\163\164\145\x6d\56\x70\x68\160\x3f\x65\x72\162\157\162\155\x73\x67\75\x32\65"); die; } require_once dirname(__FILE__) . "\57\x2e\x2e\57\143\x6f\162\x65\x2f\144\142\57\151\156\x69\164\137\x73\161\154\151\x74\x65\56\160\x68\160"; try { $pdo->beginTransaction(); foreach ($init_sql as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\143\x61\164\x69\x6f\x6e\x3a\x20\56\57\x72\x65\163\x65\x74\x5f\x73\171\163\x74\x65\155\56\x70\150\x70\x3f\x65\162\x72\157\x72\x6d\x73\x67\x3d\x33\61"); die; } require_once dirname(__FILE__) . "\57\56\56\57\x63\x6f\162\145\x2f\x64\x62\57\x69\x6e\151\x74\137\x72\x65\x63\x6f\x72\144\163\x2e\160\150\x70"; try { $pdo->beginTransaction(); foreach ($init_records as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\x6f\143\141\x74\151\157\156\x3a\x20\56\57\162\145\163\x65\164\x5f\x73\x79\163\x74\x65\x6d\x2e\x70\x68\160\77\145\162\x72\x6f\162\x6d\x73\x67\75\63\x32"); die; } } $verification_key = $_SESSION["\160\157\163\164\x65\x61\x73\x65"]["\166\x65\x72\151\x66\151\143\x61\164\x69\157\156\137\x6b\145\171"] = empty($email) ? $client->setVerificationKey($activation_key, $client_domain) : $client->resetVerificationKey($activation_key, $client_domain); if (!$verification_key) { header("\114\x6f\143\141\x74\151\x6f\156\x3a\x20\56\x2f\162\145\163\x65\164\x5f\x73\171\163\x74\x65\155\56\x70\150\160\x3f\145\162\162\157\162\x6d\163\x67\x3d\x31\65"); die; } try { $pdo->beginTransaction(); foreach ($_SESSION["\160\x6f\163\164\x65\141\163\x65"] as $item => $value) { if ($item == "\160\x6f\x73\164\145\x61\163\145\x5f\166\x65\162\x73\151\157\x6e" || $item == "\144\x6f\155\x61\x69\156" || $item == "\144\151\x72\137\156\x61\x6d\145" || $item == "\x70\157\163\x74\145\x61\x73\x65\x5f\x76\145\x72\x73\151\x6f\x6e" || $item == "\150\x6f\x73\x74\x5f\141\143\164\x69\166\141\164\x69\x6f\156" || $item == "\150\157\163\x74\x5f\165\160\x64\141\x74\145" || $item == "\141\143\x74\151\x76\x61\164\151\x6f\156\137\x6b\x65\x79" || $item == "\163\x69\164\145\x5f\x6e\141\155\145" || $item == "\x74\x69\x6d\x65\172\x6f\156\x65" || $item == "\144\141\x74\141\x62\x61\x73\x65" || $item == "\164\141\x62\x6c\145\137\x70\x72\x65\146\x69\x78" || $item == "\166\x65\x72\x69\146\151\143\141\164\x69\x6f\156\x5f\153\145\171") { $sql = "\x55\x50\104\x41\x54\x45\x20{$table_prefix}\143\x6f\x6e\146\x69\147\x73\40\x53\x45\124\x20\x76\141\154\165\145\40\x3d\40\72\126\101\x4c\x55\105\x20\127\110\x45\x52\105\40\x69\164\145\155\40\75\40\72\x49\x54\105\x4d"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\x56\101\114\125\105", $value); $update_record->bindValue("\111\x54\x45\x4d", $item); $update_record->execute(); unset($update_record); } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\x63\x61\164\x69\157\156\72\x20\56\x2f\x72\x65\163\x65\164\137\163\x79\x73\164\x65\155\56\160\x68\x70\77\145\x72\162\x6f\162\155\x73\x67\x3d\63\65"); die; } require_once dirname(__FILE__) . "\57\x2e\x2e\x2f\x6c\151\x62\x2f\165\x70\154\x6f\141\x64\137\144\151\x72\x2e\x70\x68\160"; foreach ($upload_dirs as $dir) { if (!file_exists(dirname(__FILE__) . $dir)) { mkdir(dirname(__FILE__) . $dir); chmod(dirname(__FILE__) . $dir, 511); } } $custom_directory = dirname(__FILE__) . "\x2f\x2e\x2e\x2f\x63\x75\163\x74\x6f\155"; if (!file_exists($custom_directory)) { mkdir($custom_directory, 493); } $custom_file_js = dirname(__FILE__) . "\57\56\56\x2f\143\x75\163\x74\x6f\x6d\x2f\143\165\x73\x74\x6f\155\x2e\x6a\x73"; if (!file_exists($custom_file_js)) { touch($custom_file_js); } $custom_file_php = dirname(__FILE__) . "\57\x2e\56\x2f\x63\165\163\164\157\155\x2f\143\x75\x73\164\x6f\x6d\x2e\x70\x68\160"; if (!file_exists($custom_file_php)) { touch($custom_file_php); } $custom_tinymce = dirname(__FILE__) . "\57\x2e\x2e\x2f\143\x75\x73\x74\157\x6d\57\x74\x69\156\171\x6d\143\145"; if (!file_exists($custom_tinymce)) { mkdir($custom_tinymce, 493); } $custom_tinymce_init = dirname(__FILE__) . "\57\56\56\57\x63\x75\163\164\x6f\155\57\164\151\x6e\171\x6d\143\145\x2f\151\156\151\x74"; if (!file_exists($custom_tinymce_init)) { mkdir($custom_tinymce_init, 493); } $init_source = dirname(__FILE__) . "\x2f\56\56\57\x74\x69\156\171\155\x63\x65\57\x74\151\x6e\x79\x6d\x63\145\137\151\x6e\x69\164\x2e\152\x73"; $init_distination = dirname(__FILE__) . "\57\x2e\x2e\x2f\x63\165\163\x74\x6f\155\57\164\151\x6e\171\155\143\x65\x2f\x69\156\x69\164\x2f\x70\x6f\x73\x74\x74\x79\x70\145\137\60\x30\60\61\x5f\x69\x6e\x69\164\56\152\x73"; if (!file_exists($init_distination)) { copy($init_source, $init_distination); } $custom_tinymce_css = dirname(__FILE__) . "\x2f\56\x2e\57\x63\x75\163\164\x6f\155\57\x74\151\156\171\155\x63\x65\x2f\143\163\163"; if (!file_exists($custom_tinymce_css)) { mkdir($custom_tinymce_css, 493); } $css_source = dirname(__FILE__) . "\57\56\x2e\x2f\x74\x69\156\171\x6d\143\145\57\x74\151\x6e\x79\155\143\145\56\143\163\163"; $css_distination = dirname(__FILE__) . "\x2f\x2e\x2e\x2f\x63\165\x73\x74\157\155\57\164\151\156\x79\155\143\145\57\x63\163\163\57\160\157\x73\164\x74\171\160\x65\x5f\x30\60\x30\x31\56\143\x73\x73"; if (!file_exists($css_distination)) { copy($css_source, $css_distination); } $config_content = "\x3c\x3f\x70\x68\160\12\xa\x64\x65\146\151\x6e\x65\x28\x27\103\125\122\122\x45\x4e\124\137\104\101\x54\x41\102\x41\x53\x45\47\54\x20{$database}\x29\73\12\144\145\x66\151\x6e\145\50\47\124\x41\x42\114\105\x5f\x50\122\105\106\111\130\47\x2c\x20\47{$table_prefix}\x27\51\x3b\xa"; $file = dirname(__FILE__) . "\x2f\56\56\57\x63\157\x72\145\x2f\x64\142\57\143\157\x6e\146\x69\x67\x2e\x70\150\160"; if (!file_put_contents($file, $config_content, LOCK_EX)) { header("\114\x6f\143\x61\x74\151\157\x6e\72\40\x2e\x2f\x72\x65\x73\145\x74\x5f\x73\171\163\x74\x65\155\x2e\x70\150\160\77\x65\162\162\x6f\x72\155\x73\x67\75\x30\x32"); die; } if (strstr(mb_strtolower($_SERVER["\123\105\x52\126\105\x52\137\x53\117\106\x54\127\x41\122\105"]), "\x61\160\x61\x63\x68\x65")) { $file = dirname(__FILE__) . "\x2f\x2e\56\x2f\x63\157\162\145\x2f\56\x68\164\x61\x63\143\145\x73\163"; $rule = "\104\145\x6e\171\40\146\162\157\155\40\141\x6c\154"; if (!file_put_contents($file, $rule, LOCK_EX)) { header("\x4c\x6f\x63\141\164\151\157\x6e\x3a\x20\56\57\162\x65\x73\x65\164\x5f\163\x79\163\x74\x65\155\x2e\160\150\x70\x3f\x65\162\x72\x6f\x72\155\x73\x67\75\x30\62"); die; } } $_SESSION = array(); session_destroy(); header("\114\157\143\x61\x74\x69\157\156\72\40\x2e\57\77\x76\151\x65\x77\137\160\x61\147\145\75\x6c\x6f\x67\151\156"); die; } else { header("\114\x6f\x63\141\164\x69\157\x6e\72\40\x2e\57\162\145\163\145\164\x5f\163\x79\x73\x74\x65\155\x2e\x70\x68\160\77\x65\162\162\x6f\x72\155\163\147\x3d\x32\x31"); die; } } elseif ($check_activation_key == 9) { header("\114\157\143\141\x74\151\157\156\72\40\x2e\x2f\162\x65\163\x65\164\x5f\163\x79\163\x74\x65\x6d\x2e\x70\x68\x70\77\145\162\x72\x6f\162\x6d\163\147\75\x31\62"); die; } else { if ($email) { header("\114\157\x63\x61\164\x69\x6f\156\72\x20\56\57\162\145\163\x65\x74\x5f\x73\x79\163\x74\x65\x6d\56\x70\150\x70\77\x65\x72\x72\157\162\x6d\x73\x67\x3d\x31\x33"); die; } else { header("\x4c\157\143\141\x74\151\157\x6e\x3a\x20\56\57\x72\x65\x73\145\164\137\163\171\163\x74\145\155\56\160\x68\160\x3f\145\162\162\x6f\162\x6d\163\147\75\x31\61"); die; } } } else { header("\114\157\143\x61\164\151\x6f\156\72\40\56\57\x72\145\163\x65\x74\137\x73\x79\x73\164\x65\x6d\x2e\160\x68\x70\x3f\145\162\162\x6f\x72\155\x73\x67\75\60\61"); die; } } if ($mode == 6) { if (!empty($db_host) && !empty($db_name) && !empty($db_user) && !empty($db_pass)) { try { $dsn = $php_version >= 5.3 ? "\155\x79\163\x71\x6c\x3a\x68\157\x73\x74\x3d" . $db_host . "\x3b\x64\x62\x6e\141\155\145\75" . $db_name . "\x3b\143\x68\x61\x72\163\145\x74\75\x75\164\x66\x38" : "\155\x79\163\161\154\72\x68\157\x73\x74\75" . $db_host . "\x3b\x64\142\x6e\x61\x6d\145\75" . $db_name; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\105\x54\40\x4e\x41\x4d\x45\x53\40\x75\164\x66\70")); } catch (PDOException $e) { header("\x4c\x6f\x63\x61\x74\151\x6f\x6e\x3a\40\x2e\57\162\145\163\x65\x74\137\x73\x79\x73\x74\x65\x6d\x2e\x70\x68\160\77\x65\x72\x72\157\162\x6d\163\147\x3d\x32\63"); die; } $pdo_mysql_content = "\x3c\77\160\x68\x70\xa\xa\x64\x65\x66\x69\x6e\x65\50\47\104\102\x5f\x48\x4f\x53\124\x27\x2c\x20\x27{$db_host}\47\51\x3b\xa\x64\145\x66\x69\156\145\50\47\104\102\x5f\116\101\x4d\105\47\x2c\40\x27{$db_name}\47\x29\73\xa\x64\145\x66\x69\156\x65\50\x27\104\x42\x5f\x55\123\105\122\x27\x2c\x20\x27{$db_user}\47\x29\x3b\xa\x64\x65\146\151\x6e\x65\x28\47\104\x42\x5f\120\101\123\x53\47\54\x20\x27{$db_pass}\47\x29\73\12"; $file = dirname(__FILE__) . "\x2f\56\56\57\143\x6f\x72\145\57\x64\x62\57\x70\x64\x6f\137\x6d\171\x73\x71\154\56\160\x68\160"; if (file_put_contents($file, $pdo_mysql_content, LOCK_EX)) { $_SESSION = array(); session_destroy(); header("\x4c\157\143\141\164\x69\157\x6e\72\40\56\57\77\166\x69\x65\x77\137\x70\141\x67\145\x3d\154\157\147\151\x6e"); die; } else { header("\114\x6f\x63\x61\x74\x69\x6f\x6e\x3a\40\x2e\57\162\145\x73\145\164\x5f\x73\171\x73\164\145\x6d\56\x70\150\x70\77\x65\x72\x72\157\x72\x6d\x73\x67\75\60\62"); die; } } else { header("\x4c\x6f\x63\x61\x74\x69\157\x6e\72\x20\x2e\x2f\x72\145\163\145\x74\x5f\x73\x79\163\x74\145\155\x2e\x70\150\160\77\x65\x72\162\x6f\x72\155\x73\147\75\x30\61"); die; } } if ($mode == 2) { if ($shift_db && $established_db && $database && $table_prefix) { if ($established_db == 2 && $database == 1) { foreach (glob(dirname(__FILE__) . "\57\x2e\x2e\x2f\143\157\x72\x65\57\144\x62\x2f\x2a\x2e\x64\142") as $past_db) { unlink($past_db); } if ((double) phpversion() >= 5.3) { if (!($db = new SQLite3($sqlite_path))) { header("\x4c\157\143\x61\x74\151\157\156\x3a\x20\56\x2f\162\x65\163\x65\x74\137\163\171\163\x74\x65\155\x2e\x70\x68\160\x3f\x65\x72\162\x6f\162\155\x73\147\x3d\62\64"); die; } } else { if (!($db = sqlite_open($sqlite_path, 438, $error))) { header("\114\x6f\x63\x61\x74\x69\x6f\x6e\x3a\40\56\x2f\x72\x65\163\x65\x74\137\163\x79\x73\x74\145\x6d\56\x70\150\160\x3f\x65\x72\x72\157\x72\155\x73\147\75\62\64"); die; } } unset($db); require_once dirname(__FILE__) . "\57\56\56\x2f\143\x6f\162\145\x2f\x64\142\57\x70\x64\x6f\137\x6d\x79\163\161\x6c\56\160\x68\160"; try { $dsn = $php_version >= 5.3 ? "\x6d\x79\163\161\x6c\72\x68\157\163\x74\x3d" . DB_HOST . "\x3b\144\142\x6e\x61\x6d\x65\75" . DB_NAME . "\73\143\x68\x61\162\163\145\164\75\165\164\x66\x38" : "\x6d\171\163\x71\x6c\72\x68\x6f\x73\x74\75" . DB_HOST . "\x3b\144\142\156\141\155\x65\x3d" . DB_NAME; $pdo = $php_version >= 5.3 ? new PDO($dsn, DB_USER, DB_PASS, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, DB_USER, DB_PASS, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\x45\x54\x20\116\101\x4d\105\123\40\x75\x74\146\x38")); $pdo->setAttribute(PDO::ATTR_TIMEOUT, 300); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); } catch (PDOException $e) { header("\114\157\143\141\164\x69\x6f\156\x3a\x20\56\x2f\162\145\x73\x65\x74\137\x73\x79\x73\164\x65\x6d\56\x70\x68\160\x3f\x65\162\x72\157\x72\x6d\163\x67\75\x34\61"); die; } try { $sql = "\123\110\x4f\x57\40\124\x41\102\x4c\x45\123\40\106\122\x4f\x4d\40\140" . DB_NAME . "\x60\x20\x4c\111\113\x45\x20\47{$established_prefix}\45\47"; $read_tables = $pdo->prepare($sql); $read_tables->execute(); $tables = array(); while ($read_table = $read_tables->fetch(PDO::FETCH_ASSOC)) { $tables[] = current($read_table); } unset($read_tables); $all_data = array(); foreach ($tables as $table) { $sql = "\123\x45\114\105\x43\124\x20\x2a\40\x46\x52\117\x4d\40{$table}"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $all_data[$table][] = $record; } } unset($read_records); } catch (PDOException $e) { header("\x4c\157\143\141\x74\151\x6f\x6e\x3a\40\56\57\x72\x65\x73\145\164\137\163\171\x73\164\145\155\56\160\x68\x70\x3f\x65\162\x72\x6f\x72\155\x73\x67\x3d\64\x32"); die; } try { $pdo = new PDO("\x73\161\x6c\151\164\x65\x3a" . $sqlite_path); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); } catch (PDOException $e) { header("\x4c\157\143\141\x74\x69\157\156\72\x20\x2e\57\x72\x65\x73\x65\164\x5f\x73\171\163\164\x65\155\56\x70\x68\160\x3f\145\x72\x72\x6f\162\x6d\163\x67\x3d\x32\65"); die; } require_once dirname(__FILE__) . "\57\56\x2e\57\143\157\x72\x65\57\144\x62\x2f\x69\156\x69\164\x5f\163\161\154\151\x74\x65\x2e\160\150\160"; require_once dirname(__FILE__) . "\57\56\56\57\143\x6f\162\x65\x2f\144\x62\57\x73\x68\x69\x66\x74\x5f\144\142\x2e\x70\150\160"; try { $pdo->beginTransaction(); foreach ($init_sql as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } foreach ($all_data as $table => $records) { foreach ($records as $record) { $table_origin = str_replace($established_prefix, '', $table); $sql = $insert_sql[$table_origin]; $create_record = $pdo->prepare($sql); foreach ($record as $key => $value) { $create_record->bindValue($key, $value); } $create_record->execute(); unset($create_record); } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\143\x61\164\151\157\x6e\72\40\x2e\x2f\162\145\163\145\x74\137\163\x79\x73\164\x65\x6d\56\160\x68\x70\77\145\x72\x72\157\162\x6d\163\147\x3d\64\63"); die; } $sqlite_path_real = realpath($sqlite_path); $pdo_sqlite_content = "\74\x3f\x70\150\x70\xa\12\x64\x65\146\151\156\x65\50\47\x53\x51\114\x49\124\x45\x5f\x50\x41\124\x48\47\x2c\40\x27{$sqlite_path_real}\47\51\x3b\xa"; $file = dirname(__FILE__) . "\57\56\56\57\x63\x6f\162\145\x2f\144\x62\57\160\144\x6f\137\x73\161\154\x69\164\145\56\x70\x68\x70"; if (!file_put_contents($file, $pdo_sqlite_content, LOCK_EX)) { header("\x4c\x6f\x63\141\164\x69\157\156\72\40\x2e\57\162\145\x73\145\x74\137\163\x79\x73\x74\x65\155\x2e\160\x68\160\77\x65\162\162\x6f\x72\x6d\x73\147\x3d\x30\x32"); die; } else { unlink(dirname(__FILE__) . "\57\56\x2e\x2f\x63\x6f\x72\145\57\x64\x62\57\x70\x64\x6f\x5f\155\171\163\161\154\x2e\x70\x68\x70"); } } elseif ($established_db == 1 && $database == 2) { if (!empty($db_host) && !empty($db_name) && !empty($db_user) && !empty($db_pass)) { try { $dsn = $php_version >= 5.3 ? "\x6d\x79\x73\161\x6c\72\x68\157\x73\164\75" . $db_host . "\x3b\x64\142\x6e\x61\x6d\x65\x3d" . $db_name . "\x3b\x63\x68\x61\162\x73\145\164\75\x75\x74\x66\70" : "\x6d\x79\x73\x71\154\72\x68\x6f\x73\164\75" . $db_host . "\x3b\144\x62\x6e\141\155\145\75" . $db_name; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\x45\x54\40\116\x41\115\105\x53\40\x75\164\146\x38")); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo = null; } catch (PDOException $e) { header("\x4c\x6f\143\141\164\151\157\156\x3a\40\x2e\x2f\162\145\x73\145\x74\x5f\163\x79\x73\164\145\x6d\x2e\160\x68\160\77\x65\162\x72\x6f\162\155\163\x67\75\x32\x33"); die; } try { $pdo = new PDO("\163\161\154\x69\164\x65\72" . $sqlite_path); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); } catch (PDOException $e) { header("\114\157\143\141\164\151\x6f\156\72\x20\56\x2f\162\145\163\145\x74\x5f\163\x79\163\x74\x65\x6d\x2e\x70\150\x70\77\145\162\x72\x6f\162\x6d\x73\147\75\x34\x31"); die; } try { $sql = "\x53\x45\114\x45\x43\x54\x20\x6e\x61\155\x65\40\x46\122\x4f\x4d\x20\163\x71\154\151\164\145\x5f\x6d\141\163\x74\x65\x72\40\127\110\105\122\105\40\164\171\160\x65\x20\x3d\40\x27\x74\x61\142\x6c\145\x27\40\101\x4e\x44\40\x6e\x61\155\x65\x20\114\111\x4b\x45\x20\47{$established_prefix}\x25\x27"; $read_tables = $pdo->prepare($sql); $read_tables->execute(); $tables = array(); while ($read_table = $read_tables->fetch(PDO::FETCH_ASSOC)) { $tables[] = $read_table["\x6e\141\155\145"]; } unset($read_tables); $all_data = array(); foreach ($tables as $table) { $sql = "\123\105\x4c\x45\x43\124\x20\52\40\106\x52\117\115\x20{$table}"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $all_data[$table][] = $record; } } unset($read_records); } catch (PDOException $e) { header("\x4c\157\143\141\x74\x69\x6f\156\72\40\x2e\x2f\162\145\163\145\164\x5f\x73\x79\x73\164\x65\155\56\x70\x68\160\x3f\x65\162\162\157\x72\x6d\163\147\75\x34\x32"); die; } $pdo_mysql_content = "\74\77\x70\150\160\xa\xa\x64\x65\146\151\x6e\x65\x28\x27\x44\x42\x5f\x48\x4f\123\124\47\x2c\40\x27{$db_host}\47\51\73\xa\x64\x65\x66\151\x6e\145\50\47\x44\x42\137\116\x41\x4d\105\x27\54\40\x27{$db_name}\x27\51\x3b\xa\144\x65\x66\151\156\145\50\47\x44\x42\x5f\125\x53\x45\x52\x27\x2c\x20\x27{$db_user}\x27\x29\x3b\12\144\145\146\151\x6e\x65\x28\47\104\x42\137\x50\x41\123\x53\47\x2c\x20\x27{$db_pass}\47\51\73\xa"; $file = dirname(__FILE__) . "\x2f\56\56\57\x63\x6f\x72\x65\57\144\142\x2f\160\144\157\x5f\155\171\163\161\154\56\x70\x68\x70"; if (!file_put_contents($file, $pdo_mysql_content, LOCK_EX)) { header("\114\157\x63\x61\x74\x69\x6f\x6e\72\x20\56\x2f\162\x65\163\x65\164\137\163\x79\163\x74\145\155\56\160\150\x70\x3f\x65\162\x72\x6f\x72\x6d\163\x67\75\60\62"); die; } require_once dirname(__FILE__) . "\x2f\x2e\x2e\x2f\143\x6f\162\145\57\x64\x62\x2f\160\x64\x6f\x5f\155\171\163\161\x6c\x2e\x70\x68\x70"; try { $dsn = $php_version >= 5.3 ? "\x6d\x79\163\161\x6c\x3a\x68\157\x73\x74\x3d" . DB_HOST . "\x3b\x64\x62\156\x61\x6d\x65\x3d" . DB_NAME . "\x3b\x63\x68\x61\x72\x73\145\164\x3d\165\x74\x66\x38" : "\x6d\x79\x73\161\x6c\72\150\157\163\x74\75" . DB_HOST . "\73\144\142\156\141\x6d\145\75" . DB_NAME; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\105\124\40\x4e\101\x4d\x45\x53\x20\x75\164\x66\x38")); $pdo->setAttribute(PDO::ATTR_TIMEOUT, 300); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); } catch (PDOException $e) { unlink(dirname(__FILE__) . "\x2f\x2e\56\x2f\143\157\162\145\x2f\x64\142\x2f\x70\144\x6f\137\x6d\x79\163\161\x6c\x2e\160\x68\160"); header("\x4c\157\x63\141\x74\x69\x6f\x6e\x3a\x20\56\x2f\x72\x65\163\x65\x74\137\163\x79\x73\x74\x65\155\56\x70\150\160\77\x65\x72\x72\157\x72\155\163\x67\x3d\x32\x33"); die; } require_once dirname(__FILE__) . "\57\x2e\56\57\x63\157\162\145\x2f\144\142\x2f\x69\156\x69\x74\x5f\155\171\x73\161\x6c\56\160\150\160"; require_once dirname(__FILE__) . "\57\56\56\x2f\x63\157\x72\x65\x2f\144\142\x2f\163\x68\x69\x66\x74\137\x64\x62\x2e\x70\150\x70"; try { $pdo->beginTransaction(); foreach ($init_sql as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } foreach ($tables as $table) { $table = str_replace($established_prefix, $table_prefix, $table); $sql = "\x54\x52\125\x4e\x43\x41\x54\105\40\x54\x41\102\114\105\40\x60{$table}\x60"; $trancate_table = $pdo->prepare($sql); $trancate_table->execute(); unset($trancate_table); } foreach ($all_data as $table => $records) { foreach ($records as $record) { $table_origin = str_replace($established_prefix, '', $table); $sql = $insert_sql[$table_origin]; $create_record = $pdo->prepare($sql); foreach ($record as $key => $value) { $create_record->bindValue($key, $value); } $create_record->execute(); unset($create_record); } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\x6f\x63\141\164\151\x6f\156\72\40\56\57\x72\x65\x73\x65\164\137\163\x79\163\164\x65\x6d\56\160\150\160\77\x65\162\162\157\162\155\x73\147\75\64\x33"); die; } } else { header("\x4c\x6f\143\x61\164\x69\157\156\72\x20\x2e\57\162\x65\163\x65\164\137\x73\x79\x73\164\x65\155\56\160\x68\x70\x3f\x65\x72\x72\x6f\x72\155\163\x67\75\x32\x32"); die; } unlink(dirname(__FILE__) . "\57\56\x2e\x2f\x63\157\162\x65\57\144\142\x2f\160\144\x6f\137\x73\161\154\151\164\x65\x2e\x70\x68\160"); } elseif ($established_db == 2 && $database == 2) { if (!empty($db_host) && !empty($db_name) && !empty($db_user) && !empty($db_pass)) { try { $dsn = $php_version >= 5.3 ? "\155\171\163\x71\154\72\x68\x6f\163\164\75" . $db_host . "\x3b\x64\142\x6e\x61\x6d\145\x3d" . $db_name . "\x3b\x63\x68\x61\162\x73\145\x74\x3d\x75\x74\146\70" : "\x6d\x79\163\161\x6c\72\150\x6f\163\x74\x3d" . $db_host . "\x3b\x64\142\156\x61\x6d\145\x3d" . $db_name; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\x45\x54\x20\116\x41\x4d\x45\123\40\x75\164\x66\x38")); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); $pdo = null; } catch (PDOException $e) { header("\114\x6f\143\141\x74\151\x6f\156\72\x20\x2e\57\x72\x65\x73\145\164\137\163\171\163\164\x65\x6d\x2e\160\150\x70\x3f\x65\162\x72\x6f\162\x6d\163\147\75\62\x33"); die; } require_once dirname(__FILE__) . "\x2f\56\56\57\x63\157\162\x65\x2f\x64\x62\57\x70\x64\x6f\x5f\155\x79\x73\161\x6c\56\160\150\x70"; try { $dsn = $php_version >= 5.3 ? "\155\171\x73\161\154\72\150\x6f\163\164\75" . DB_HOST . "\x3b\144\142\156\x61\x6d\145\75" . DB_NAME . "\x3b\143\150\x61\162\x73\145\164\x3d\165\164\146\x38" : "\155\x79\x73\x71\154\72\x68\157\163\164\75" . DB_HOST . "\x3b\x64\142\x6e\141\x6d\x65\x3d" . DB_NAME; $pdo = $php_version >= 5.3 ? new PDO($dsn, DB_USER, DB_PASS, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, DB_USER, DB_PASS, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\x53\105\124\40\x4e\x41\115\105\x53\x20\x75\x74\146\70")); $pdo->setAttribute(PDO::ATTR_TIMEOUT, 300); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); } catch (PDOException $e) { header("\114\157\x63\x61\x74\x69\x6f\156\x3a\40\x2e\57\162\145\x73\x65\x74\137\x73\171\x73\x74\x65\x6d\56\160\x68\x70\x3f\145\x72\162\157\x72\x6d\x73\x67\75\x32\x33"); die; } if ($db_host == DB_HOST && $db_name == DB_NAME && $db_user == DB_USER && $db_pass == DB_PASS && $table_prefix == $established_prefix) { header("\x4c\157\x63\141\164\151\x6f\156\x3a\x20\56\57\162\145\163\x65\x74\x5f\163\x79\163\164\x65\x6d\56\160\x68\x70\77\x65\162\x72\x6f\x72\155\x73\147\75\63\64"); die; } else { try { $sql = "\123\x48\x4f\x57\40\x54\101\102\114\105\x53\x20\106\x52\x4f\115\x20\x60" . DB_NAME . "\x60\40\x4c\x49\x4b\105\40\x27{$established_prefix}\45\x27"; $read_tables = $pdo->prepare($sql); $read_tables->execute(); $tables = array(); while ($read_table = $read_tables->fetch(PDO::FETCH_ASSOC)) { $tables[] = current($read_table); } unset($read_tables); $all_data = array(); foreach ($tables as $table) { $sql = "\123\x45\x4c\105\103\124\40\52\x20\x46\x52\x4f\115\40{$table}"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $all_data[$table][] = $record; } } unset($read_records); } catch (PDOException $e) { header("\x4c\x6f\143\x61\x74\151\x6f\x6e\72\x20\x2e\57\162\x65\163\145\164\x5f\x73\171\163\164\x65\x6d\x2e\x70\150\160\77\x65\x72\162\157\162\155\163\147\75\64\62"); die; } try { $dsn = $php_version >= 5.3 ? "\x6d\x79\x73\x71\154\x3a\x68\157\163\x74\x3d" . $db_host . "\73\144\142\156\x61\155\145\75" . $db_name . "\x3b\143\150\x61\162\x73\x65\x74\x3d\x75\x74\x66\x38" : "\155\x79\x73\161\154\x3a\150\157\163\164\75" . $db_host . "\73\x64\142\156\x61\x6d\145\x3d" . $db_name; $pdo = $php_version >= 5.3 ? new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)) : new PDO($dsn, $db_user, $db_pass, array(PDO::ATTR_TIMEOUT => 5, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::MYSQL_ATTR_INIT_COMMAND => "\123\105\x54\40\x4e\x41\115\x45\x53\x20\x75\164\x66\70")); $pdo->setAttribute(PDO::ATTR_TIMEOUT, 300); $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, true); } catch (PDOException $e) { header("\x4c\157\143\141\164\x69\157\156\x3a\x20\56\57\162\x65\x73\145\x74\137\x73\171\x73\x74\x65\155\x2e\160\x68\160\77\x65\162\162\157\162\155\163\x67\x3d\x32\63"); die; } require_once dirname(__FILE__) . "\57\56\56\x2f\143\157\162\145\57\x64\x62\x2f\151\156\151\x74\137\155\171\163\161\154\56\160\x68\x70"; require_once dirname(__FILE__) . "\x2f\x2e\56\x2f\143\x6f\x72\145\57\x64\x62\57\x73\x68\151\x66\x74\137\144\142\x2e\x70\x68\160"; try { $pdo->beginTransaction(); foreach ($init_sql as $sql) { $send_query = $pdo->prepare($sql); $send_query->execute(); } foreach ($tables as $table) { $table = str_replace($established_prefix, $table_prefix, $table); $sql = "\x54\122\x55\x4e\x43\x41\x54\105\40\124\x41\x42\114\x45\x20\140{$table}\x60"; $trancate_table = $pdo->prepare($sql); $trancate_table->execute(); unset($trancate_table); } foreach ($all_data as $table => $records) { foreach ($records as $record) { $table_origin = str_replace($established_prefix, '', $table); $sql = $insert_sql[$table_origin]; $create_record = $pdo->prepare($sql); foreach ($record as $key => $value) { $create_record->bindValue($key, $value); } $create_record->execute(); unset($create_record); } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); var_dump($e->getMessage()); die; } $pdo_mysql_content = "\74\77\x70\150\160\12\xa\144\145\146\x69\156\x65\x28\47\x44\x42\x5f\x48\x4f\123\124\x27\x2c\40\47{$db_host}\47\x29\x3b\12\x64\x65\x66\151\156\145\50\x27\x44\x42\137\x4e\101\115\105\x27\x2c\40\x27{$db_name}\x27\51\x3b\xa\x64\x65\146\x69\x6e\x65\50\x27\x44\102\137\x55\123\x45\x52\47\x2c\40\47{$db_user}\47\51\x3b\xa\144\x65\146\151\x6e\x65\x28\47\104\102\x5f\x50\101\x53\x53\47\54\40\x27{$db_pass}\47\x29\x3b\12"; $file = dirname(__FILE__) . "\57\56\56\x2f\x63\x6f\x72\145\57\144\142\x2f\160\144\x6f\137\x6d\171\163\x71\154\56\x70\x68\160"; if (!file_put_contents($file, $pdo_mysql_content, LOCK_EX)) { header("\x4c\x6f\x63\x61\164\x69\x6f\156\72\40\x2e\x2f\x72\x65\163\145\164\137\163\171\163\164\x65\155\56\x70\150\160\77\145\162\162\x6f\x72\155\x73\147\75\x30\x32"); die; } } } else { header("\114\x6f\x63\x61\x74\151\x6f\156\72\40\56\x2f\x72\145\163\145\x74\137\x73\171\x73\x74\x65\x6d\x2e\x70\150\160\77\145\162\x72\x6f\162\155\x73\x67\75\62\x32"); die; } } } else { header("\x4c\157\x63\x61\164\151\157\x6e\72\40\x2e\x2f\x72\145\x73\x65\x74\137\x73\171\163\x74\x65\x6d\56\x70\x68\160\77\145\x72\x72\157\x72\x6d\163\147\75\x30\x31"); die; } } if ($mode == 3 && !empty($configs)) { if (!empty($email)) { require_once dirname(__FILE__) . "\57\x2e\x2e\x2f\143\154\141\163\163\x2f\x70\150\160\x72\x70\x63\57\160\x68\x70\x72\160\x63\x5f\143\x6c\x69\145\156\x74\x2e\x70\x68\x70"; $client = new PHPRPC_Client(); $client->useService($host_activation . "\57\151\156\x63\x2f\147\145\x74\137\154\151\143\x65\x6e\163\145\x2e\x70\x68\160"); if ($check_activation_key = $client->reuseActivationKey($activation_key, $email)) { if ($verification_key = $client->resetVerificationKey($activation_key, $client_domain)) { $update_items = array("\144\x6f\155\x61\x69\156" => $domain, "\144\x69\162\x5f\156\141\155\x65" => $dir_name, "\166\x65\162\151\x66\x69\143\x61\164\151\x6f\156\137\153\145\x79" => $verification_key); try { $pdo->beginTransaction(); foreach ($update_items as $item => $value) { $sql = "\x55\120\104\x41\124\x45\40{$table_prefix}\143\157\156\x66\x69\x67\x73\40\123\105\124\40\x76\x61\154\x75\x65\x20\x3d\40\x27{$value}\47\x20\127\110\x45\122\105\40\151\x74\x65\x6d\x20\x3d\x20\x27{$item}\47"; $update_record = $pdo->prepare($sql); $update_record->execute(); unset($update_record); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\143\141\164\x69\x6f\156\x3a\x20\x2e\x2f\162\x65\x73\145\164\137\x73\x79\163\x74\145\155\56\160\x68\x70\77\x65\162\x72\157\x72\x6d\163\147\75\61\x36"); die; } if (!empty($domain) && $domain != $configs["\144\x6f\155\x61\151\156"] || $dir_name != $configs["\144\x69\x72\137\156\141\155\x65"]) { $upload_uri_old = empty($configs["\x64\151\162\137\156\x61\x6d\145"]) ? $configs["\x64\x6f\x6d\141\151\x6e"] . "\57\x75\160\154\x6f\141\x64\57" : $configs["\144\x6f\x6d\x61\151\156"] . "\57" . $configs["\x64\x69\162\x5f\x6e\x61\x6d\145"] . "\x2f\x75\x70\154\157\141\x64\57"; $upload_uri_new = empty($dir_name) ? $domain . "\57\165\160\154\x6f\141\144\57" : $domain . "\57" . $dir_name . "\x2f\x75\160\154\x6f\141\144\x2f"; $records = array(); try { $pdo->beginTransaction(); $sql = "\123\x45\114\105\x43\124\40\151\x64\54\40\x65\171\x65\143\x61\x74\x63\150\x20\106\122\117\115\40{$table_prefix}\x70\x6f\163\164\x73\137\142\141\x73\145\x20\127\110\105\x52\105\x20\x65\x79\x65\x63\x61\164\x63\x68\x20\x4c\x49\x4b\105\x20\47\45{$configs["\144\157\x6d\141\151\156"]}\45\47"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[] = $record; } unset($read_records); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\143\141\x74\x69\157\156\72\x20\56\57\162\x65\x73\145\x74\x5f\163\x79\x73\x74\x65\x6d\56\160\150\160\77\x65\162\x72\x6f\162\155\x73\147\75\65\61"); die; } if (!empty($records)) { try { $pdo->beginTransaction(); foreach ($records as $row) { $new_eyecatch = str_replace($upload_uri_old, $upload_uri_new, $row["\145\x79\x65\x63\141\164\x63\x68"]); $sql = "\xa\x9\x9\11\11\11\11\11\x9\11\11\x9\125\x50\x44\101\x54\105\40{$table_prefix}\x70\157\x73\x74\163\137\x62\141\163\x65\40\123\105\124\12\11\x9\11\x9\11\x9\11\x9\11\11\11\x9\x65\171\x65\143\x61\164\x63\x68\x20\75\x20\72\116\x45\127\137\105\131\105\x43\101\x54\x43\110\12\11\x9\x9\11\11\11\11\x9\11\x9\x9\127\110\x45\122\x45\x20\x69\x64\x20\x3d\40\x3a\x49\104\xa\11\11\11\x9\x9\11\11\11\x9\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\116\x45\x57\137\105\131\105\x43\101\124\x43\110", $new_eyecatch); $update_record->bindValue("\111\x44", $row["\151\144"]); $update_record->execute(); unset($update_record); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\x63\141\x74\x69\157\x6e\x3a\x20\x2e\57\x72\x65\163\x65\164\x5f\163\171\x73\164\x65\155\x2e\160\x68\160\x3f\x65\162\162\157\x72\155\163\147\75\x35\x32"); die; } } $records = array(); try { $sql = "\x53\105\x4c\105\x43\124\40\142\141\x73\145\137\x69\144\x2c\40\x6c\x61\156\147\165\141\x67\145\x5f\x69\144\x2c\x20\x63\157\x6e\164\x65\156\164\x20\x46\122\117\x4d\x20{$table_prefix}\x70\157\x73\164\x73\x5f\164\x65\x78\164\x20\x57\x48\105\x52\105\x20\143\x6f\x6e\164\145\156\164\x20\114\x49\113\x45\40\47\45{$configs["\x64\x6f\155\141\x69\x6e"]}\x25\47"; $read_records = $pdo->prepare($sql); $read_records->execute(); $i = 0; while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[$i]["\142\x61\x73\145\137\151\144"] = $record["\x62\141\163\145\137\x69\x64"]; $records[$i]["\154\141\x6e\x67\165\x61\x67\x65\137\x69\144"] = $record["\x6c\x61\x6e\x67\165\x61\x67\145\x5f\x69\144"]; $records[$i]["\x63\x6f\156\x74\145\x6e\x74"] = htmlspecialchars($record["\x63\x6f\x6e\x74\145\156\x74"]); $i++; } unset($read_records); } catch (PDOException $e) { header("\114\157\143\x61\164\x69\157\156\72\40\x2e\x2f\x72\x65\163\x65\164\x5f\x73\171\163\164\145\155\x2e\x70\x68\160\x3f\145\x72\162\x6f\x72\x6d\163\x67\x3d\65\61"); die; } if (!empty($records)) { try { $pdo->beginTransaction(); foreach ($records as $row) { $row["\x63\x6f\x6e\164\x65\x6e\164"]; $new_content = str_replace($upload_uri_old, $upload_uri_new, $row["\143\x6f\156\x74\x65\156\164"]); $sql = "\xa\11\x9\x9\11\x9\11\x9\11\11\x9\11\x55\120\x44\x41\124\x45\x20{$table_prefix}\x70\157\163\x74\x73\x5f\x74\x65\170\x74\x20\123\105\124\xa\11\x9\x9\11\11\x9\11\11\x9\11\x9\x9\x63\157\156\x74\x65\156\x74\40\x3d\x20\x3a\x4e\105\127\137\103\x4f\116\124\105\x4e\124\12\x9\11\x9\x9\x9\11\x9\x9\11\11\x9\x57\x48\x45\122\x45\12\x9\x9\11\11\11\11\x9\11\11\x9\x9\11\x62\x61\163\145\137\x69\x64\40\75\x20\x3a\x49\104\12\11\11\11\x9\11\x9\x9\11\x9\11\x9\11\x41\x4e\x44\x20\154\141\x6e\x67\x75\141\147\145\x5f\x69\144\x20\x3d\x20\72\x4c\x41\116\x47\125\x41\107\105\x5f\x49\104\12\11\x9\x9\x9\x9\x9\11\x9\x9\x9"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\116\105\x57\137\103\117\116\124\x45\x4e\124", htmlspecialchars_decode($new_content)); $update_record->bindValue("\x49\104", $row["\142\141\x73\x65\x5f\151\x64"]); $update_record->bindValue("\114\101\x4e\x47\125\x41\107\105\137\111\104", $row["\154\141\156\x67\165\x61\147\x65\137\151\x64"]); $update_record->execute(); unset($update_record); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\x6f\x63\141\164\x69\x6f\156\72\40\56\x2f\x72\x65\x73\x65\164\x5f\163\171\x73\x74\x65\x6d\56\x70\150\160\77\145\x72\162\157\162\x6d\x73\147\x3d\x35\x32"); die; } } $records = array(); try { $sql = "\x53\x45\114\105\103\x54\x20\x62\x61\163\x65\137\x69\144\x2c\40\154\141\156\147\x75\141\x67\x65\x5f\151\x64\54\x20\x63\x75\163\x74\157\155\137\x69\x74\145\x6d\x5f\x69\x64\54\40\166\x61\154\165\145\x20\x46\122\117\115\40{$table_prefix}\x70\157\x73\164\x73\x5f\x63\x75\163\164\x6f\x6d\x20\127\x48\105\x52\105\x20\x76\141\154\x75\x65\x20\x4c\x49\113\x45\x20\47\x25{$configs["\144\x6f\155\x61\151\x6e"]}\x25\x27"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[] = $record; } unset($read_records); } catch (PDOException $e) { header("\x4c\x6f\143\x61\x74\x69\x6f\x6e\72\x20\56\x2f\x72\x65\x73\145\x74\137\x73\x79\x73\164\145\x6d\x2e\160\x68\160\x3f\145\162\x72\157\x72\x6d\x73\x67\x3d\x35\x31"); die; } if (!empty($records)) { try { $pdo->beginTransaction(); foreach ($records as $row) { $new_value = str_replace($upload_uri_old, $upload_uri_new, $row["\x76\x61\154\165\x65"]); $sql = "\xa\11\11\11\x9\11\11\x9\11\x9\x9\11\125\120\x44\x41\124\105\40{$table_prefix}\160\157\x73\x74\163\x5f\143\x75\x73\x74\x6f\155\x20\x53\105\x54\xa\11\x9\x9\11\11\11\x9\x9\11\11\11\11\x76\141\x6c\165\x65\40\x3d\x20\x3a\x4e\x45\127\137\126\101\114\125\105\12\11\x9\11\x9\x9\x9\11\11\11\11\x9\127\110\105\x52\x45\xa\11\x9\11\x9\x9\x9\11\11\11\x9\11\x9\142\x61\x73\145\x5f\151\144\40\75\40\x3a\111\x44\xa\11\11\x9\x9\11\x9\x9\x9\x9\11\11\x9\x41\x4e\104\x20\154\141\x6e\147\165\141\147\x65\x5f\151\144\x20\75\x20\x3a\114\101\x4e\x47\x55\101\x47\x45\x5f\x49\x44\xa\x9\11\11\11\11\11\x9\11\11\11\x9\x9\101\116\x44\40\x63\x75\x73\x74\157\155\x5f\x69\x74\x65\155\x5f\x69\x64\x20\75\x20\x3a\103\125\x53\x54\117\x4d\137\x49\124\105\x4d\x5f\111\104\xa\x9\11\x9\x9\x9\x9\11\11\11\x9"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\x4e\105\x57\137\x56\x41\114\x55\105", $new_value); $update_record->bindValue("\111\104", $row["\142\x61\x73\145\x5f\x69\144"]); $update_record->bindValue("\114\x41\x4e\107\x55\x41\x47\x45\137\x49\x44", $row["\154\141\156\147\165\x61\147\x65\137\151\x64"]); $update_record->bindValue("\x43\125\123\124\117\x4d\x5f\x49\x54\105\115\137\111\104", $row["\x63\x75\163\164\x6f\x6d\137\x69\164\145\155\x5f\151\x64"]); $update_record->execute(); unset($update_record); } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\143\141\164\151\x6f\156\x3a\40\56\57\162\x65\x73\145\x74\137\163\x79\x73\x74\x65\x6d\x2e\160\150\160\77\145\x72\162\157\x72\x6d\x73\x67\x3d\x35\62"); die; } } } if ($established_db == 1) { unlink(dirname(__FILE__) . "\57\56\56\x2f\143\x6f\162\145\x2f\144\x62\57\x70\144\157\137\163\x71\x6c\x69\164\145\x2e\x70\150\x70"); $sqlite_path_real = realpath($sqlite_path); $pdo_sqlite_content = "\x3c\x3f\x70\x68\x70\xa\12\144\145\x66\151\x6e\145\x28\47\123\121\114\x49\124\105\x5f\x50\101\124\110\x27\x2c\x20\47{$sqlite_path_real}\x27\51\73\12"; $file = dirname(__FILE__) . "\x2f\x2e\x2e\x2f\143\x6f\162\x65\57\144\142\57\160\144\x6f\137\163\161\x6c\151\164\145\56\x70\150\160"; if (!file_put_contents($file, $pdo_sqlite_content, LOCK_EX)) { header("\114\x6f\x63\x61\164\151\x6f\x6e\x3a\40\x2e\57\162\x65\163\x65\164\137\x73\x79\x73\x74\145\155\56\160\x68\x70\77\x65\162\x72\157\x72\x6d\163\147\x3d\60\x32"); die; } } if ($established_db == 2) { $pdo_mysql_content = "\x3c\x3f\x70\x68\x70\xa\12\x64\x65\146\151\x6e\145\50\47\104\102\137\110\117\x53\x54\x27\54\40\x27{$db_host}\47\x29\73\12\144\x65\x66\151\x6e\x65\x28\47\x44\x42\x5f\116\x41\115\x45\x27\x2c\x20\x27{$db_name}\x27\51\x3b\xa\x64\145\x66\x69\156\145\50\47\x44\x42\137\125\123\x45\122\47\54\40\47{$db_user}\x27\51\73\xa\144\x65\146\151\x6e\x65\50\x27\104\x42\x5f\120\101\123\123\x27\x2c\x20\47{$db_pass}\x27\51\73\xa"; $file = dirname(__FILE__) . "\x2f\x2e\x2e\x2f\x63\x6f\162\145\x2f\144\142\x2f\160\x64\x6f\x5f\x6d\171\163\161\154\x2e\160\x68\160"; if (!file_put_contents($file, $pdo_mysql_content, LOCK_EX)) { header("\114\x6f\x63\141\x74\151\157\x6e\72\40\x2e\x2f\x72\x65\163\145\164\x5f\163\171\163\164\x65\155\56\x70\x68\x70\77\145\162\x72\x6f\162\x6d\x73\x67\x3d\60\62"); die; } } } else { header("\114\157\x63\141\x74\151\157\156\x3a\40\56\57\162\145\x73\x65\x74\x5f\x73\171\x73\x74\x65\155\x2e\160\x68\160\x3f\145\x72\162\x6f\x72\155\163\147\75\61\65"); die; } } else { header("\114\157\x63\x61\x74\x69\x6f\x6e\x3a\x20\56\x2f\162\145\x73\x65\164\x5f\163\x79\163\164\145\155\56\x70\x68\x70\77\x65\x72\x72\x6f\162\x6d\163\x67\75\x31\x33"); die; } } else { header("\114\157\x63\141\164\x69\x6f\156\72\40\x2e\57\162\145\163\x65\164\x5f\163\171\x73\164\145\x6d\56\160\150\x70\x3f\x65\162\162\x6f\x72\x6d\163\147\x3d\61\x34"); die; } } if ($mode == 4) { if (!empty($domain) && !empty($activation_key)) { if ($postease_version && $host_activation) { require_once dirname(__FILE__) . "\x2f\x2e\56\x2f\143\154\141\x73\163\x2f\x70\x68\x70\162\160\x63\57\160\150\x70\162\x70\x63\137\143\x6c\x69\x65\156\x74\x2e\x70\x68\x70"; $client = new PHPRPC_Client(); $client->useService($host_activation . "\57\x69\x6e\x63\x2f\x67\145\164\x5f\154\x69\x63\x65\156\163\x65\56\160\150\160"); if (!empty($email)) { $check_activation_key = $client->reuseActivationKey($activation_key, $email); } else { $check_activation_key = $client->checkActivationKey($activation_key); } } if ($check_activation_key == 1) { $verification_key = $_SESSION["\x70\157\163\x74\x65\x61\163\x65"]["\x76\x65\162\x69\146\x69\143\141\164\x69\157\156\137\153\x65\171"] = empty($email) ? $client->setVerificationKey($activation_key, $client_domain) : $client->resetVerificationKey($activation_key, $client_domain); if (!$verification_key) { header("\114\157\x63\x61\164\x69\x6f\156\x3a\40\56\x2f\162\145\x73\x65\164\137\163\x79\163\x74\145\155\56\x70\x68\x70\x3f\x65\162\x72\157\x72\155\x73\147\x3d\x31\65"); die; } try { $pdo->beginTransaction(); foreach ($_SESSION["\x70\157\x73\x74\x65\x61\x73\145"] as $item => $value) { if ($item == "\x61\x63\x74\x69\x76\x61\164\x69\x6f\156\137\x6b\145\x79" || $item == "\166\145\162\151\146\x69\x63\141\164\x69\x6f\x6e\137\x6b\145\171") { $sql = "\125\x50\x44\x41\124\105\40{$table_prefix}\x63\x6f\x6e\146\x69\x67\x73\40\x53\105\124\x20\166\x61\154\x75\x65\40\75\40\72\126\101\x4c\125\105\40\127\110\105\122\105\x20\151\164\145\155\x20\75\40\72\x49\124\105\115"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\126\x41\114\125\105", $value); $update_record->bindValue("\111\124\105\x4d", $item); $update_record->execute(); unset($update_record); } } $pdo->commit(); if ($established_db == 1) { unlink(dirname(__FILE__) . "\57\56\x2e\x2f\143\157\x72\x65\57\x64\x62\x2f\160\x64\x6f\x5f\163\x71\154\151\164\x65\x2e\x70\150\x70"); $sqlite_path_real = realpath($sqlite_path); $pdo_sqlite_content = "\x3c\77\160\x68\x70\xa\xa\x64\145\146\x69\156\x65\x28\x27\123\x51\114\x49\124\x45\137\120\x41\124\x48\x27\x2c\40\47{$sqlite_path_real}\x27\x29\x3b\xa"; $file = dirname(__FILE__) . "\x2f\56\x2e\x2f\143\157\x72\x65\x2f\x64\x62\57\160\x64\157\137\x73\161\x6c\x69\x74\x65\x2e\x70\x68\x70"; if (!file_put_contents($file, $pdo_sqlite_content, LOCK_EX)) { header("\114\x6f\x63\x61\x74\x69\157\x6e\x3a\x20\x2e\x2f\162\x65\163\x65\164\x5f\x73\x79\x73\164\x65\155\x2e\160\150\160\x3f\x65\x72\x72\157\x72\x6d\x73\147\75\x30\62"); die; } } if ($established_db == 2) { $pdo_mysql_content = "\x3c\x3f\x70\150\160\12\12\x64\x65\146\x69\156\145\x28\x27\104\102\x5f\110\117\123\x54\47\x2c\x20\x27{$db_host}\47\51\x3b\12\144\145\146\151\156\145\x28\47\104\x42\137\116\x41\x4d\105\47\x2c\x20\x27{$db_name}\x27\x29\73\12\144\x65\146\151\x6e\x65\50\x27\x44\102\137\125\123\105\122\47\54\40\x27{$db_user}\x27\x29\73\12\144\x65\x66\151\156\x65\50\x27\104\x42\x5f\120\x41\123\123\x27\54\40\47{$db_pass}\x27\51\x3b\xa"; $file = dirname(__FILE__) . "\57\56\56\x2f\x63\x6f\x72\145\57\144\142\x2f\160\x64\x6f\x5f\155\171\163\161\x6c\56\x70\x68\x70"; if (!file_put_contents($file, $pdo_mysql_content, LOCK_EX)) { header("\x4c\157\x63\x61\164\x69\157\156\x3a\40\56\x2f\x72\x65\163\x65\164\x5f\163\171\x73\x74\x65\x6d\56\160\150\160\x3f\145\x72\x72\157\162\155\x73\x67\75\60\x32"); die; } } } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\143\141\164\x69\157\x6e\x3a\40\x2e\57\162\145\x73\145\x74\x5f\163\x79\x73\x74\x65\155\56\x70\150\160\77\x65\162\x72\157\162\155\x73\x67\x3d\x33\x35"); die; } } elseif ($check_activation_key == 9) { header("\114\157\143\141\164\x69\x6f\x6e\x3a\x20\56\x2f\x72\x65\x73\x65\x74\x5f\163\x79\x73\x74\x65\155\x2e\x70\150\160\x3f\145\x72\x72\x6f\162\155\163\147\x3d\61\62"); die; } else { if ($email) { header("\x4c\157\143\x61\x74\151\x6f\156\x3a\40\x2e\x2f\162\x65\x73\145\164\137\163\x79\x73\164\145\155\56\x70\150\x70\x3f\145\x72\162\157\162\x6d\x73\147\x3d\x31\x33"); die; } else { header("\x4c\157\143\141\x74\151\x6f\156\72\x20\x2e\x2f\162\145\x73\145\x74\x5f\163\171\x73\164\x65\155\x2e\x70\x68\x70\x3f\x65\x72\x72\x6f\162\x6d\163\x67\75\x31\61"); die; } } } } $config_content = "\74\77\x70\150\x70\xa\xa\144\x65\146\x69\x6e\x65\50\x27\103\x55\x52\x52\105\x4e\124\137\104\x41\124\101\x42\x41\123\105\x27\54\40{$database}\x29\x3b\xa\144\x65\x66\151\156\145\x28\47\x54\x41\102\114\105\x5f\120\x52\105\x46\x49\130\47\x2c\40\47{$table_prefix}\x27\51\73\12"; $file = dirname(__FILE__) . "\x2f\x2e\56\x2f\143\x6f\162\x65\x2f\144\x62\x2f\143\157\x6e\x66\151\147\x2e\160\x68\160"; if (!file_put_contents($file, $config_content, LOCK_EX)) { header("\114\x6f\143\141\x74\x69\157\156\72\x20\x2e\x2f\x72\x65\163\145\164\x5f\x73\171\163\x74\145\155\56\160\150\160\77\145\x72\162\x6f\x72\x6d\163\147\x3d\x30\x32"); die; } if (strstr(mb_strtolower($_SERVER["\123\x45\122\x56\x45\122\137\x53\x4f\106\x54\127\101\x52\x45"]), "\141\x70\x61\143\150\x65")) { $file = dirname(__FILE__) . "\57\x2e\x2e\x2f\x63\x6f\162\145\x2f\56\150\x74\x61\143\x63\145\x73\x73"; $rule = "\104\145\156\x79\40\146\x72\x6f\x6d\x20\141\x6c\x6c"; if (!file_put_contents($file, $rule, LOCK_EX)) { header("\114\157\143\x61\164\x69\157\156\x3a\40\x2e\x2f\162\x65\x73\x65\164\137\163\x79\x73\164\145\x6d\56\x70\150\160\x3f\145\x72\x72\x6f\x72\x6d\163\147\75\x30\62"); die; } } try { $sql = "\125\x50\104\101\x54\105\x20{$table_prefix}\x63\157\156\x66\151\147\x73\x20\123\x45\x54\40\x76\141\x6c\165\145\x20\x3d\x20\72\126\x41\x4c\125\x45\40\127\x48\x45\122\x45\x20\x69\164\x65\155\40\x3d\40\x27\144\141\164\x61\142\141\163\145\47"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\126\101\x4c\x55\x45", $database); $update_record->execute(); unset($update_record); } catch (PDOException $e) { header("\114\157\x63\x61\x74\151\x6f\x6e\72\x20\56\x2f\x72\x65\x73\145\x74\137\163\171\163\x74\x65\155\56\160\x68\160\77\x65\x72\162\157\x72\x6d\x73\x67\75\62\x35"); die; } $_SESSION = array(); session_destroy(); header("\114\x6f\143\x61\164\x69\x6f\156\72\40\x2e\x2f\x3f\x76\x69\145\167\137\x70\141\147\x65\x3d\154\157\147\x69\x6e"); die; } }