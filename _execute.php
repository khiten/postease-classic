<?php
 goto FKfcB; imfuX: $submit_type = isset($_POST["\x73\x75\x62\155\151\164\x5f\164\171\160\145"]) ? $_POST["\x73\x75\x62\x6d\151\164\x5f\164\171\160\145"] : null; goto zTBDU; Jh5wq: if ($_SESSION[$session_key]["\143\157\x6d\155\157\x6e"]["\166\x69\x65\167\x5f\x70\141\147\x65"] == "\143\157\x6d\x6d\145\156\x74") { $type = isset($_POST["\164\x79\160\145"]) ? $_POST["\164\x79\x70\145"] : 1; if (isset($_POST["\x74\x79\x70\x65"]) && $_POST["\x74\171\160\x65"] == 3 && $process == 22) { $process = 23; } $posted_at = !empty($_POST["\160\x6f\x73\164\x65\x64\x5f\141\164"]) ? $_POST["\x70\157\x73\164\x65\144\x5f\141\164"] . "\72\x30\x30" : ($posted_at = date("\131\55\155\x2d\x64\40\x48\x3a\151\72\163")); if (strtotime($posted_at) < strtotime("\x31\x39\x30\60\55\60\x31\x2d\x30\x31\40\60\60\x3a\60\60\72\x30\x30") || !checkDatetime($posted_at)) { $posted_at = date("\x59\x2d\x6d\55\x64\x20\x48\72\x69\72\163"); } $eyecatch = !empty($_POST["\145\x79\145\143\x61\164\143\x68"]) ? $_POST["\145\x79\145\x63\x61\164\x63\150"] : null; $note = !empty($_POST["\x6e\x6f\164\145"]) ? $_POST["\x6e\x6f\x74\x65"] : null; if (!empty($process) && $process == 21) { try { $pdo->beginTransaction(); $sql = "\12\11\x9\11\x9\x9\x49\x4e\123\x45\x52\x54\x20\x49\x4e\x54\117\x20{$table_prefix}\143\157\155\x6d\145\x6e\x74\x73\xa\x9\11\x9\x9\x9\11\50\40\x70\x6f\x73\x74\x5f\151\x64\x2c\40\x20\x63\x6f\x6d\155\x65\156\x74\137\x69\144\x2c\40\x20\160\141\x72\145\x6e\x74\137\151\144\54\x20\x20\163\151\x74\x65\x5f\151\144\54\40\x20\x70\157\x73\164\164\x79\160\145\137\x69\144\x2c\40\x20\164\171\160\x65\x2c\40\x20\x73\143\157\162\x65\54\x20\x20\x6e\151\143\153\x6e\141\155\x65\54\x20\x20\145\x6d\x61\151\x6c\x2c\x20\40\x65\x79\x65\x63\141\x74\x63\x68\x2c\x20\40\x74\151\164\154\x65\x2c\40\40\x63\157\x6e\x74\145\156\164\x2c\x20\40\156\157\x74\x65\54\40\x20\160\x6f\163\x74\145\144\137\x61\164\54\40\40\160\x6f\x73\x74\145\x64\137\x62\171\54\x20\x20\x73\x74\141\x74\165\x73\51\xa\x9\11\x9\x9\x9\126\101\114\125\x45\123\12\x9\11\11\11\11\x9\50\72\120\x4f\123\x54\137\x49\104\x2c\40\72\x43\117\115\x4d\105\x4e\x54\x5f\x49\x44\x2c\x20\x3a\120\x41\x52\x45\x4e\x54\137\111\104\54\40\72\123\111\124\105\137\x49\x44\x2c\x20\x3a\x50\117\x53\x54\x54\x59\x50\105\137\x49\x44\54\40\72\124\x59\120\x45\54\40\72\123\x43\117\x52\105\54\x20\72\x4e\111\x43\113\x4e\101\115\x45\x2c\40\x3a\105\x4d\101\x49\x4c\54\x20\72\x45\x59\x45\103\101\x54\x43\x48\x2c\40\72\x54\111\x54\x4c\x45\x2c\x20\x3a\x43\x4f\116\124\x45\x4e\x54\54\40\x3a\x4e\x4f\124\105\x2c\x20\x3a\x50\x4f\x53\124\x45\x44\x5f\101\x54\x2c\x20\x3a\x50\x4f\123\124\x45\x44\137\102\x59\x2c\x20\72\123\124\x41\x54\x55\123\51\xa\11\x9\x9"; $create_comment = $pdo->prepare($sql); $create_comment->bindValue("\x3a\x50\117\123\x54\x5f\111\104", $_POST["\160\x6f\163\164\137\151\144"]); $create_comment->bindValue("\x3a\103\x4f\115\x4d\x45\x4e\x54\x5f\x49\x44", $_POST["\x63\157\155\x6d\145\156\x74\x5f\x69\144"]); $create_comment->bindValue("\72\x50\x41\x52\x45\x4e\x54\137\x49\104", $_POST["\x70\x61\162\x65\156\x74\137\x69\144"]); $create_comment->bindValue("\x3a\123\x49\x54\105\x5f\111\x44", $_SESSION[$session_key]["\x63\x6f\155\155\157\156"]["\x74\150\x69\163\137\163\151\x74\x65"]); $create_comment->bindValue("\72\x50\117\x53\124\x54\131\120\x45\x5f\111\x44", $_SESSION[$session_key]["\143\157\x6d\x6d\157\x6e"]["\164\150\x69\163\137\x70\x6f\x73\x74\x74\x79\x70\145"]); $create_comment->bindValue("\72\124\131\120\105", $type); $create_comment->bindValue("\x3a\123\x43\x4f\122\x45", $_POST["\163\143\157\x72\x65"]); $create_comment->bindValue("\x3a\116\111\103\113\x4e\101\x4d\105", $_POST["\156\151\143\x6b\156\141\x6d\x65"]); $create_comment->bindValue("\x3a\105\115\x41\111\x4c", $_POST["\x65\x6d\x61\x69\154"]); $create_comment->bindValue("\x3a\105\131\x45\x43\101\x54\x43\110", $eyecatch); $create_comment->bindValue("\x3a\124\111\124\114\x45", $_POST["\164\151\x74\x6c\145"]); $create_comment->bindValue("\x3a\103\117\x4e\x54\x45\116\124", $_POST["\143\157\x6e\x74\x65\156\164"]); $create_comment->bindValue("\x3a\x4e\117\124\x45", $note); $create_comment->bindValue("\72\120\117\123\x54\x45\x44\x5f\x41\x54", $posted_at); $create_comment->bindValue("\72\120\117\x53\124\105\x44\x5f\102\x59", $_SESSION[$session_key]["\165\x73\x65\162"]["\151\x64"]); $create_comment->bindValue("\x3a\x53\x54\x41\x54\x55\123", $_POST["\x73\x74\x61\x74\165\163"]); $create_comment->execute(); unset($create_comment); resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\x63\x61\x74\x69\157\156\x3a\40\56\x2f\x3f\166\x69\145\x77\137\160\141\x67\x65\75\x63\157\x6d\x6d\x65\x6e\164\46\160\x72\x6f\143\x65\163\x73\x3d{$process}\46\145\x72\x72\157\162\155\x73\x67\75\x31"); die; } header("\114\x6f\x63\x61\164\x69\157\156\x3a\x20\x2e\57\x3f\166\151\145\167\x5f\160\141\x67\145\x3d\x63\157\x6d\155\x65\156\164\x73\x26\160\x72\x6f\x63\x65\163\163\75{$process}\46\x74\171\x70\x65\75{$type}"); die; } if (!empty($process) && $process == 22 && !empty($target_id)) { $status = isset($_POST["\x73\x74\141\164\165\163"]) ? $_POST["\163\164\141\164\x75\x73"] : 2; try { $pdo->beginTransaction(); $sql = "\12\11\11\x9\11\11\125\120\x44\101\124\x45\x20{$table_prefix}\x63\157\155\x6d\145\x6e\164\x73\40\x53\x45\124\xa\11\11\11\x9\11\11\x6e\x6f\x74\145\x20\x20\40\40\x20\40\x20\x3d\x20\x3a\x4e\117\124\x45\x2c\xa\x9\11\x9\11\x9\x9\165\x70\x64\x61\x74\x65\144\137\x61\164\x20\x3d\40\x3a\x55\120\104\101\124\105\104\x5f\x41\x54\54\xa\11\x9\x9\11\x9\11\x75\160\144\x61\x74\x65\144\x5f\142\171\40\75\40\72\x55\x50\x44\x41\124\105\x44\x5f\102\x59\54\12\x9\11\x9\x9\x9\11\x73\164\x61\164\165\163\40\40\x20\40\x20\75\40\72\x53\124\101\x54\x55\x53\xa\11\11\x9\11\x9\x57\110\105\x52\x45\40\151\x64\40\75\40\x3a\111\104\xa\11\x9\11"; $update_comment = $pdo->prepare($sql); $update_comment->bindValue("\72\x4e\117\x54\105", $_POST["\156\157\x74\x65"]); $update_comment->bindValue("\x3a\x55\x50\x44\x41\124\105\104\137\x41\124", date("\131\x2d\x6d\x2d\x64\40\x48\72\x69\x3a\163")); $update_comment->bindValue("\72\125\120\104\101\x54\x45\104\137\x42\131", $_SESSION[$session_key]["\x75\x73\145\162"]["\151\x64"]); $update_comment->bindValue("\x3a\123\124\101\124\x55\123", $status); $update_comment->bindValue("\72\111\x44", $target_id); $update_comment->execute(); unset($update_comment); resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\x63\141\164\x69\157\156\x3a\40\56\57\x3f\166\151\x65\x77\137\160\x61\147\145\x3d\143\157\155\x6d\145\x6e\x74\46\x70\162\157\143\145\x73\x73\x3d{$process}\x26\x69\144\75{$target_id}\46\x65\162\x72\157\162\155\163\147\75\x32"); die; } header("\114\x6f\x63\141\x74\x69\157\156\72\40\x2e\57\x3f\166\x69\145\167\137\x70\x61\x67\x65\x3d\x63\x6f\155\x6d\x65\156\164\163\x26\160\x72\157\x63\145\x73\163\x3d{$process}\46\x69\x64\x3d{$target_id}\x26\164\171\160\145\75{$type}\46\x6e\x75\x6d\142\x65\x72\x3d\x31"); die; } if (!empty($process) && $process == 23 && !empty($target_id)) { try { $pdo->beginTransaction(); $sql = "\xa\x9\x9\11\11\x9\125\120\x44\101\124\x45\x20{$table_prefix}\x63\157\155\x6d\x65\156\x74\x73\x20\123\x45\x54\12\11\11\11\11\11\x9\163\x63\x6f\162\x65\40\x20\40\40\x20\x20\x3d\40\72\123\103\117\122\x45\54\12\11\11\11\x9\x9\11\x6e\151\143\x6b\x6e\x61\155\x65\x20\40\x20\75\x20\72\116\111\x43\x4b\116\101\115\x45\54\12\x9\x9\11\x9\11\11\x65\x6d\141\151\x6c\40\40\40\40\40\x20\75\x20\72\x45\115\101\111\x4c\x2c\xa\x9\x9\11\x9\x9\11\x65\171\145\143\x61\164\x63\150\40\x20\40\x3d\x20\x3a\x45\131\105\103\x41\x54\x43\x48\x2c\12\x9\x9\11\x9\11\x9\164\x69\164\x6c\x65\x20\40\x20\x20\40\x20\x3d\x20\72\124\111\124\x4c\105\54\12\11\11\11\x9\x9\11\143\x6f\x6e\x74\x65\156\164\x20\40\40\x20\x3d\x20\x3a\103\117\116\124\x45\116\124\x2c\xa\11\x9\11\x9\x9\x9\156\x6f\x74\145\40\x20\x20\40\x20\x20\x20\75\x20\x3a\116\x4f\x54\105\54\12\11\11\x9\11\x9\11\160\x6f\x73\x74\x65\x64\x5f\x61\164\x20\x20\75\40\72\120\117\x53\124\105\104\137\x41\x54\54\12\11\x9\11\11\11\11\165\x70\x64\x61\164\x65\x64\137\x61\164\x20\x3d\x20\x3a\x55\120\x44\x41\x54\x45\104\137\x41\124\x2c\xa\11\11\x9\x9\11\x9\x75\x70\x64\x61\164\145\144\x5f\x62\x79\40\x3d\40\x3a\125\x50\104\101\x54\x45\104\137\x42\131\x2c\xa\x9\11\11\11\11\11\x73\164\x61\164\165\163\40\40\x20\40\40\x3d\40\x3a\123\124\101\124\125\123\xa\x9\x9\11\11\x9\x57\110\105\122\105\40\151\x64\x20\75\x20\72\x49\104\xa\x9\x9\11"; $update_comment = $pdo->prepare($sql); $update_comment->bindValue("\x3a\123\x43\x4f\x52\105", $_POST["\x73\x63\157\162\x65"]); $update_comment->bindValue("\x3a\x4e\x49\103\x4b\116\x41\115\105", $_POST["\x6e\x69\143\153\x6e\x61\x6d\145"]); $update_comment->bindValue("\72\x45\115\101\x49\114", $_POST["\x65\x6d\x61\x69\154"]); $update_comment->bindValue("\72\x45\x59\x45\103\x41\x54\103\x48", $eyecatch); $update_comment->bindValue("\72\x54\111\x54\114\x45", $_POST["\x74\151\164\154\145"]); $update_comment->bindValue("\72\x43\x4f\x4e\124\x45\x4e\124", $_POST["\143\x6f\156\x74\x65\156\x74"]); $update_comment->bindValue("\x3a\x4e\117\124\105", $note); $update_comment->bindValue("\72\120\x4f\x53\124\105\104\137\101\x54", $posted_at); $update_comment->bindValue("\72\x55\x50\x44\x41\x54\105\104\x5f\101\124", date("\131\x2d\x6d\55\144\x20\x48\72\151\x3a\163")); $update_comment->bindValue("\x3a\x55\x50\104\101\x54\105\104\x5f\x42\131", $_SESSION[$session_key]["\x75\163\145\x72"]["\x69\144"]); $update_comment->bindValue("\72\123\x54\x41\x54\x55\123", $_POST["\163\164\141\x74\165\163"]); $update_comment->bindValue("\x3a\x49\104", $target_id); $update_comment->execute(); unset($update_comment); resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\x63\x61\164\151\x6f\156\72\40\56\x2f\x3f\166\x69\x65\167\137\x70\x61\x67\145\75\x63\x6f\155\155\145\x6e\164\x26\160\162\x6f\x63\x65\163\x73\x3d{$process}\46\x69\144\x3d{$target_id}\x26\145\162\162\157\162\155\163\x67\x3d\x32"); die; } header("\114\157\143\141\x74\151\157\x6e\72\40\56\57\77\x76\x69\145\x77\137\x70\x61\x67\x65\x3d\143\x6f\x6d\155\145\156\x74\x73\x26\160\x72\x6f\143\145\x73\163\75{$process}\46\x69\x64\x3d{$target_id}\46\164\x79\160\145\x3d{$type}\46\x6e\165\155\x62\x65\x72\x3d\61"); die; } if (!empty($process) && $process == 29 && !empty($target_id)) { try { $pdo->beginTransaction(); $sql = "\xa\x9\x9\x9\11\x9\x55\x50\x44\101\x54\105\x20{$table_prefix}\143\x6f\155\155\x65\x6e\164\163\x20\123\x45\x54\12\x9\x9\x9\11\x9\x9\x75\x70\144\x61\x74\145\x64\x5f\141\x74\x20\x3d\40\x3a\125\x50\x44\101\x54\105\104\137\x41\124\54\12\11\11\x9\11\x9\x9\165\160\144\141\x74\x65\x64\137\142\171\40\75\x20\x3a\125\120\x44\x41\x54\105\104\x5f\x42\x59\54\xa\x9\11\x9\x9\x9\x9\x64\x65\x6c\x65\164\145\x5f\x66\x6c\147\40\x3d\40\x31\12\11\11\x9\x9\11\x57\110\x45\122\105\x20\x69\x64\x20\x3d\x20\72\111\104\x20\x4f\x52\40\x63\157\x6d\155\x65\156\164\137\x69\144\x20\x3d\40\x3a\x49\104\xa\11\x9\11\x9"; $update_comment = $pdo->prepare($sql); $update_comment->bindValue("\72\x55\x50\104\x41\x54\x45\x44\137\101\x54", date("\131\55\155\x2d\x64\x20\x48\72\151\x3a\x73")); $update_comment->bindValue("\72\x55\120\x44\x41\124\x45\104\x5f\x42\x59", $_SESSION[$session_key]["\165\x73\x65\162"]["\x69\x64"]); $update_comment->bindValue("\72\111\104", $target_id); $update_comment->execute(); unset($update_comment); resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\x63\141\164\151\157\x6e\x3a\40\56\x2f\x3f\x76\x69\145\x77\137\x70\x61\x67\x65\75\143\157\x6d\155\x65\x6e\x74\46\x70\x72\157\x63\145\x73\163\75{$process}\x26\x69\x64\x3d{$target_id}\46\x65\x72\x72\157\x72\155\x73\147\x3d\63"); die; } header("\114\x6f\x63\x61\x74\151\157\x6e\72\40\56\57\x3f\166\x69\145\x77\137\x70\x61\147\145\75\143\157\x6d\x6d\145\x6e\164\x73\46\160\x72\157\143\145\163\x73\75{$process}\46\x69\x64\75{$target_id}\46\x74\x79\160\x65\x3d{$type}\46\156\x75\x6d\x62\x65\x72\75\x31"); die; } } goto nSe5V; zTBDU: $media_parameter = date("\x59\x6d\x64\x48\x69\x73"); goto volfu; FKfcB: require_once "\x2e\x2f\x5f\163\x79\x73\164\145\x6d\x5f\x68\x65\141\144\x65\x72\56\160\150\x70"; goto jmwZM; Pbwpq: if ($_SESSION[$session_key]["\x63\x6f\x6d\155\x6f\156"]["\166\151\145\167\x5f\x70\141\x67\145"] == "\160\x6f\163\164") { $publish_datetime = !empty($_POST["\x70\x75\142\x6c\151\163\x68\x5f\144\141\x74\x65\x74\151\155\145"]) ? $_POST["\160\165\x62\154\151\x73\x68\137\x64\x61\x74\x65\164\151\x6d\145"] . "\72\x30\x30" : null; if (!empty($publish_datetime) && (strtotime($publish_datetime) < strtotime("\x31\71\60\60\x2d\60\61\x2d\60\x31\40\x30\60\x3a\60\60\x3a\60\x30") || !checkDatetime($publish_datetime))) { $publish_datetime = date("\131\x2d\155\55\x64\40\x48\x3a\151") . "\x3a\x30\x30"; } $publish_end_at = !empty($_POST["\160\165\142\154\x69\163\150\137\145\156\x64\137\x61\164"]) ? $_POST["\160\x75\142\154\151\x73\x68\137\145\156\144\137\141\164"] . "\72\60\60" : null; if (!empty($publish_end_at) && (strtotime($publish_end_at) < strtotime("\61\x39\60\x30\55\x30\61\x2d\60\x31\40\60\60\x3a\x30\x30\x3a\60\60") || !checkDatetime($publish_end_at))) { $publish_end_at = date("\131\55\155\x2d\x64\x20\x48\x3a\x69") . "\72\x30\60"; } $status = false !== strpos($submit_type, "\160\x75\142\154\151\x73\150") ? 1 : $_POST["\x73\164\x61\x74\x75\x73"]; if (empty($publish_datetime) && $status == 1) { $publish_datetime = date("\x59\55\x6d\55\144\x20\110\72\151") . "\x3a\60\x30"; } $category_id = "\60\60\60\60"; if (!empty($_POST["\143\x61\x74\145\147\x6f\x72\x69\x65\163"])) { foreach ($_POST["\x63\x61\164\x65\147\157\x72\151\x65\x73"] as $value) { $posted_categories[] = sprintf("\45\x30\x34\x64", $value); } $category_id = implode("\54", $posted_categories); } $tag_id = "\x30\60\x30\60"; if (!empty($_POST["\x74\141\x67\x73"])) { foreach ($_POST["\164\141\x67\x73"] as $value) { $posted_tags[] = sprintf("\45\60\x34\x64", $value); } $tag_id = implode("\x2c", $posted_tags); } $slug = !empty($_POST["\163\x6c\x75\x67"]) ? $_POST["\163\x6c\x75\147"] : ''; $eyecatch = null; if (!empty($_POST["\x65\x79\145\143\141\164\x63\150"]) && $_SESSION[$session_key]["\x63\x6f\x6e\146\151\147\x73"]["\x6d\145\144\x69\141\x5f\160\x61\x72\x61\x6d\145\164\145\x72\x5f\x66\154\147"]) { if (preg_match($pattern_param, $_POST["\x65\x79\145\143\x61\x74\143\150"])) { $_POST["\145\x79\x65\x63\141\x74\x63\x68"] = preg_replace($pattern_param, '', $_POST["\145\171\145\x63\x61\164\x63\150"]); } $eyecatch = $_POST["\x65\x79\145\143\141\164\x63\x68"] . "\77\166\75" . $media_parameter; } $replace_img = !empty($_SESSION[$session_key]["\143\157\156\x66\x69\x67\163"]["\144\x69\x72\x5f\x6e\141\155\145"]) ? "\x73\x72\143\x3d\x22" . $_SESSION[$session_key]["\x63\x6f\x6e\146\x69\147\163"]["\144\157\x6d\x61\x69\156"] . "\x2f" . $_SESSION[$session_key]["\x63\x6f\x6e\146\151\x67\x73"]["\144\151\x72\x5f\x6e\x61\155\x65"] . "\57\x75\160\154\157\x61\x64\57\146\162\137\x6d\141\x69\x6e\57" : "\163\162\143\75\x22" . $_SESSION[$session_key]["\x63\157\156\x66\151\x67\x73"]["\x64\157\155\x61\x69\x6e"] . "\57\165\x70\x6c\157\x61\144\57\146\x72\137\x6d\x61\151\156\57"; $replace_pdf = !empty($_SESSION[$session_key]["\143\157\x6e\x66\151\x67\163"]["\x64\151\162\137\156\141\155\x65"]) ? "\150\162\x65\146\75\42" . $_SESSION[$session_key]["\143\157\156\x66\x69\x67\x73"]["\x64\x6f\155\141\151\156"] . "\x2f" . $_SESSION[$session_key]["\x63\157\x6e\x66\x69\147\x73"]["\144\x69\162\137\156\x61\x6d\x65"] . "\57\x75\160\154\x6f\x61\144\57\146\162\137\x6d\x61\x69\156\x2f" : "\x68\162\x65\x66\75\42" . $_SESSION[$session_key]["\x63\x6f\156\x66\x69\147\x73"]["\x64\157\155\141\x69\x6e"] . "\x2f\x75\x70\154\157\x61\144\57\x66\x72\137\x6d\141\151\x6e\x2f"; $target_img = "\x73\x72\x63\x3d\x22\x75\x70\154\x6f\141\144\57\146\x72\137\155\x61\x69\156\57"; $target_pdf = "\150\162\x65\146\x3d\x22\165\160\154\157\141\x64\x2f\146\162\x5f\x6d\141\x69\156\57"; if (!empty($_POST["\x63\157\156\x74\145\x6e\164"])) { foreach ($_POST["\143\157\156\164\145\x6e\x74"] as $language_id => $value) { if (strstr($value, $target_img)) { $_POST["\x63\157\x6e\164\x65\x6e\x74"][$language_id] = str_replace($target_img, $replace_img, $value); } if (strstr($value, $target_pdf)) { $_POST["\x63\157\156\164\145\156\164"][$language_id] = str_replace($target_pdf, $replace_pdf, $value); } } if ($_SESSION[$session_key]["\x63\157\x6e\146\x69\x67\x73"]["\155\x65\x64\x69\141\x5f\160\141\162\x61\x6d\x65\164\145\x72\x5f\146\x6c\x67"]) { foreach ($_POST["\x63\157\156\x74\x65\156\164"] as $language_id => $value) { if (preg_match($pattern_param, $value)) { $_POST["\x63\157\x6e\164\145\x6e\164"][$language_id] = preg_replace($pattern_param, '', $value); } } foreach ($operators as $operator => $regex) { foreach ($_POST["\143\x6f\x6e\x74\145\156\x74"] as $language_id => $value) { if (preg_match($regex, $value)) { $_POST["\143\157\156\x74\145\x6e\x74"][$language_id] = preg_replace($regex, $operator . "\x3f\x76\75" . $media_parameter, $value); } } } } } if (!empty($process) && $process == 11) { try { $pdo->beginTransaction(); $target_table = $table_prefix . "\160\157\163\x74\x73\x5f\x62\x61\163\145"; $new_id = getNextId($target_table); $hash_id = generateHashId($new_id); $sql = "\xa\11\11\x9\x9\11\x49\116\123\105\x52\124\x20\x49\116\x54\117\40{$table_prefix}\x70\x6f\163\x74\x73\137\142\141\x73\x65\xa\11\x9\11\x9\x9\11\50\x20\x69\144\54\40\x20\166\145\162\163\x69\157\156\54\x20\40\166\x65\x72\x73\x69\x6f\156\145\144\x5f\x61\164\x2c\40\40\x68\x61\x73\150\x5f\x69\144\54\40\x20\160\145\162\155\x61\154\151\x6e\153\137\153\145\171\x2c\x20\40\x70\x65\162\x6d\x61\154\151\156\153\137\x75\x72\151\x2c\x20\x20\x70\x75\x62\x6c\151\163\150\x5f\x64\141\164\x65\x74\x69\155\145\x2c\x20\40\160\x75\x62\x6c\x69\x73\150\x5f\145\x6e\144\137\141\x74\x2c\40\40\163\x69\164\145\137\x69\144\x2c\x20\40\160\157\x73\x74\x74\171\160\145\x5f\151\x64\x2c\x20\40\x70\x61\x72\x65\x6e\164\x5f\151\x64\54\x20\40\143\141\x74\x65\147\x6f\x72\x79\137\x69\x64\54\x20\x20\164\141\147\137\x69\144\x2c\x20\40\x73\x6c\x75\x67\54\40\40\145\x79\145\143\x61\x74\x63\x68\54\40\40\141\156\x63\150\x6f\x72\x2c\40\x20\143\x72\145\141\164\x65\x64\137\141\x74\54\x20\40\x63\162\x65\x61\x74\145\144\137\142\x79\x2c\40\40\x67\162\157\x75\160\145\x64\137\x62\171\54\40\x20\x73\x74\141\164\165\x73\x29\xa\x9\x9\x9\11\x9\126\x41\114\x55\105\123\12\x9\x9\x9\x9\x9\x9\x28\x3a\111\104\x2c\x20\x3a\126\x45\122\123\x49\x4f\x4e\54\x20\x3a\126\105\122\123\x49\117\116\105\x44\137\101\x54\54\x20\x3a\x48\101\x53\110\x5f\x49\x44\54\40\72\120\105\x52\x4d\x41\114\x49\116\113\137\113\x45\x59\54\x20\x3a\120\105\x52\115\x41\114\x49\116\x4b\137\125\x52\111\54\40\72\120\x55\102\x4c\111\x53\110\137\104\x41\124\x45\124\111\115\x45\x2c\x20\x3a\x50\x55\102\x4c\111\123\x48\x5f\105\116\x44\x5f\101\x54\54\x20\72\123\111\x54\x45\x5f\111\104\x2c\40\x3a\x50\x4f\x53\x54\124\x59\120\105\x5f\111\104\54\x20\72\x50\101\x52\105\116\x54\x5f\111\x44\54\40\72\103\x41\x54\x45\107\117\x52\131\x5f\111\104\x2c\40\x3a\124\101\x47\137\x49\104\x2c\40\72\x53\x4c\x55\x47\54\x20\x3a\105\x59\x45\x43\101\x54\x43\110\54\x20\72\x41\x4e\103\110\x4f\x52\x2c\40\72\103\122\105\x41\124\105\x44\x5f\x41\x54\54\x20\72\103\122\105\101\x54\x45\104\x5f\102\x59\54\x20\x3a\x47\x52\x4f\125\x50\x45\x44\x5f\102\x59\x2c\x20\72\123\x54\x41\124\125\x53\51\xa\x9\11\x9"; $create_post_base = $pdo->prepare($sql); $create_post_base->bindValue("\x49\104", $new_id); $create_post_base->bindValue("\x56\x45\x52\123\111\x4f\x4e", $version); $create_post_base->bindValue("\126\105\x52\x53\111\x4f\x4e\105\104\137\101\x54", date("\x59\x2d\155\x2d\x64\x20\x48\72\151\72\163")); $create_post_base->bindValue("\x48\x41\x53\x48\x5f\x49\104", $hash_id); $create_post_base->bindValue("\x50\x45\122\115\x41\x4c\x49\116\113\137\x4b\x45\131", $_POST["\160\x65\162\155\x61\x6c\151\x6e\x6b\137\x6b\x65\x79"]); $create_post_base->bindValue("\x50\x45\122\x4d\x41\114\111\x4e\113\x5f\x55\x52\x49", $_POST["\160\x65\162\x6d\141\154\151\156\x6b\x5f\165\x72\x69"]); $create_post_base->bindValue("\x50\x55\102\x4c\111\x53\110\137\x44\101\124\x45\x54\111\115\x45", $publish_datetime); $create_post_base->bindValue("\120\125\102\114\x49\x53\110\x5f\x45\x4e\104\x5f\x41\x54", $publish_end_at); $create_post_base->bindValue("\x53\111\x54\x45\137\x49\x44", $_POST["\163\151\x74\145\137\151\x64"]); $create_post_base->bindValue("\x50\x4f\x53\x54\124\131\x50\105\137\x49\x44", $_POST["\x70\157\x73\164\x74\x79\160\x65\137\151\144"]); $create_post_base->bindValue("\x50\101\122\x45\x4e\x54\x5f\111\104", $_POST["\x70\x61\162\145\156\x74\137\151\144"]); $create_post_base->bindValue("\x43\101\124\x45\x47\x4f\122\x59\x5f\111\x44", $category_id); $create_post_base->bindValue("\124\x41\x47\137\x49\104", $tag_id); $create_post_base->bindValue("\123\114\x55\107", $slug); $create_post_base->bindValue("\x45\131\105\103\101\x54\103\x48", $eyecatch); $create_post_base->bindValue("\101\x4e\x43\110\117\x52", $_POST["\x61\156\143\150\157\x72"]); $create_post_base->bindValue("\x43\122\x45\x41\x54\105\104\x5f\x41\x54", date("\131\x2d\155\x2d\x64\x20\x48\72\151\x3a\163")); $create_post_base->bindValue("\103\122\x45\x41\124\x45\x44\137\x42\x59", $_SESSION[$session_key]["\165\163\x65\162"]["\151\144"]); $create_post_base->bindValue("\107\122\x4f\x55\120\105\104\137\x42\x59", $_SESSION[$session_key]["\x75\163\x65\x72"]["\x67\162\x6f\165\x70\137\151\x64"]); $create_post_base->bindValue("\123\124\x41\124\125\123", $status); $create_post_base->execute(); $count_insert = $create_post_base->rowCount(); unset($create_post_base); if (!empty($count_insert)) { foreach ($_POST["\164\151\x74\x6c\x65"] as $language_id => $value) { $sql = "\xa\x9\x9\11\11\11\11\x9\111\x4e\123\105\122\124\x20\111\x4e\x54\x4f\x20{$table_prefix}\x70\157\x73\164\163\137\x74\x65\x78\164\12\x9\x9\x9\x9\x9\x9\x9\11\50\x62\x61\163\145\137\x69\x64\54\x20\x20\154\141\x6e\x67\165\141\147\145\x5f\151\x64\54\40\40\x74\151\x74\x6c\145\54\x20\x20\x61\x64\144\x69\x74\151\157\156\x2c\x20\40\143\x6f\156\x74\145\156\164\x29\12\x9\x9\11\11\11\11\x9\126\x41\114\125\105\123\12\x9\x9\x9\x9\11\x9\11\11\x28\72\x42\101\123\x45\x5f\x49\x44\54\40\72\114\101\116\x47\125\101\107\105\137\x49\104\54\40\72\x54\111\124\114\x45\54\40\72\x41\104\104\x49\x54\111\x4f\116\54\x20\x3a\103\x4f\116\x54\x45\116\124\51\xa\11\11\11\x9\x9"; $create_post_text = $pdo->prepare($sql); $create_post_text->bindValue("\x42\x41\123\x45\x5f\111\x44", $new_id); $create_post_text->bindValue("\114\101\x4e\x47\125\101\x47\105\137\x49\x44", $language_id); $create_post_text->bindValue("\124\111\x54\114\105", $_POST["\164\x69\164\x6c\145"][$language_id]); $create_post_text->bindValue("\x41\x44\104\111\x54\x49\117\116", $_POST["\x61\x64\144\x69\x74\x69\x6f\156"][$language_id]); $create_post_text->bindValue("\103\117\116\x54\x45\x4e\124", $_POST["\x63\x6f\x6e\164\145\156\x74"][$language_id]); $create_post_text->execute(); unset($create_post_text); } } if (!empty($count_insert) && !empty($_POST["\151\x74\145\x6d\x73"])) { $custom_items = array(); $sql = "\123\x45\114\105\103\x54\x20\x69\x64\54\40\164\171\x70\x65\40\x46\122\117\115\x20{$table_prefix}\143\165\163\x74\157\x6d\x5f\151\164\x65\155\x73\x20\x57\110\105\122\x45\x20\144\x65\154\145\164\x65\x5f\146\x6c\x67\40\x3d\x20\x30\40\101\x4e\x44\40\163\x74\x61\x74\x75\x73\x20\x3d\40\x31"; $read_custom_items = $pdo->prepare($sql); $read_custom_items->execute(); while ($record = $read_custom_items->fetch(PDO::FETCH_ASSOC)) { $custom_items[$record["\151\x64"]] = $record["\164\x79\160\145"]; } unset($read_custom_items); foreach ($_POST["\x69\164\x65\x6d\x73"] as $custom_item_id => $data) { foreach ($data as $language_id => $value) { if (is_array($value)) { $value = implode("\x2c", $value); } if ($custom_items[$custom_item_id] == "\x69\155\141\x67\145") { if (!empty($value) && $_SESSION[$session_key]["\143\x6f\156\x66\x69\147\x73"]["\155\145\144\151\x61\x5f\160\x61\x72\141\155\x65\x74\145\162\137\146\x6c\147"]) { if (preg_match($pattern_param, $value)) { $value = preg_replace($pattern_param, '', $value); } $value = $value . "\x3f\x76\x3d" . $media_parameter; } } if ($custom_items[$custom_item_id] == "\x67\x61\154\x6c\x65\x72\171") { if (!empty($value) && $_SESSION[$session_key]["\x63\x6f\x6e\x66\x69\x67\x73"]["\155\145\x64\x69\x61\137\160\141\x72\141\x6d\x65\x74\145\x72\137\x66\154\147"]) { $prepared_data = $str = str_replace(array("\15\12", "\xd", "\12"), "\xa", $value); $separated_data = explode("\12", $prepared_data); $urls_arr = !empty($separated_data[0]) ? explode("\54", $separated_data[0]) : array(); $gallery_arr = array(); foreach ($urls_arr as $url_key => $url) { if (preg_match($pattern_param, $url)) { $url = preg_replace($pattern_param, '', $url); } $gallery_arr[$url_key] = $url . "\x3f\x76\75" . $media_parameter; } $value = implode("\x2c", $gallery_arr); if (!empty($separated_data[1])) { $value .= "\xa" . $separated_data[1]; } } } $sql = "\12\x9\x9\x9\x9\11\11\x9\x49\116\x53\105\122\x54\40\111\x4e\124\x4f\40{$table_prefix}\x70\x6f\x73\x74\163\137\x63\x75\x73\164\157\155\12\x9\x9\x9\x9\x9\x9\x9\x9\x28\x62\x61\x73\x65\x5f\x69\144\54\40\x20\154\141\x6e\x67\x75\x61\x67\x65\137\151\144\x2c\x20\x20\143\x75\x73\164\x6f\155\137\151\x74\x65\x6d\x5f\151\144\54\x20\40\x76\141\154\x75\x65\x29\12\11\x9\11\x9\x9\11\x9\x56\x41\114\x55\x45\123\xa\11\11\11\x9\11\x9\11\11\50\x3a\102\101\x53\105\137\111\x44\x2c\x20\72\x4c\x41\116\x47\x55\101\107\x45\137\111\x44\54\x20\x3a\103\x55\x53\124\117\115\x5f\x49\x54\x45\x4d\137\111\x44\x2c\x20\72\x56\x41\x4c\x55\105\51\12\x9\x9\x9\11\11\11"; $create_post_custom = $pdo->prepare($sql); $create_post_custom->bindValue("\102\101\x53\105\137\111\x44", $new_id); $create_post_custom->bindValue("\114\101\x4e\x47\x55\x41\107\105\137\111\104", $language_id); $create_post_custom->bindValue("\103\x55\x53\x54\x4f\x4d\x5f\x49\124\x45\x4d\137\x49\104", $custom_item_id); $create_post_custom->bindValue("\x56\101\x4c\125\x45", $value); $create_post_custom->execute(); unset($create_post_custom); } } } resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\x63\141\164\151\x6f\156\x3a\x20\56\57\x3f\x76\x69\145\x77\137\x70\141\x67\x65\x3d\x70\157\x73\x74\46\160\162\x6f\143\145\x73\x73\75{$process}\46\151\144\75{$target_id}\x26\145\162\162\x6f\162\x6d\163\147\75\61"); die; } if (empty($_POST["\160\141\162\145\x6e\164\137\151\x64"])) { header("\114\157\143\141\164\151\x6f\156\72\x20\56\57\x3f\166\x69\145\167\137\x70\141\x67\145\75\160\157\x73\x74\163\46\x70\x72\157\x63\145\x73\163\x3d{$process}"); die; } else { header("\114\x6f\x63\141\164\151\x6f\156\72\40\x2e\x2f\77\x76\151\x65\x77\137\x70\141\x67\145\x3d\x70\x6f\163\x74\46\x69\x64\75{$_POST["\x70\x61\x72\x65\x6e\x74\137\151\144"]}\46\x76\145\x72\x73\151\x6f\x6e\75{$_POST["\166\145\x72\163\151\x6f\156"]}\x26\x70\x72\157\x63\145\163\163\x3d\61\62\46\x63\x68\151\154\x64\137\160\162\157\x63\145\x73\163\75{$process}"); die; } } if (!empty($process) && $process == 12 && !empty($target_id) && !empty($version)) { try { $pdo->beginTransaction(); $children = array(); $sql = "\123\x45\114\x45\x43\124\40\151\144\x20\x46\122\117\115\40{$table_prefix}\x70\x6f\163\164\x73\137\142\x61\163\x65\40\x57\110\x45\122\105\40\x70\141\x72\145\156\x74\137\151\144\40\x3c\76\40\x30\x20\101\x4e\x44\x20\x70\141\162\145\156\x74\x5f\151\144\x20\x3d\x20\72\x50\x41\x52\105\116\124\137\111\x44\x20\x41\x4e\104\40\x76\x65\162\163\x69\x6f\x6e\x20\75\40\x3a\126\105\x52\123\x49\117\x4e"; $search_children = $pdo->prepare($sql); $search_children->bindValue("\x50\101\122\x45\x4e\x54\x5f\111\x44", $target_id); $search_children->bindValue("\x56\x45\122\x53\111\117\x4e", $version); $search_children->execute(); while ($record = $search_children->fetch(PDO::FETCH_ASSOC)) { $children[] = $record["\151\144"]; } if ($submit_type == "\160\165\x62\x6c\x69\163\150\x5f\x76\145\162\x73\151\157\x6e") { $_POST["\143\x75\162\162\145\156\x74\137\146\154\147"] = 1; } $sql = "\xa\x9\x9\11\11\x9\x55\120\104\x41\124\x45\40{$table_prefix}\160\x6f\x73\164\163\x5f\x62\141\163\x65\x20\x53\105\x54\xa\11\x9\11\11\x9\x20\x20\x63\x75\162\x72\145\156\164\x5f\x66\x6c\147\40\40\40\40\40\x20\x3d\40\72\103\125\x52\122\105\116\x54\x5f\106\x4c\107\54\xa\11\11\11\11\11\11\x70\x65\x72\155\141\154\x69\156\153\137\153\x65\171\40\x20\40\40\75\40\72\120\105\122\115\101\x4c\111\x4e\x4b\137\x4b\x45\131\x2c\12\x9\x9\x9\11\x9\x9\x70\145\162\x6d\141\154\151\x6e\x6b\137\x75\162\x69\x20\40\40\40\x3d\40\x3a\120\105\x52\x4d\101\114\x49\x4e\113\x5f\125\122\111\x2c\xa\x9\11\x9\x9\x9\11\160\x75\x62\x6c\x69\163\x68\137\x64\141\164\x65\164\151\x6d\145\40\75\40\72\120\125\102\114\111\123\110\x5f\x44\101\124\x45\124\111\115\x45\x2c\xa\x9\11\x9\11\11\11\160\x75\x62\154\x69\x73\150\x5f\145\156\x64\137\x61\164\x20\40\x20\x3d\x20\72\x50\125\x42\114\x49\x53\110\137\x45\x4e\x44\x5f\101\x54\x2c\xa\11\x9\x9\x9\x9\x9\163\x69\x74\145\137\x69\144\x20\40\40\x20\40\x20\40\x20\x20\40\x3d\x20\72\x53\111\124\x45\137\111\104\54\xa\11\11\x9\x9\11\x9\x70\157\x73\164\164\x79\x70\145\x5f\x69\x64\40\x20\40\40\40\x20\75\x20\72\x50\x4f\123\124\124\x59\120\x45\137\x49\x44\54\12\x9\x9\x9\x9\x9\11\x63\x61\x74\145\x67\157\162\171\137\x69\144\40\x20\40\x20\40\x20\x3d\40\72\x43\x41\124\105\107\117\x52\x59\137\x49\x44\54\12\x9\x9\x9\x9\11\11\164\x61\x67\x5f\151\144\40\40\40\40\40\x20\x20\x20\x20\40\40\75\x20\72\x54\x41\x47\x5f\x49\x44\54\12\x9\11\11\x9\x9\11\x73\154\165\x67\x20\40\x20\40\40\40\40\x20\x20\x20\x20\x20\40\75\x20\72\x53\114\125\107\54\12\x9\11\11\x9\x9\x9\x65\171\145\x63\x61\164\143\x68\x20\40\x20\40\x20\x20\40\40\x20\x3d\40\72\105\x59\105\103\101\124\x43\110\54\xa\11\x9\11\11\x9\11\141\156\143\150\157\162\x20\40\x20\x20\40\40\40\x20\x20\x20\x20\75\40\72\101\x4e\103\x48\x4f\122\54\xa\11\11\x9\x9\x9\11\x75\x70\144\141\x74\x65\x64\137\x61\x74\40\40\x20\x20\x20\x20\40\75\40\x3a\x55\120\104\101\x54\105\104\x5f\101\124\54\12\x9\x9\x9\x9\11\11\165\x70\144\x61\164\145\144\137\142\171\40\x20\40\x20\x20\x20\40\x3d\x20\x3a\125\x50\104\x41\124\x45\x44\137\102\x59\x2c\xa\11\x9\x9\x9\x9\11\147\x72\x6f\165\160\145\x64\137\142\x79\x20\40\40\40\40\x20\x20\x3d\x20\72\x47\122\117\125\120\x45\104\x5f\102\x59\x2c\12\x9\x9\11\x9\11\x9\x73\x74\141\164\x75\x73\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x3d\40\x3a\123\x54\x41\x54\125\123\xa\11\x9\x9\11\x9\127\x48\x45\x52\x45\x20\x69\x64\40\75\40\x3a\x49\104\x20\x41\x4e\x44\40\x76\x65\x72\x73\151\157\x6e\40\x3d\x20\72\x56\x45\x52\123\111\117\x4e\12\x9\x9\11"; $update_post_base = $pdo->prepare($sql); $update_post_base->bindValue("\103\125\122\x52\x45\116\124\x5f\x46\x4c\107", $_POST["\143\x75\162\x72\145\x6e\164\x5f\x66\x6c\x67"]); $update_post_base->bindValue("\x50\x45\122\x4d\101\114\x49\116\113\x5f\x4b\x45\131", $_POST["\x70\x65\162\155\141\x6c\151\x6e\x6b\x5f\x6b\x65\171"]); $update_post_base->bindValue("\x50\x45\122\115\x41\x4c\111\116\113\x5f\x55\122\x49", $_POST["\160\145\x72\x6d\141\154\151\156\x6b\137\x75\x72\151"]); $update_post_base->bindValue("\120\x55\x42\114\x49\x53\110\x5f\104\x41\124\x45\124\x49\115\x45", $publish_datetime); $update_post_base->bindValue("\x50\x55\x42\x4c\111\123\110\x5f\105\116\104\x5f\x41\124", $publish_end_at); $update_post_base->bindValue("\x53\x49\x54\105\137\x49\x44", $_POST["\x73\x69\164\145\x5f\151\x64"]); $update_post_base->bindValue("\120\x4f\x53\124\124\131\120\x45\137\x49\x44", $_POST["\160\x6f\163\x74\x74\171\160\145\137\x69\x64"]); $update_post_base->bindValue("\103\x41\124\x45\107\117\122\131\137\111\x44", $category_id); $update_post_base->bindValue("\x54\x41\x47\137\111\x44", $tag_id); $update_post_base->bindValue("\x53\114\125\107", $slug); $update_post_base->bindValue("\x45\131\105\103\101\124\103\110", $eyecatch); $update_post_base->bindValue("\x41\x4e\103\110\x4f\122", $_POST["\141\x6e\143\x68\x6f\x72"]); $update_post_base->bindValue("\x55\120\104\x41\124\x45\104\x5f\x41\x54", date("\x59\55\155\55\x64\x20\110\72\x69\x3a\x73")); $update_post_base->bindValue("\x55\x50\104\x41\124\x45\104\x5f\x42\131", $_SESSION[$session_key]["\x75\163\145\162"]["\151\144"]); $update_post_base->bindValue("\107\x52\117\x55\120\x45\104\x5f\x42\x59", $_SESSION[$session_key]["\x75\x73\145\162"]["\147\x72\157\165\x70\x5f\x69\144"]); $update_post_base->bindValue("\123\x54\x41\x54\125\123", $status); $update_post_base->bindValue("\x49\104", $target_id); $update_post_base->bindValue("\x56\105\x52\x53\111\117\x4e", $version); $update_post_base->execute(); unset($update_post_base); if (!empty($children)) { $sql = "\xa\x9\11\x9\x9\11\11\125\x50\x44\101\x54\105\40{$table_prefix}\160\157\163\x74\163\x5f\x62\141\163\145\x20\x53\x45\x54\12\x9\11\11\x9\11\11\11\x70\x75\142\x6c\x69\x73\150\x5f\x64\x61\164\145\x74\x69\155\145\x20\75\40\72\x50\125\x42\114\x49\123\110\x5f\104\101\124\x45\124\111\x4d\105\x2c\xa\x9\11\x9\x9\x9\x9\x9\x70\x75\x62\154\x69\163\x68\x5f\x65\156\144\x5f\141\164\x20\x20\40\75\x20\x3a\120\125\102\x4c\x49\123\110\137\105\x4e\104\x5f\101\124\54\xa\x9\11\x9\x9\x9\x9\11\163\151\164\145\137\151\x64\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x3d\x20\x3a\x53\x49\124\105\x5f\111\104\x2c\12\11\x9\x9\11\11\11\11\160\157\163\164\x74\171\x70\145\137\151\x64\x20\40\40\40\40\x20\75\40\x3a\x50\117\123\x54\124\131\x50\105\137\111\104\x2c\12\x9\x9\x9\x9\11\x9\x9\143\x61\164\145\x67\x6f\x72\x79\137\151\x64\40\x20\40\x20\x20\40\x3d\x20\x3a\x43\x41\124\x45\107\117\x52\131\137\x49\x44\x2c\xa\11\11\x9\x9\x9\11\11\x74\x61\x67\137\151\144\40\40\40\x20\x20\x20\40\40\x20\x20\40\x3d\40\x3a\124\x41\x47\137\111\104\x2c\xa\x9\x9\11\11\11\11\x9\141\x6e\x63\150\x6f\162\x20\40\40\40\40\x20\x20\x20\40\x20\40\x3d\x20\x3a\x41\116\103\x48\117\122\xa\11\11\x9\x9\11\x9\x57\x48\105\122\105\x20\x70\141\162\145\x6e\164\137\151\x64\40\75\x20\72\120\101\x52\x45\x4e\x54\x5f\111\104\x20\101\x4e\x44\x20\x76\145\x72\x73\151\157\156\x20\x3d\40\x3a\126\x45\x52\x53\111\x4f\x4e\xa\11\11\11\x9"; $update_posts_base = $pdo->prepare($sql); $update_posts_base->bindValue("\120\x55\x42\114\111\x53\x48\x5f\104\101\x54\105\x54\111\x4d\105", $publish_datetime); $update_posts_base->bindValue("\120\x55\x42\114\111\123\110\137\105\x4e\x44\137\x41\124", $publish_end_at); $update_posts_base->bindValue("\x53\x49\124\x45\x5f\x49\104", $_POST["\163\151\x74\x65\137\x69\x64"]); $update_posts_base->bindValue("\x50\x4f\x53\x54\124\131\x50\105\137\111\x44", $_POST["\x70\157\x73\x74\164\x79\160\145\x5f\x69\x64"]); $update_posts_base->bindValue("\103\101\x54\x45\107\x4f\x52\x59\x5f\x49\x44", $category_id); $update_posts_base->bindValue("\x54\101\x47\x5f\111\104", $tag_id); $update_posts_base->bindValue("\101\x4e\103\110\117\x52", $_POST["\141\156\143\150\157\x72"]); $update_posts_base->bindValue("\120\101\122\x45\x4e\x54\137\111\x44", $target_id); $update_posts_base->bindValue("\126\x45\122\x53\111\x4f\116", $version); $update_posts_base->execute(); unset($update_posts_base); } foreach ($_SESSION[$session_key]["\x63\157\x6d\155\x6f\x6e"]["\x6c\x61\x6e\x67\165\141\x67\145\x73"] as $language_id => $value) { $sql = "\123\x45\114\105\103\124\40\103\x4f\x55\x4e\x54\x28\142\x61\163\x65\137\151\x64\51\40\101\123\x20\143\157\165\x6e\x74\x20\x46\122\x4f\x4d\40{$table_prefix}\x70\x6f\x73\x74\x73\137\x74\x65\170\164\40\x57\x48\105\x52\105\40\x62\141\163\145\x5f\151\144\x20\75\x20{$target_id}\40\101\x4e\104\40\142\141\163\145\x5f\x76\145\x72\x73\151\157\x6e\40\x3d\x20{$version}\x20\x41\x4e\104\40\x6c\141\156\147\165\x61\147\x65\x5f\151\144\x20\75\x20{$language_id}"; $search_posts_text = $pdo->prepare($sql); $search_posts_text->execute(); if ($posts_text = $search_posts_text->fetch(PDO::FETCH_ASSOC)) { unset($search_posts_text); } if ($posts_text["\143\157\x75\x6e\164"]) { $sql = "\12\11\11\11\11\11\11\x9\x55\120\x44\101\x54\x45\40{$table_prefix}\x70\157\x73\164\163\x5f\164\145\x78\x74\x20\x53\105\x54\xa\11\x9\x9\x9\x9\11\11\x9\164\151\164\x6c\145\40\x20\40\40\x3d\40\x3a\x54\111\124\x4c\x45\x2c\12\11\x9\11\11\x9\x9\x9\x9\x61\144\144\151\x74\151\157\156\40\75\x20\x3a\101\104\x44\111\x54\x49\117\x4e\54\12\x9\x9\x9\x9\11\x9\11\x9\x63\x6f\156\x74\x65\x6e\164\x20\40\75\40\x3a\x43\x4f\x4e\x54\105\x4e\124\xa\11\11\11\11\x9\11\11\x57\x48\x45\122\x45\40\x62\141\163\x65\x5f\151\144\40\x3d\x20\x3a\x42\101\x53\x45\137\111\x44\40\x41\116\x44\40\x62\x61\x73\x65\x5f\x76\145\x72\163\151\x6f\x6e\x20\x3d\x20\x3a\102\101\123\x45\137\126\105\122\123\x49\x4f\x4e\40\x41\x4e\104\40\154\x61\156\147\x75\x61\x67\x65\137\x69\x64\40\x3d\x20\x3a\114\101\116\x47\x55\101\107\105\137\x49\x44\xa\11\11\x9\x9\x9"; $update_post_text = $pdo->prepare($sql); $update_post_text->bindValue("\x54\111\124\114\105", $_POST["\164\151\x74\x6c\x65"][$language_id]); $update_post_text->bindValue("\x41\x44\x44\x49\124\x49\x4f\x4e", $_POST["\x61\144\144\x69\164\151\x6f\156"][$language_id]); $update_post_text->bindValue("\x43\117\x4e\124\105\x4e\124", $_POST["\143\x6f\x6e\x74\145\x6e\x74"][$language_id]); $update_post_text->bindValue("\x42\x41\x53\x45\137\111\104", $target_id); $update_post_text->bindValue("\102\101\x53\x45\x5f\x56\105\122\x53\111\x4f\116", $version); $update_post_text->bindValue("\x4c\x41\x4e\107\125\101\107\105\x5f\111\104", $language_id); $update_post_text->execute(); unset($update_post_text); if (!empty($children)) { foreach ($children as $child_id) { $sql = "\xa\x9\11\11\x9\11\11\11\11\x9\x55\x50\104\101\124\105\x20{$table_prefix}\160\157\x73\x74\x73\x5f\164\145\x78\164\40\x53\x45\124\xa\x9\x9\x9\x9\x9\x9\x9\x9\11\x9\x74\x69\x74\x6c\x65\40\x3d\x20\x3a\124\111\124\114\x45\xa\x9\x9\11\11\11\11\11\x9\11\127\110\x45\x52\105\x20\142\141\163\145\x5f\151\144\40\75\x20\x3a\x42\x41\x53\x45\x5f\x49\x44\x20\101\x4e\104\x20\142\141\x73\x65\x5f\166\145\162\163\151\x6f\x6e\40\x3d\x20\72\x42\x41\123\105\137\x56\105\122\x53\x49\117\116\x20\101\x4e\104\40\154\x61\x6e\x67\x75\x61\147\145\x5f\151\144\40\75\40\x3a\114\101\x4e\107\125\101\x47\105\x5f\111\104\12\x9\x9\11\x9\11\x9\11"; $update_post_text = $pdo->prepare($sql); $update_post_text->bindValue("\x54\x49\x54\x4c\x45", $_POST["\x74\x69\164\x6c\x65"][$language_id]); $update_post_text->bindValue("\102\101\x53\x45\137\x49\104", $child_id); $update_post_text->bindValue("\x42\x41\x53\105\x5f\x56\x45\122\123\x49\x4f\x4e", $version); $update_post_text->bindValue("\114\x41\x4e\x47\125\x41\107\x45\137\111\104", $language_id); $update_post_text->execute(); unset($update_post_text); } } } else { $sql = "\12\x9\11\x9\x9\x9\x9\11\111\x4e\123\105\x52\124\40\111\x4e\x54\117\40{$table_prefix}\x70\157\x73\x74\x73\137\x74\145\170\164\12\x9\x9\x9\x9\x9\11\11\11\50\x20\x62\x61\163\145\x5f\x69\x64\x2c\40\40\142\x61\x73\145\137\166\145\x72\163\151\157\x6e\54\40\40\x6c\x61\156\x67\165\x61\x67\x65\x5f\151\144\54\x20\40\164\x69\164\x6c\145\x2c\x20\40\x61\144\x64\x69\164\x69\157\x6e\54\40\40\x63\x6f\x6e\x74\x65\156\164\x29\12\11\11\x9\x9\x9\x9\x9\126\x41\x4c\125\x45\x53\12\x9\x9\11\x9\11\x9\11\x9\x28\x3a\x42\x41\123\105\x5f\111\x44\54\40\x3a\102\101\x53\105\137\x56\105\122\x53\x49\117\116\x2c\x20\72\x4c\x41\116\107\125\101\x47\105\137\x49\104\54\x20\x3a\124\111\124\x4c\105\54\x20\x3a\101\104\x44\111\x54\x49\117\x4e\54\x20\x3a\x43\117\x4e\124\x45\116\124\51\xa\x9\x9\11\x9\11"; $create_post_text = $pdo->prepare($sql); $create_post_text->bindValue("\102\x41\x53\x45\x5f\x49\x44", $target_id); $create_post_text->bindValue("\x42\101\123\x45\x5f\x56\105\x52\x53\x49\x4f\x4e", $version); $create_post_text->bindValue("\x4c\x41\x4e\x47\x55\x41\x47\x45\x5f\111\x44", $language_id); $create_post_text->bindValue("\x54\111\124\x4c\105", $_POST["\x74\151\164\154\145"][$language_id]); $create_post_text->bindValue("\x41\x44\104\111\124\111\117\x4e", $_POST["\x61\x64\144\151\164\151\157\156"][$language_id]); $create_post_text->bindValue("\103\x4f\x4e\x54\x45\x4e\x54", $_POST["\x63\157\156\164\x65\156\164"][$language_id]); $create_post_text->execute(); unset($create_post_text); if (!empty($children)) { foreach ($children as $child_id) { $sql = "\12\x9\x9\11\11\11\x9\11\11\11\111\116\x53\105\122\x54\40\111\x4e\x54\117\40{$table_prefix}\160\157\163\164\x73\x5f\164\x65\170\164\xa\x9\11\11\x9\x9\11\x9\11\x9\11\50\40\142\x61\x73\x65\137\151\x64\54\40\x20\142\141\x73\145\x5f\x76\145\162\x73\151\157\x6e\54\40\x20\154\x61\x6e\x67\165\x61\x67\x65\137\151\x64\x2c\x20\x20\x74\x69\164\x6c\x65\51\xa\x9\x9\x9\11\11\11\11\11\11\x56\x41\x4c\125\x45\123\12\11\11\x9\x9\x9\11\x9\11\11\11\50\72\x42\101\x53\105\137\x49\104\x2c\40\72\x42\101\123\x45\x5f\126\105\x52\123\x49\x4f\116\x2c\x20\72\114\101\116\107\125\101\107\x45\x5f\x49\x44\x2c\40\72\x54\111\124\x4c\x45\x29\xa\x9\11\x9\x9\x9\11\x9"; $create_post_text = $pdo->prepare($sql); $create_post_text->bindValue("\x42\101\123\x45\137\x49\104", $child_id); $create_post_text->bindValue("\102\x41\x53\x45\x5f\x56\105\x52\123\111\117\116", $version); $create_post_text->bindValue("\114\101\x4e\107\x55\x41\x47\105\137\x49\104", $language_id); $create_post_text->bindValue("\124\111\124\114\105", $_POST["\x74\151\164\x6c\145"][$language_id]); $create_post_text->execute(); unset($create_post_text); } } } } if (!empty($target_id) && !empty($_POST["\151\164\x65\x6d\x73"])) { $custom_items = array(); $sql = "\x53\105\x4c\x45\x43\124\40\151\144\x2c\40\x74\x79\x70\x65\x20\106\122\x4f\115\x20{$table_prefix}\143\165\x73\164\157\x6d\x5f\x69\164\x65\155\163\x20\x57\x48\x45\122\105\40\144\145\154\x65\x74\145\137\x66\x6c\147\40\x3d\40\x30\40\101\116\x44\40\163\164\141\164\x75\163\x20\75\x20\61"; $read_custom_items = $pdo->prepare($sql); $read_custom_items->execute(); while ($record = $read_custom_items->fetch(PDO::FETCH_ASSOC)) { $custom_items[$record["\x69\x64"]] = $record["\164\171\160\145"]; } unset($read_custom_items); foreach ($_POST["\x69\164\x65\x6d\x73"] as $custom_item_id => $data) { foreach ($data as $language_id => $value) { if (is_array($value)) { $value = implode("\x2c", $value); } if ($custom_items[$custom_item_id] == "\151\155\141\147\145") { if (!empty($value) && $_SESSION[$session_key]["\143\x6f\156\x66\x69\147\x73"]["\155\x65\144\x69\x61\x5f\x70\141\162\141\x6d\145\x74\x65\x72\137\x66\x6c\147"]) { if (preg_match($pattern_param, $value)) { $value = preg_replace($pattern_param, '', $value); } $value = $value . "\77\166\x3d" . $media_parameter; } } if ($custom_items[$custom_item_id] == "\147\141\154\154\145\x72\171") { if (!empty($value) && $_SESSION[$session_key]["\x63\157\x6e\x66\x69\x67\x73"]["\x6d\145\x64\151\x61\x5f\x70\141\162\141\155\145\164\145\162\x5f\146\154\x67"]) { $prepared_data = $str = str_replace(array("\xd\12", "\15", "\xa"), "\12", $value); $separated_data = explode("\xa", $prepared_data); $urls_arr = !empty($separated_data[0]) ? explode("\x2c", $separated_data[0]) : array(); $gallery_arr = array(); foreach ($urls_arr as $url_key => $url) { if (preg_match($pattern_param, $url)) { $url = preg_replace($pattern_param, '', $url); } $gallery_arr[$url_key] = $url . "\x3f\x76\x3d" . $media_parameter; } $value = implode("\x2c", $gallery_arr); if (!empty($separated_data[1])) { $value .= "\xa" . $separated_data[1]; } } } $sql = "\xa\11\x9\x9\x9\x9\x9\x9\11\123\105\x4c\x45\103\124\x20\x43\x4f\x55\x4e\124\x28\x62\x61\163\145\x5f\x69\144\x29\40\x41\x53\x20\x63\157\165\x6e\x74\12\x9\x9\x9\x9\x9\x9\x9\11\x46\x52\x4f\115\x20{$table_prefix}\x70\x6f\x73\164\x73\x5f\x63\165\x73\x74\x6f\155\xa\x9\x9\11\11\x9\11\x9\x9\x57\x48\x45\x52\105\12\11\x9\11\x9\11\x9\11\x9\11\142\x61\x73\145\x5f\x69\144\40\x3d\x20{$target_id}\12\x9\11\x9\x9\11\x9\11\x9\11\101\x4e\x44\40\142\x61\x73\145\x5f\166\x65\x72\x73\151\x6f\156\40\75\40{$version}\12\11\x9\x9\11\11\11\11\11\11\101\x4e\x44\x20\x6c\x61\156\147\165\x61\147\145\x5f\151\x64\x20\x3d\x20{$language_id}\12\11\11\11\11\11\11\x9\x9\x9\x41\116\104\x20\x63\x75\163\x74\157\155\x5f\151\164\145\x6d\137\x69\144\x20\x3d\40{$custom_item_id}\xa\11\x9\11\x9\11\11"; $search_posts_custom = $pdo->prepare($sql); $search_posts_custom->execute(); if ($posts_custom = $search_posts_custom->fetch(PDO::FETCH_ASSOC)) { unset($search_posts_custom); } if ($posts_custom["\143\x6f\x75\156\x74"]) { $sql = "\xa\x9\11\x9\x9\x9\x9\x9\11\x9\125\x50\x44\x41\x54\105\40{$table_prefix}\160\x6f\x73\164\163\137\x63\x75\x73\x74\x6f\155\x20\x53\x45\x54\xa\x9\x9\x9\11\11\x9\x9\x9\11\11\x76\141\x6c\x75\145\40\75\40\72\x56\x41\x4c\125\x45\12\11\x9\11\11\x9\11\x9\11\11\x57\110\105\122\x45\xa\11\11\x9\x9\x9\11\11\x9\11\x9\x62\x61\x73\145\x5f\151\144\x20\75\40\72\x42\101\123\105\x5f\x49\104\xa\x9\11\11\x9\11\x9\x9\x9\11\x9\101\116\x44\40\154\x61\x6e\147\165\x61\147\145\x5f\x69\x64\x20\75\40\x3a\114\101\116\x47\x55\x41\107\x45\x5f\111\x44\12\x9\x9\x9\x9\11\11\x9\11\x9\11\x41\x4e\x44\x20\x62\141\x73\x65\137\166\145\x72\163\x69\x6f\x6e\x20\75\40\x3a\x42\x41\x53\105\137\126\x45\122\123\111\x4f\116\xa\x9\11\x9\11\11\11\11\x9\11\11\101\x4e\104\40\x63\165\x73\164\157\x6d\x5f\x69\164\x65\155\137\x69\144\40\75\x20\x3a\x43\x55\x53\124\x4f\x4d\137\111\124\105\x4d\x5f\111\x44\xa\11\11\x9\11\x9\11\x9"; $update_post_custom = $pdo->prepare($sql); $update_post_custom->bindValue("\126\101\x4c\x55\x45", $value); $update_post_custom->bindValue("\102\x41\x53\105\137\x49\x44", $target_id); $update_post_custom->bindValue("\x42\101\x53\105\137\126\105\x52\123\x49\x4f\x4e", $version); $update_post_custom->bindValue("\x4c\101\x4e\x47\125\101\x47\x45\137\x49\104", $language_id); $update_post_custom->bindValue("\x43\x55\123\124\x4f\115\137\111\124\x45\115\x5f\x49\104", $custom_item_id); $update_post_custom->execute(); unset($update_post_custom); } else { $sql = "\12\11\11\x9\x9\11\x9\x9\x9\x9\x49\116\x53\105\122\124\x20\x49\116\124\x4f\x20{$table_prefix}\x70\157\x73\x74\163\x5f\x63\165\x73\164\x6f\155\xa\x9\11\x9\x9\x9\11\x9\x9\11\11\50\40\142\141\x73\145\x5f\x69\144\54\x20\40\142\141\x73\145\x5f\166\145\162\x73\151\157\156\x2c\x20\40\x6c\141\156\x67\x75\x61\x67\145\137\151\x64\x2c\40\40\x63\x75\x73\x74\157\155\x5f\151\164\145\x6d\x5f\151\x64\54\40\40\166\x61\154\x75\145\51\12\11\11\x9\11\11\x9\11\11\11\x56\101\114\x55\105\123\12\11\11\x9\x9\x9\x9\x9\x9\11\x9\50\72\x42\x41\123\x45\x5f\111\x44\54\40\x3a\x42\101\x53\x45\x5f\126\105\x52\123\x49\x4f\x4e\x2c\40\72\114\x41\x4e\107\125\101\107\x45\137\x49\104\x2c\x20\x3a\x43\x55\x53\x54\x4f\115\x5f\x49\x54\x45\x4d\x5f\x49\x44\x2c\40\72\x56\x41\x4c\x55\x45\51\12\x9\x9\x9\11\11\11\x9"; $create_post_custom = $pdo->prepare($sql); $create_post_custom->bindValue("\x42\101\123\105\x5f\x49\104", $target_id); $create_post_custom->bindValue("\102\x41\123\x45\137\126\105\122\x53\111\x4f\x4e", $version); $create_post_custom->bindValue("\x4c\x41\116\107\125\x41\107\x45\x5f\x49\x44", $language_id); $create_post_custom->bindValue("\103\125\123\x54\117\x4d\x5f\x49\124\x45\115\x5f\111\x44", $custom_item_id); $create_post_custom->bindValue("\126\x41\114\125\x45", $value); $create_post_custom->execute(); unset($create_post_custom); } } } } if ($submit_type == "\160\165\x62\154\151\163\150\x5f\166\x65\162\163\x69\157\x6e") { $sql = "\xa\x20\x20\x20\x20\x20\x20\x20\40\40\40\x20\x20\x55\120\x44\x41\124\x45\x20{$table_prefix}\x70\x6f\x73\164\x73\137\142\141\x73\145\x20\123\x45\x54\12\x20\x20\40\40\x20\x20\40\x20\40\40\x20\x20\40\x20\x63\x75\162\162\145\156\x74\x5f\146\154\x67\x20\x3d\x20\x30\xa\x20\40\x20\40\x20\x20\x20\40\x20\x20\x20\x20\127\x48\x45\122\x45\12\40\40\40\40\x20\x20\40\x20\40\40\40\x20\40\x20\151\144\x20\75\x20\72\x49\104\xa\40\x20\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\101\116\x44\40\x76\x65\162\163\x69\157\156\x20\x3c\76\x20\72\x56\105\122\x53\x49\x4f\x4e\xa\40\40\40\40\x20\40\40\x20\40\x20\40\40\x20\x20\x41\x4e\104\40\163\164\141\x74\165\163\40\75\x20\61\12\40\40\40\x20\40\x20\40\40"; $update_current = $pdo->prepare($sql); $update_current->bindValue("\111\x44", $target_id); $update_current->bindValue("\126\105\x52\123\x49\117\x4e", $version); $update_current->execute(); unset($update_current); } resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\x63\141\x74\151\x6f\156\x3a\x20\56\x2f\x3f\x76\151\145\167\x5f\x70\x61\x67\145\x3d\160\157\x73\164\46\160\x72\157\x63\145\x73\x73\75{$process}\x26\151\x64\x3d{$target_id}\46\x76\x65\x72\x73\x69\157\156\x3d{$version}\x26\x65\x72\162\x6f\162\x6d\x73\x67\x3d\62"); die; } if (empty($_POST["\160\141\162\x65\156\x74\137\x69\x64"])) { header("\x4c\x6f\143\x61\164\x69\x6f\x6e\72\40\x2e\57\77\x76\151\x65\167\137\x70\x61\147\x65\75\x70\157\163\164\x73\46\x70\162\x6f\x63\x65\163\x73\75{$process}\x26\151\144\75{$target_id}\46\156\x75\155\142\145\162\75\61"); die; } else { header("\x4c\x6f\x63\141\164\151\x6f\156\x3a\40\56\57\x3f\166\151\145\x77\137\160\x61\147\145\75\160\x6f\x73\164\46\x69\144\75{$_POST["\x70\x61\162\x65\x6e\164\137\x69\x64"]}\x26\x76\x65\162\163\151\157\156\75{$_POST["\166\x65\162\x73\x69\x6f\156"]}\46\160\x72\x6f\143\145\x73\x73\x3d\x31\x32\46\x63\150\151\x6c\x64\137\x70\162\x6f\x63\145\163\163\x3d{$process}"); die; } } if (!empty($process) && $process == 19 && !empty($target_id)) { try { $pdo->beginTransaction(); if (empty($_POST["\x70\x61\x72\145\156\x74\137\x69\144"])) { if (empty($_POST["\x63\x75\162\162\x65\x6e\x74\x5f\146\154\147"])) { $sql = "\xa\x9\11\11\x9\11\11\x9\125\x50\104\101\x54\x45\x20{$table_prefix}\160\x6f\x73\x74\163\x5f\142\141\163\145\40\123\x45\124\12\x9\11\x9\x9\x9\x9\11\11\165\160\144\141\x74\x65\144\137\141\164\40\75\x20\72\125\120\x44\x41\124\105\104\137\101\x54\54\xa\11\11\x9\x9\x9\x9\11\11\x75\x70\144\x61\164\x65\x64\137\142\x79\x20\x3d\40\72\125\x50\x44\x41\x54\x45\x44\x5f\x42\x59\54\xa\11\11\x9\x9\11\x9\x9\11\x64\x65\x6c\x65\164\145\x5f\x66\x6c\147\x20\75\40\x31\xa\11\11\11\x9\x9\x9\11\x57\x48\105\x52\x45\40\x28\x69\144\x20\x3d\40\x3a\111\x44\x20\117\x52\40\x70\x61\x72\145\156\x74\137\x69\144\x20\x3d\x20\72\x49\104\x29\x20\101\x4e\x44\x20\166\x65\162\x73\151\157\x6e\40\75\x20\x3a\x56\105\122\123\111\117\116\xa\x9\11\11\11\x9"; } else { $sql = "\12\x9\11\x9\11\11\x9\11\125\x50\104\101\x54\x45\x20{$table_prefix}\160\x6f\163\x74\163\137\x62\x61\163\145\x20\x53\105\x54\xa\11\x9\11\11\x9\x9\11\11\165\x70\144\141\x74\x65\144\137\141\x74\40\x3d\40\72\125\120\x44\101\x54\105\x44\137\x41\x54\54\xa\11\x9\11\11\x9\x9\11\x9\165\x70\x64\141\x74\145\144\x5f\x62\171\40\x3d\40\x3a\x55\x50\104\x41\x54\105\x44\x5f\x42\x59\x2c\xa\x9\11\x9\11\11\11\x9\11\x64\145\154\x65\164\x65\x5f\146\154\x67\x20\75\40\61\12\x9\11\11\11\11\x9\11\127\110\105\x52\x45\40\x28\x69\x64\x20\75\x20\72\111\x44\40\117\122\x20\160\x61\x72\x65\x6e\x74\137\x69\x64\x20\75\x20\72\111\104\51\x20\101\116\104\40\166\145\x72\163\151\x6f\x6e\40\x3d\40\x3a\x56\x45\x52\123\111\x4f\x4e\xa\x9\x9\x9\11\x9"; } } else { $sql = "\12\11\11\x9\11\x9\x9\x55\x50\104\x41\x54\x45\40{$table_prefix}\x70\157\x73\x74\x73\137\x62\141\163\x65\x20\x53\x45\x54\12\11\11\11\11\x9\11\x9\x75\x70\x64\x61\x74\x65\144\137\141\x74\x20\75\40\x3a\125\x50\104\101\x54\105\104\137\101\124\x2c\xa\x9\11\11\x9\x9\x9\x9\165\160\144\x61\164\x65\144\137\142\171\40\75\x20\72\x55\120\104\x41\124\x45\x44\137\102\x59\54\xa\x9\x9\11\11\x9\11\11\x64\x65\x6c\x65\x74\145\x5f\146\x6c\x67\40\75\40\61\12\x9\x9\11\x9\11\x9\127\x48\x45\122\105\40\151\x64\x20\75\x20\72\111\104\40\101\x4e\x44\40\x76\145\162\x73\151\157\156\40\x3d\x20\72\126\x45\x52\x53\x49\117\116\xa\11\x9\x9\x9"; } $update_posts_base = $pdo->prepare($sql); $update_posts_base->bindValue("\x55\120\104\101\x54\x45\x44\137\x41\124", date("\x59\55\155\x2d\144\x20\x48\x3a\x69\x3a\x73")); $update_posts_base->bindValue("\x55\x50\104\x41\x54\x45\x44\x5f\102\131", $_SESSION[$session_key]["\x75\x73\145\x72"]["\151\144"]); $update_posts_base->bindValue("\111\104", $target_id); $update_posts_base->bindValue("\126\x45\122\x53\111\x4f\x4e", $version); $update_posts_base->execute(); unset($update_posts_base); resetCacheParams(); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\157\143\141\164\151\157\x6e\72\x20\x2e\x2f\x3f\166\x69\x65\167\137\160\x61\147\x65\x3d\160\x6f\x73\164\x26\x70\162\x6f\x63\x65\163\x73\x3d{$process}\46\151\144\x3d{$target_id}\46\x76\x65\162\x73\151\x6f\156\75{$version}\46\145\x72\x72\157\x72\x6d\x73\x67\75\63"); die; } if (empty($_POST["\x70\x61\162\145\156\x74\137\151\144"])) { if (empty($_POST["\x63\x75\162\x72\145\x6e\x74\137\146\154\x67"])) { header("\114\x6f\x63\141\164\151\x6f\156\72\x20\x2e\57\x3f\x76\x69\145\167\x5f\160\x61\x67\145\x3d\x70\x6f\163\x74\x26\151\144\x3d{$target_id}\46\x70\162\157\143\145\x73\x73\75\61\62\x26\166\x65\x72\x73\151\x6f\x6e\x5f\x70\x72\157\x63\145\x73\x73\x3d{$process}"); die; } else { header("\114\x6f\x63\141\164\151\x6f\156\x3a\x20\56\57\x3f\166\151\145\167\137\160\141\x67\x65\75\160\x6f\x73\164\163\x26\160\x72\x6f\x63\145\163\163\x3d{$process}\x26\x69\x64\75{$target_id}\x26\x6e\x75\155\x62\145\162\75\61"); die; } } else { header("\114\157\143\x61\x74\151\157\156\72\x20\x2e\57\77\x76\151\145\167\137\x70\141\147\145\x3d\160\x6f\163\164\x26\151\x64\75{$_POST["\x70\x61\162\x65\156\164\x5f\x69\144"]}\x26\x76\145\162\163\x69\x6f\x6e\75{$_POST["\166\x65\x72\x73\151\157\156"]}\46\x70\162\157\143\145\163\x73\75\x31\x32\x26\x63\x68\x69\154\x64\137\x70\162\157\x63\x65\163\x73\x3d{$process}"); die; } } } goto Jh5wq; volfu: $pattern_param = "\57\x5c\x3f\166\75\x5c\144\173\61\x34\175\57"; goto Pbwpq; jmwZM: $target_id = isset($_POST["\x74\141\x72\x67\x65\x74\137\151\x64"]) ? $_POST["\x74\141\162\x67\145\x74\x5f\151\x64"] : null; goto uOf3H; D7jGI: $process = isset($_POST["\x70\x72\157\x63\145\163\x73"]) ? $_POST["\x70\x72\x6f\143\x65\x73\x73"] : null; goto imfuX; uOf3H: $version = isset($_POST["\166\145\x72\163\151\157\x6e"]) ? $_POST["\166\x65\x72\x73\151\x6f\156"] : null; goto D7jGI; nSe5V: if ($_SESSION[$session_key]["\x63\x6f\155\155\157\156"]["\x76\151\145\167\137\x70\x61\x67\x65"] == "\x63\157\156\x74\141\143\164") { $contacted_at = !empty($_POST["\x63\157\156\x74\x61\143\164\x65\x64\x5f\x61\164"]) ? $_POST["\x63\157\x6e\164\141\143\x74\x65\144\x5f\x61\x74"] . "\x3a\x30\x30" : null; if (strtotime($contacted_at) < strtotime("\61\71\60\60\x2d\x30\61\x2d\60\61\x20\x30\60\72\x30\60\x3a\x30\60") || !checkDatetime($contacted_at)) { $contacted_at = date("\x59\x2d\x6d\x2d\x64\40\x48\x3a\151\72\163"); } $status = isset($_POST["\163\164\x61\x74\x75\x73"]) ? $_POST["\x73\x74\x61\x74\x75\163"] : 0; if (isset($_POST["\164\157\137\x73\x74\x61\x74\165\163\x5f\61"])) { $status = 1; } if (isset($_POST["\x74\x6f\x5f\x73\164\x61\x74\x75\x73\x5f\x37"])) { $status = 7; } $category_id = "\60\60\60\x30"; if (!empty($_POST["\143\x61\164\x65\147\157\x72\151\145\163"])) { foreach ($_POST["\x63\141\x74\145\147\x6f\162\x69\145\x73"] as $value) { $posted_categories[] = sprintf("\x25\60\x34\x64", $value); } $category_id = implode("\54", $posted_categories); } if (!empty($process) && $process == 31) { try { $pdo->beginTransaction(); $sql = "\xa\x9\x9\x9\11\x9\111\116\x53\105\122\x54\40\x49\x4e\124\x4f\x20{$table_prefix}\x63\157\x6e\x74\141\x63\x74\163\x5f\142\141\163\x65\xa\11\11\11\x9\11\x9\50\x20\x73\x69\164\145\137\151\x64\54\x20\40\x70\x6f\x73\164\x74\x79\x70\145\137\151\x64\x2c\40\40\x6c\x61\x6e\147\x75\x61\147\x65\137\151\x64\x2c\x20\x20\143\x61\164\145\147\x6f\162\x79\137\x69\144\54\x20\x20\164\x69\x74\154\145\54\40\40\x63\157\156\x74\x65\156\x74\x2c\40\x20\156\141\155\145\54\x20\x20\145\155\x61\x69\x6c\x2c\40\40\x74\x65\x6c\x2c\40\40\143\x6f\156\164\x61\x63\x74\x65\144\x5f\x61\x74\54\x20\40\x6e\x6f\164\145\x2c\40\40\x63\162\x65\x61\164\145\x64\137\x61\x74\x2c\x20\x20\143\162\145\141\164\145\144\137\142\x79\x2c\x20\x20\x67\162\157\165\x70\x65\x64\137\x62\171\54\40\x20\163\x74\141\x74\165\163\51\xa\11\x9\11\11\x9\x56\x41\114\x55\x45\123\xa\11\11\11\11\x9\x9\x28\x3a\x53\111\124\x45\x5f\x49\x44\x2c\x20\x3a\x50\x4f\123\x54\124\x59\120\105\x5f\x49\104\54\x20\x3a\114\101\116\x47\125\101\107\x45\137\111\104\54\x20\x3a\x43\101\124\x45\107\117\x52\x59\137\x49\104\54\x20\x3a\x54\111\x54\x4c\105\x2c\40\72\103\117\x4e\x54\x45\116\124\x2c\x20\72\x4e\101\115\x45\x2c\40\72\105\115\x41\111\x4c\54\x20\x3a\x54\x45\114\54\40\x3a\103\117\116\124\x41\103\124\x45\104\137\x41\124\x2c\40\x3a\116\x4f\x54\105\x2c\40\x3a\103\122\x45\x41\124\x45\104\137\101\x54\54\x20\x3a\x43\122\x45\101\x54\x45\104\137\x42\x59\54\x20\72\x47\122\117\125\120\x45\x44\x5f\102\131\x2c\x20\x3a\x53\124\x41\x54\x55\123\51\xa\11\x9\x9"; $create_contact_base = $pdo->prepare($sql); $create_contact_base->bindValue("\123\x49\x54\105\137\111\104", $_POST["\x73\x69\x74\145\137\151\x64"]); $create_contact_base->bindValue("\120\x4f\x53\x54\124\131\x50\105\137\x49\104", $_POST["\160\157\163\x74\x74\171\x70\145\137\x69\x64"]); $create_contact_base->bindValue("\x4c\x41\x4e\x47\x55\x41\x47\105\x5f\x49\x44", $_POST["\x6c\141\x6e\147\165\141\x67\x65\137\x69\x64"]); $create_contact_base->bindValue("\103\x41\x54\105\107\x4f\122\131\x5f\111\x44", $category_id); $create_contact_base->bindValue("\x54\x49\124\x4c\105", $_POST["\164\x69\164\154\x65"]); $create_contact_base->bindValue("\x43\117\116\124\105\x4e\x54", $_POST["\143\157\156\x74\145\156\x74"]); $create_contact_base->bindValue("\116\101\x4d\105", $_POST["\156\x61\155\x65"]); $create_contact_base->bindValue("\x45\115\101\111\x4c", $_POST["\x65\155\141\151\x6c"]); $create_contact_base->bindValue("\x54\x45\114", $_POST["\x74\145\x6c"]); $create_contact_base->bindValue("\x43\117\116\x54\101\x43\x54\105\104\x5f\101\x54", $contacted_at); $create_contact_base->bindValue("\116\117\124\x45", $_POST["\156\x6f\x74\145"]); $create_contact_base->bindValue("\103\x52\x45\101\x54\105\104\x5f\101\124", date("\x59\x2d\x6d\55\144\40\x48\72\151\72\163")); $create_contact_base->bindValue("\x43\122\x45\101\124\105\x44\137\x42\131", $_SESSION[$session_key]["\x75\163\145\162"]["\x69\x64"]); $create_contact_base->bindValue("\x47\x52\117\x55\120\x45\104\137\102\131", $_SESSION[$session_key]["\165\163\x65\x72"]["\x67\162\x6f\x75\x70\x5f\x69\144"]); $create_contact_base->bindValue("\x53\x54\x41\124\x55\x53", $status); $create_contact_base->execute(); unset($create_contact_base); $sql = "\x53\105\x4c\105\103\124\x20\x69\144\x20\106\x52\x4f\x4d\40{$table_prefix}\x63\x6f\x6e\164\x61\x63\x74\163\x5f\142\x61\x73\145\x20\117\122\x44\x45\x52\40\102\x59\40\x69\x64\40\104\105\x53\103\x20\114\x49\115\111\124\40\x30\x2c\x20\x31"; $get_new_contact = $pdo->prepare($sql); $get_new_contact->execute(); if ($new_contact = $get_new_contact->fetch(PDO::FETCH_ASSOC)) { unset($get_new_contact); } if (!empty($new_contact["\151\144"]) && !empty($_POST["\x69\164\x65\x6d\163"])) { foreach ($_POST["\x69\x74\x65\x6d\x73"] as $custom_item_id => $value) { if (is_array($value)) { $value = implode("\54", $value); } $sql = "\xa\x9\11\x9\11\11\11\x9\111\x4e\123\x45\122\124\x20\111\x4e\124\x4f\40{$table_prefix}\143\x6f\x6e\164\141\143\164\x73\x5f\143\165\163\164\x6f\x6d\12\11\11\11\11\11\11\x9\x9\50\x62\x61\163\x65\137\151\144\x2c\x20\40\x63\x75\x73\164\x6f\x6d\137\151\x74\145\155\137\151\144\54\x20\x20\166\x61\x6c\x75\145\51\xa\11\11\x9\x9\11\x9\11\126\x41\114\x55\105\x53\xa\11\x9\x9\x9\11\x9\11\x9\x28\x3a\x42\101\x53\105\137\x49\104\54\40\x3a\103\x55\123\x54\117\x4d\137\x49\x54\x45\115\137\x49\104\54\x20\72\126\101\x4c\125\105\51\12\x9\x9\x9\11\x9"; $create_contact_custom = $pdo->prepare($sql); $create_contact_custom->bindValue("\x42\101\123\x45\x5f\x49\x44", $new_contact["\x69\144"]); $create_contact_custom->bindValue("\103\x55\123\x54\x4f\115\137\111\124\x45\115\x5f\111\x44", $custom_item_id); $create_contact_custom->bindValue("\126\101\114\125\x45", $value); $create_contact_custom->execute(); unset($create_contact_custom); } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\x63\141\164\x69\x6f\x6e\72\x20\x2e\57\x3f\x76\151\145\167\137\x70\141\x67\145\x3d\143\x6f\x6e\164\141\143\x74\46\x70\x72\x6f\x63\145\163\163\x3d{$process}\46\x65\162\162\x6f\x72\x6d\x73\x67\x3d\61"); die; } header("\x4c\x6f\x63\x61\x74\x69\x6f\x6e\x3a\x20\56\x2f\77\x76\151\145\167\x5f\x70\141\147\x65\75\143\157\156\164\x61\x63\x74\163\x26\x70\x72\x6f\x63\x65\163\163\75{$process}"); die; } if (!empty($process) && $process == 32 && !empty($target_id)) { try { $pdo->beginTransaction(); $sql = "\xa\x9\x9\x9\x9\11\x55\x50\104\101\124\x45\40{$table_prefix}\x63\x6f\x6e\164\x61\x63\164\163\x5f\x62\141\x73\145\x20\x53\x45\124\12\x9\11\x9\x9\11\x9\156\157\164\145\x20\40\x20\40\40\40\x20\75\x20\x3a\116\x4f\x54\x45\x2c\12\x9\x9\x9\11\11\11\x75\160\x64\x61\164\x65\144\137\141\x74\x20\x3d\x20\x3a\125\x50\x44\101\x54\105\104\137\101\124\54\xa\x9\11\11\11\11\11\165\160\144\141\164\x65\144\x5f\142\171\x20\x3d\x20\x3a\x55\x50\x44\101\x54\105\x44\x5f\x42\x59\x2c\xa\11\11\x9\11\x9\11\x73\164\x61\x74\x75\x73\x20\x20\x20\x20\x20\x3d\40\x3a\123\124\101\x54\125\x53\xa\11\11\11\x9\11\127\110\x45\x52\105\x20\x69\x64\40\75\x20\x3a\111\x44\12\x9\x9\11"; $update_contact_base = $pdo->prepare($sql); $update_contact_base->bindValue("\x4e\x4f\124\105", $_POST["\156\157\164\145"]); $update_contact_base->bindValue("\x55\x50\x44\x41\124\105\104\137\x41\124", date("\131\x2d\155\x2d\x64\40\110\x3a\x69\72\163")); $update_contact_base->bindValue("\125\x50\x44\101\124\105\x44\x5f\x42\131", $_SESSION[$session_key]["\165\163\x65\162"]["\x69\x64"]); $update_contact_base->bindValue("\123\124\101\x54\x55\123", $status); $update_contact_base->bindValue("\111\x44", $target_id); $update_contact_base->execute(); unset($update_contact_base); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\143\x61\x74\151\157\x6e\72\x20\x2e\57\77\x76\151\145\167\x5f\x70\141\147\145\75\x63\x6f\x6e\164\141\x63\164\x26\160\162\157\x63\x65\x73\163\75{$process}\x26\x65\162\162\x6f\x72\x6d\163\x67\x3d\62"); die; } header("\114\157\x63\141\x74\x69\157\x6e\72\x20\56\x2f\77\166\151\145\x77\137\160\x61\x67\145\75\x63\157\156\x74\141\x63\x74\x73\x26\160\x72\157\x63\145\163\x73\x3d{$process}\x26\151\144\x3d{$target_id}\x26\x6e\165\x6d\x62\145\x72\75\x31"); die; } if (!empty($process) && $process == 33 && !empty($target_id)) { try { $pdo->beginTransaction(); $sql = "\xa\11\x9\x9\x9\11\125\120\x44\101\124\x45\40{$table_prefix}\143\157\x6e\x74\141\x63\x74\x73\x5f\x62\x61\163\x65\40\x53\105\x54\xa\11\11\11\11\x9\x9\x63\141\x74\x65\147\157\162\x79\x5f\x69\144\40\x20\x3d\x20\x3a\x43\101\124\105\107\117\x52\131\137\x49\104\54\xa\x9\11\x9\11\11\x9\164\151\x74\x6c\145\40\x20\x20\x20\40\x20\40\x20\75\40\x3a\124\x49\x54\x4c\x45\54\12\11\x9\11\x9\11\x9\143\157\x6e\164\x65\x6e\x74\x20\40\x20\x20\x20\x20\75\x20\72\103\x4f\x4e\x54\105\116\x54\54\12\x9\x9\11\x9\11\x9\156\141\x6d\x65\40\x20\x20\x20\40\40\x20\x20\x20\75\40\72\116\101\x4d\105\x2c\12\11\11\x9\x9\x9\x9\x65\x6d\141\x69\x6c\x20\x20\x20\x20\x20\x20\40\x20\75\40\72\x45\115\101\111\114\54\xa\x9\x9\x9\11\11\x9\x74\x65\154\x20\x20\40\40\40\40\40\40\40\x20\75\40\x3a\124\105\x4c\x2c\12\11\x9\11\x9\11\11\x63\x6f\x6e\164\x61\143\164\x65\x64\137\x61\164\40\x3d\x20\x3a\x43\x4f\116\124\101\x43\x54\105\x44\x5f\101\124\54\12\11\11\x9\11\11\x9\156\157\x74\x65\40\x20\40\40\x20\40\40\x20\40\x3d\x20\72\x4e\117\x54\105\x2c\12\x9\11\11\11\11\11\x75\x70\144\x61\x74\145\144\137\141\x74\x20\40\40\x3d\x20\72\125\120\x44\x41\x54\x45\x44\x5f\x41\x54\x2c\12\x9\11\x9\x9\x9\x9\x75\160\x64\141\x74\x65\x64\137\142\171\x20\x20\40\75\40\72\x55\x50\x44\101\x54\x45\x44\x5f\102\x59\x2c\12\x9\11\x9\x9\11\x9\147\162\157\165\x70\145\x64\x5f\142\x79\x20\40\40\75\40\72\x47\122\117\x55\120\x45\104\x5f\102\131\54\12\11\x9\11\11\11\x9\163\x74\x61\x74\x75\163\x20\x20\40\40\x20\x20\40\x3d\40\x3a\123\x54\x41\x54\125\123\12\11\x9\11\x9\11\127\x48\105\122\x45\40\x69\144\x20\75\x20\x3a\111\104\12\x9\x9\x9"; $update_contact = $pdo->prepare($sql); $update_contact->bindValue("\103\101\x54\x45\x47\x4f\x52\x59\x5f\x49\104", $category_id); $update_contact->bindValue("\124\111\x54\x4c\x45", $_POST["\164\x69\164\154\145"]); $update_contact->bindValue("\x43\117\x4e\124\105\x4e\124", $_POST["\x63\157\156\164\145\156\x74"]); $update_contact->bindValue("\116\x41\115\x45", $_POST["\x6e\x61\155\145"]); $update_contact->bindValue("\x45\x4d\x41\x49\114", $_POST["\x65\x6d\141\x69\154"]); $update_contact->bindValue("\124\105\114", $_POST["\164\145\154"]); $update_contact->bindValue("\103\117\116\124\x41\x43\x54\105\104\137\x41\124", $contacted_at); $update_contact->bindValue("\116\117\x54\x45", $_POST["\x6e\157\164\x65"]); $update_contact->bindValue("\x55\120\x44\x41\124\105\x44\137\101\x54", date("\x59\x2d\x6d\x2d\144\x20\110\72\x69\72\x73")); $update_contact->bindValue("\x55\x50\x44\x41\x54\x45\104\x5f\x42\x59", $_SESSION[$session_key]["\165\163\145\x72"]["\151\144"]); $update_contact->bindValue("\107\122\x4f\125\120\x45\104\x5f\x42\131", $_SESSION[$session_key]["\x75\163\145\162"]["\x67\162\157\x75\160\x5f\151\144"]); $update_contact->bindValue("\123\x54\101\x54\125\x53", $status); $update_contact->bindValue("\111\x44", $target_id); $update_contact->execute(); unset($update_contact); if (!empty($target_id) && !empty($_POST["\151\164\145\155\163"])) { foreach ($_POST["\151\164\145\155\163"] as $custom_item_id => $value) { if (is_array($value)) { $value = implode("\x2c", $value); } $sql = "\xa\x9\x9\x9\11\x9\x9\x53\x45\114\x45\103\x54\40\x43\117\125\116\x54\50\x62\141\163\x65\137\151\x64\x29\x20\x41\123\40\143\x6f\165\x6e\164\xa\x9\11\11\11\x9\11\106\122\x4f\115\40{$table_prefix}\143\x6f\156\164\141\x63\x74\163\137\143\165\163\x74\x6f\155\xa\11\11\x9\11\x9\11\127\110\105\x52\105\12\x9\x9\11\11\x9\11\11\142\141\x73\x65\137\x69\x64\x20\75\x20{$target_id}\12\11\11\x9\x9\x9\x9\x9\101\116\x44\40\143\x75\163\x74\157\155\137\151\x74\x65\155\137\151\144\40\x3d\x20{$custom_item_id}\xa\x9\x9\x9\x9\11"; $search_contacts_custom = $pdo->prepare($sql); $search_contacts_custom->execute(); if ($contacts_custom = $search_contacts_custom->fetch(PDO::FETCH_ASSOC)) { unset($search_contacts_custom); } if ($contacts_custom["\x63\x6f\165\x6e\x74"]) { $sql = "\12\11\11\11\x9\11\11\x55\120\x44\101\x54\105\x20{$table_prefix}\x63\157\x6e\x74\141\143\x74\163\137\143\165\x73\x74\x6f\x6d\40\123\x45\124\xa\x9\11\x9\x9\x9\x9\x9\166\x61\x6c\x75\x65\x20\x3d\x20\x3a\126\x41\x4c\125\105\xa\x9\11\11\11\x9\11\x57\110\x45\122\105\xa\x9\x9\11\11\x9\x9\11\142\x61\163\x65\x5f\151\144\x20\75\40\72\102\101\123\x45\137\111\104\12\x9\x9\x9\x9\11\x9\11\101\116\104\40\x63\x75\x73\164\157\155\x5f\151\164\145\155\x5f\x69\144\40\x3d\x20\72\103\125\123\x54\x4f\x4d\x5f\x49\x54\105\115\x5f\x49\104\xa\x9\x9\x9\11\x9\x9"; $update_contact_custom = $pdo->prepare($sql); $update_contact_custom->bindValue("\x56\101\114\125\x45", $value); $update_contact_custom->bindValue("\x42\101\123\x45\x5f\111\104", $target_id); $update_contact_custom->bindValue("\103\x55\123\x54\117\115\x5f\x49\124\105\x4d\137\x49\x44", $custom_item_id); $update_contact_custom->execute(); unset($update_contact_custom); } else { $sql = "\12\11\x9\11\x9\11\11\x9\x49\116\123\x45\x52\x54\x20\111\116\x54\x4f\x20{$table_prefix}\143\157\x6e\x74\141\143\164\163\x5f\x63\x75\163\x74\x6f\155\12\11\11\11\x9\11\x9\11\x9\50\x20\142\x61\163\x65\137\x69\144\54\40\40\x63\x75\163\164\x6f\155\x5f\151\x74\145\x6d\x5f\x69\144\54\40\x20\166\x61\x6c\165\x65\51\xa\11\x9\11\x9\11\x9\11\x56\101\114\x55\x45\123\xa\11\11\x9\11\x9\x9\x9\11\50\x3a\x42\x41\123\105\x5f\111\104\54\40\72\x43\x55\123\124\x4f\x4d\x5f\111\x54\105\x4d\x5f\x49\x44\x2c\40\x3a\126\x41\x4c\125\x45\51\xa\11\x9\x9\x9\11\11"; $create_contact_custom = $pdo->prepare($sql); $create_contact_custom->bindValue("\102\101\x53\105\137\x49\x44", $target_id); $create_contact_custom->bindValue("\x43\125\x53\124\x4f\115\137\111\x54\105\115\x5f\x49\x44", $custom_item_id); $create_contact_custom->bindValue("\126\101\114\x55\x45", $value); $create_contact_custom->execute(); unset($create_contact_custom); } } } $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\x6f\x63\141\x74\x69\x6f\x6e\x3a\x20\56\x2f\x3f\166\x69\x65\x77\137\160\141\x67\145\75\143\157\x6e\x74\141\143\x74\46\x70\x72\157\143\145\163\x73\x3d{$process}\46\x65\162\162\157\x72\155\x73\147\x3d\x32"); die; } header("\x4c\x6f\x63\x61\164\x69\157\156\72\40\56\57\77\x76\151\145\167\x5f\x70\x61\x67\x65\75\143\x6f\156\164\141\143\x74\x73\46\160\162\x6f\143\x65\x73\x73\x3d{$process}\46\151\x64\75{$target_id}\46\156\x75\155\x62\x65\x72\75\x31"); die; } if (!empty($process) && $process == 39 && !empty($target_id)) { try { $pdo->beginTransaction(); $sql = "\xa\x9\11\11\11\x9\x55\x50\104\101\124\x45\x20{$table_prefix}\x63\157\x6e\x74\x61\143\x74\x73\137\142\141\x73\x65\x20\x53\105\x54\xa\x9\x9\11\x9\11\11\x75\x70\144\x61\x74\145\x64\x5f\x61\x74\40\75\x20\x3a\x55\x50\104\x41\x54\105\104\x5f\x41\124\54\xa\x9\11\11\11\11\11\x75\x70\144\x61\x74\x65\x64\x5f\142\x79\x20\75\x20\72\x55\120\104\x41\x54\x45\104\x5f\102\x59\54\12\x9\11\x9\11\11\x9\144\x65\154\145\164\x65\137\x66\154\x67\x20\x3d\40\x31\12\11\x9\x9\x9\x9\127\110\105\122\105\x20\151\144\40\x3d\40\72\x49\x44\12\x9\11\11\11"; $update_contact = $pdo->prepare($sql); $update_contact->bindValue("\125\120\x44\101\x54\105\104\137\101\124", date("\131\55\x6d\x2d\144\x20\x48\72\x69\x3a\x73")); $update_contact->bindValue("\x55\120\x44\x41\124\x45\104\137\x42\x59", $_SESSION[$session_key]["\x75\x73\145\162"]["\151\x64"]); $update_contact->bindValue("\x49\x44", $target_id); $update_contact->execute(); unset($update_contact); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\114\157\143\x61\x74\x69\157\156\72\x20\x2e\57\77\x76\x69\x65\x77\x5f\160\141\147\145\75\x63\157\156\164\141\143\x74\x26\160\162\x6f\x63\x65\163\163\x3d{$process}\46\145\162\x72\157\x72\155\x73\x67\x3d\x33"); die; } header("\x4c\x6f\x63\141\164\151\x6f\x6e\x3a\40\56\57\77\x76\x69\145\x77\x5f\x70\141\147\145\x3d\x63\157\156\164\x61\x63\x74\x73\x26\160\162\157\143\x65\x73\163\75{$process}\x26\x69\144\x3d{$target_id}\46\x6e\165\155\x62\x65\x72\75\61"); die; } }