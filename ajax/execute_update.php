<?php
 goto yonEp; u4P5a: $content = file_get_contents($target_file_url); goto YrRBT; wKOpf: $response = array(); goto J7WOn; xy81q: $target_version = !empty($_GET["\x74\141\162\x67\145\x74\x5f\166\145\x72\163\151\157\x6e"]) ? $_GET["\164\141\162\x67\x65\x74\137\166\145\x72\x73\x69\x6f\156"] : null; goto DZ1ot; r8Xuk: if (!empty($result)) { foreach ($result["\x74\x61\x72\x67\145\x74\163"] as $key => $row) { foreach ($row as $local_path => $remote_path) { $targets[$key]["\154\x6f\143\x61\154\x5f\x70\x61\164\x68"] = $local_path; $targets[$key]["\x72\x65\x6d\157\164\145\137\x70\x61\x74\150"] = $remote_path; } } } else { $response["\x72\145\163\165\154\x74"] = 9; $response["\x61\143\x74\151\157\156"] = "\x67\x65\x74\40\x74\x61\x72\x67\145\x74"; } goto lp_fT; JbCIs: $_SESSION[$session_key]["\x75\x70\x64\141\x74\145"]["\165\160\x64\x61\164\x65\x5f\154\145\x76\145\154"] = $update_level; goto yGXqO; J7WOn: $response["\162\145\163\x75\x6c\x74"] = 0; goto K6rcX; lp_fT: if (!empty($targets)) { $response["\x75\x70\x64\x61\x74\x65\137\x6e\x75\x6d"] = 0; foreach ($targets as $row) { $path_arr = explode("\x2f", $row["\x6c\x6f\143\x61\154\x5f\x70\141\x74\x68"]); array_shift($path_arr); if (count($path_arr)) { $check_dir = dirname(__FILE__) . "\57\x2e\x2e\57"; foreach ($path_arr as $key => $dir) { $check_dir .= $dir . "\57"; if (!file_exists($check_dir) && !strstr($dir, "\56")) { mkdir($check_dir, 493, true); } } } $this_file = end($path_arr); $this_path = str_replace($this_file, '', $row["\154\x6f\x63\141\154\x5f\x70\x61\164\x68"]); $backup_path = $this_path . "\x50\x4f\123\x54\x45\101\x53\105\102\101\113\137" . $this_file; if (file_exists($row["\154\x6f\143\x61\x6c\x5f\160\141\164\150"])) { if (!rename($row["\x6c\157\x63\141\154\x5f\160\141\164\x68"], $backup_path)) { $response["\162\145\x73\x75\154\164"] = 9; $response["\x61\x63\164\151\x6f\x6e"] = "\142\x61\x63\153\x75\x70"; break; } } $target_url = $_SESSION[$session_key]["\x63\157\x6e\x66\151\x67\163"]["\150\157\x73\164\x5f\x75\160\x64\141\164\x65"] . "\57\x70\x75\142\154\x69\143\x2f" . str_replace($target_version, $temp_dir, str_replace("\x2e\160\x68\x70", "\x2e\x74\x78\x74", $row["\x72\x65\155\x6f\x74\x65\x5f\x70\141\x74\x68"])); if (copy($target_url, $row["\154\x6f\143\x61\x6c\x5f\x70\x61\x74\x68"])) { $response["\x72\145\x73\165\x6c\x74"] = 1; $response["\165\x70\144\141\164\x65\137\156\x75\155"]++; } else { $response["\162\x65\x73\x75\x6c\x74"] = 9; $response["\141\x63\x74\x69\x6f\x6e"] = "\x67\x65\x74\40\146\x69\154\145"; break; } } } goto UkEzz; WYQ5x: ini_set("\155\145\155\157\162\x79\137\x6c\x69\155\x69\164", "\x35\61\x32\115"); goto orYEJ; orYEJ: require_once "\x2e\x2e\57\x5f\163\171\x73\x74\145\x6d\137\150\145\141\144\145\x72\56\x70\x68\160"; goto wKOpf; C2xhy: $target_file_url = $_SESSION[$session_key]["\143\x6f\156\x66\x69\147\x73"]["\x68\157\x73\164\x5f\141\143\164\151\166\141\164\151\x6f\156"] . "\x2f\x75\x70\x64\x61\x74\145\x5f\164\141\x72\147\x65\164\x73\x2f{$target_version}\x2f\164\x61\x72\x67\x65\x74\163\x2e\x6a\163\157\156"; goto u4P5a; iopMP: ini_set("\155\x61\x78\137\145\170\145\x63\165\164\x69\157\156\137\x74\x69\155\x65", 600); goto WYQ5x; DZ1ot: $update_level = !empty($_GET["\x75\160\x64\x61\x74\145\x5f\x6c\x65\166\145\x6c"]) ? $_GET["\165\x70\144\x61\164\145\x5f\x6c\x65\166\x65\154"] : null; goto WxOuS; yonEp: ini_set("\144\151\163\160\154\141\x79\137\x65\162\162\157\x72\163", 0); goto iopMP; WxOuS: $update_detail = !empty($_GET["\x75\160\x64\x61\164\145\x5f\x64\x65\164\141\151\154"]) ? $_GET["\165\x70\x64\x61\x74\x65\137\144\145\164\141\151\x6c"] : null; goto cDjJG; uCFTh: $targets = array(); goto C2xhy; cDjJG: $_SESSION[$session_key]["\165\160\x64\141\164\145"]["\x74\x61\162\147\x65\164\137\x76\145\162\163\x69\157\156"] = $target_version; goto JbCIs; K6rcX: $temp_dir = !empty($_GET["\x74\145\155\160\137\x64\x69\x72"]) ? $_GET["\164\x65\155\x70\x5f\x64\151\162"] : null; goto xy81q; yGXqO: $_SESSION[$session_key]["\x75\160\x64\x61\164\145"]["\165\x70\x64\141\x74\x65\137\x64\145\x74\141\x69\x6c"] = $update_detail; goto uCFTh; YrRBT: $result = json_decode($content, true); goto r8Xuk; UkEzz: if ($php_version < 5.2) { $json = new Jsphon(); echo $json->encode($response); } else { echo json_encode($response); }