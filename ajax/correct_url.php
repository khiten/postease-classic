<?php
 goto laVGa; laVGa: require_once "\56\x2e\57\137\x73\171\163\164\145\x6d\x5f\150\x65\141\144\x65\x72\56\160\150\x70"; goto sSggO; BdpzU: $response = array(); goto KcFyO; wJ6oL: if (!empty($domain) && $domain != $_SESSION[$session_key]["\x63\157\156\146\151\147\x73"]["\x64\x6f\155\141\151\156"] || $dir_name != $_SESSION[$session_key]["\x63\x6f\156\x66\151\147\163"]["\x64\151\x72\137\156\141\155\x65"]) { resetCacheParams(); $upload_uri_old = empty($_SESSION[$session_key]["\x63\157\x6e\x66\x69\x67\163"]["\144\151\162\x5f\156\141\155\x65"]) ? $_SESSION[$session_key]["\143\x6f\156\x66\x69\x67\x73"]["\144\x6f\x6d\x61\x69\156"] . "\57\x75\160\154\x6f\x61\144\57" : $_SESSION[$session_key]["\143\157\156\x66\x69\147\x73"]["\x64\x6f\x6d\141\x69\x6e"] . "\57" . $_SESSION[$session_key]["\143\157\156\146\x69\x67\163"]["\144\151\x72\x5f\156\x61\x6d\x65"] . "\57\165\160\x6c\x6f\141\x64\x2f"; $upload_uri_new = empty($dir_name) ? $domain . "\x2f\165\x70\x6c\x6f\x61\x64\x2f" : $domain . "\x2f" . $dir_name . "\57\x75\160\154\x6f\141\x64\57"; try { $pdo->beginTransaction(); $records = array(); $sql = "\x53\x45\x4c\105\103\124\40\x69\x64\54\x20\x65\x79\x65\x63\x61\164\x63\x68\40\x46\122\x4f\x4d\x20{$table_prefix}\x70\157\163\164\163\x5f\x62\141\x73\x65\40\127\110\105\122\105\x20\145\x79\x65\x63\141\164\x63\x68\40\x4c\x49\x4b\x45\40\x27\x25{$_SESSION[$session_key]["\143\157\156\146\x69\147\x73"]["\x64\157\155\x61\x69\x6e"]}\x25\47"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[] = $record; } unset($read_records); if (!empty($records)) { foreach ($records as $row) { $new_eyecatch = str_replace($upload_uri_old, $upload_uri_new, $row["\145\171\x65\143\141\164\x63\x68"]); $sql = "\12\x9\x9\11\x9\x9\11\x9\11\125\120\104\x41\124\x45\x20{$table_prefix}\x70\x6f\x73\x74\163\137\142\x61\x73\145\x20\x53\x45\124\12\11\x9\11\11\11\11\x9\11\x9\145\x79\145\143\141\164\143\150\40\x3d\40\72\116\x45\x57\x5f\x45\131\105\x43\101\x54\x43\110\12\x9\x9\11\11\11\11\x9\x9\127\110\105\122\105\40\151\x64\40\75\40\72\x49\x44\12\x9\x9\11\11\11\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\116\105\x57\137\105\131\105\x43\101\124\103\x48", $new_eyecatch); $update_record->bindValue("\x49\x44", $row["\x69\144"]); $update_record->execute(); unset($update_record); } } $records = array(); $sql = "\x53\x45\x4c\x45\103\124\x20\142\x61\163\145\x5f\x69\144\x2c\x20\x6c\x61\x6e\147\x75\141\x67\x65\x5f\151\x64\54\40\x63\157\x6e\164\145\156\164\40\x46\122\117\115\x20{$table_prefix}\160\x6f\x73\x74\163\137\x74\x65\x78\x74\x20\x57\110\x45\x52\x45\x20\x63\157\x6e\x74\x65\156\164\x20\x4c\111\x4b\x45\x20\47\45{$_SESSION[$session_key]["\143\x6f\156\146\151\x67\163"]["\x64\157\x6d\141\151\156"]}\x25\47"; $read_records = $pdo->prepare($sql); $read_records->execute(); $i = 0; while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[$i]["\x62\x61\x73\x65\137\151\x64"] = $record["\142\141\x73\145\137\x69\x64"]; $records[$i]["\x6c\x61\156\147\x75\x61\x67\x65\x5f\151\x64"] = $record["\154\141\156\147\165\x61\x67\x65\x5f\x69\144"]; $records[$i]["\x63\157\x6e\164\145\x6e\164"] = htmlspecialchars($record["\x63\157\156\164\x65\x6e\164"]); $i++; } unset($read_records); if (!empty($records)) { foreach ($records as $row) { $row["\x63\157\156\x74\x65\x6e\x74"]; $new_content = str_replace($upload_uri_old, $upload_uri_new, $row["\x63\x6f\x6e\164\145\156\164"]); $sql = "\12\11\11\x9\x9\11\x9\x9\11\x55\120\x44\101\x54\x45\40{$table_prefix}\160\157\x73\x74\x73\x5f\x74\145\x78\x74\x20\123\105\124\xa\11\11\11\x9\11\11\11\x9\11\x63\157\156\164\x65\x6e\164\40\x3d\40\72\116\x45\x57\x5f\x43\117\116\124\x45\116\x54\12\11\x9\x9\11\11\x9\x9\x9\127\110\105\x52\x45\xa\x9\x9\11\11\x9\11\11\11\11\142\141\x73\145\137\151\144\x20\75\x20\72\111\104\xa\11\11\x9\x9\x9\x9\x9\11\11\x41\x4e\x44\x20\x6c\x61\156\147\x75\141\147\x65\x5f\x69\144\40\x3d\40\72\x4c\x41\x4e\x47\125\101\x47\105\x5f\x49\x44\xa\x9\11\11\11\11\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\x4e\105\x57\x5f\x43\x4f\x4e\124\105\x4e\x54", htmlspecialchars_decode($new_content)); $update_record->bindValue("\x49\x44", $row["\x62\141\163\145\137\x69\144"]); $update_record->bindValue("\114\x41\116\x47\x55\101\107\105\137\x49\104", $row["\154\x61\156\x67\x75\141\147\145\x5f\x69\144"]); $update_record->execute(); unset($update_record); } } $records = array(); $sql = "\x53\105\114\x45\103\124\x20\x62\141\x73\145\x5f\x69\x64\54\x20\x6c\141\156\x67\x75\x61\x67\145\137\x69\144\x2c\x20\143\165\x73\164\x6f\155\x5f\151\x74\145\155\x5f\x69\x64\x2c\x20\x76\141\x6c\x75\145\40\106\122\x4f\x4d\40{$table_prefix}\x70\157\x73\164\x73\137\143\x75\x73\164\x6f\155\x20\x57\110\x45\x52\105\x20\x76\141\154\x75\x65\40\x4c\111\113\105\40\x27\45{$_SESSION[$session_key]["\143\157\156\146\x69\147\x73"]["\x64\x6f\x6d\141\x69\156"]}\45\x27"; $read_records = $pdo->prepare($sql); $read_records->execute(); while ($record = $read_records->fetch(PDO::FETCH_ASSOC)) { $records[] = $record; } unset($read_records); if (!empty($records)) { foreach ($records as $row) { $new_value = str_replace($upload_uri_old, $upload_uri_new, $row["\x76\141\154\165\x65"]); $sql = "\xa\11\11\x9\11\x9\11\x9\x9\x55\x50\104\x41\x54\x45\x20{$table_prefix}\x70\157\x73\164\x73\137\143\x75\x73\x74\x6f\155\40\x53\x45\x54\xa\11\x9\x9\x9\11\x9\x9\11\x9\166\x61\154\165\x65\x20\x3d\40\72\x4e\x45\x57\x5f\126\101\x4c\125\105\xa\11\x9\x9\11\11\x9\11\11\x57\110\105\x52\105\xa\x9\11\11\11\11\11\11\11\11\142\x61\x73\x65\x5f\x69\x64\40\75\40\x3a\x49\x44\xa\x9\11\x9\11\x9\x9\11\11\x9\101\116\104\x20\x6c\x61\156\147\x75\x61\147\145\x5f\151\x64\x20\x3d\40\x3a\114\x41\116\x47\125\101\x47\x45\137\111\104\12\11\11\x9\x9\x9\11\11\x9\x9\x41\x4e\x44\x20\x63\x75\x73\x74\x6f\155\137\151\164\x65\x6d\137\151\144\40\75\40\72\x43\125\x53\x54\x4f\115\x5f\111\x54\x45\115\137\111\104\12\x9\11\x9\11\x9\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\x4e\x45\x57\x5f\126\101\x4c\x55\105", $new_value); $update_record->bindValue("\111\x44", $row["\142\141\x73\x65\x5f\151\x64"]); $update_record->bindValue("\114\x41\x4e\x47\125\x41\x47\105\137\x49\104", $row["\154\x61\x6e\147\x75\x61\x67\145\x5f\x69\x64"]); $update_record->bindValue("\x43\x55\x53\x54\117\115\x5f\x49\124\x45\x4d\x5f\111\104", $row["\143\x75\163\x74\157\155\137\x69\164\145\155\x5f\x69\144"]); $update_record->execute(); unset($update_record); } } $sql = "\xa\11\11\x9\11\11\125\120\x44\101\124\105\40{$table_prefix}\x63\157\x6e\146\151\147\163\x20\x53\x45\x54\xa\11\x9\11\x9\11\x9\x76\141\154\165\x65\x20\x3d\x20\72\126\101\x4c\125\105\xa\11\x9\x9\x9\x9\127\x48\x45\x52\x45\x20\x69\x74\145\x6d\x20\75\x20\47\144\157\155\x61\x69\x6e\47\x20\101\x4e\x44\40\143\154\x61\x73\163\151\146\x69\x63\x61\164\x69\x6f\156\x20\75\40\x27\143\x6f\x72\x65\47\12\x9\11\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\126\x41\x4c\125\x45", $domain); $update_record->execute(); unset($update_record); $sql = "\xa\11\11\11\x9\x9\x55\120\x44\x41\x54\x45\40{$table_prefix}\143\157\156\146\151\x67\x73\x20\x53\105\x54\12\11\11\11\x9\11\11\166\x61\x6c\x75\x65\40\x3d\x20\72\x56\101\114\x55\105\xa\11\x9\x9\x9\x9\127\110\105\122\105\x20\151\x74\145\155\x20\75\x20\47\144\151\162\137\156\141\x6d\145\47\x20\x41\116\x44\40\143\154\141\x73\163\x69\x66\151\x63\x61\x74\x69\157\156\x20\75\x20\47\143\157\x72\x65\x27\12\x9\11\11"; $update_record = $pdo->prepare($sql); $update_record->bindValue("\x56\x41\114\x55\105", $dir_name); $update_record->execute(); unset($update_record); $pdo->commit(); } catch (PDOException $e) { $pdo->rollBack(); header("\x4c\x6f\x63\x61\x74\x69\x6f\156\72\40\56\57\x3f\166\151\145\x77\x5f\x70\x61\147\x65\75\x63\x6f\156\146\151\147\137\x63\157\x72\x65\x26\x70\x72\x6f\x63\x65\x73\163\75\61\71\46\145\x72\162\x6f\x72\137\143\x6f\x64\x65\75\x38\61"); die; } $response["\162\145\163\165\154\164"] = 1; } else { $response["\x72\145\163\x75\x6c\x74"] = 9; } goto Xl6R3; sSggO: $domain = isset($_GET["\144\x6f\x6d\x61\x69\x6e"]) ? $_GET["\144\x6f\155\141\x69\156"] : ''; goto TMf70; KcFyO: $response["\162\x65\163\x75\154\164"] = 0; goto wJ6oL; TMf70: $dir_name = isset($_GET["\144\x69\162\137\156\141\155\x65"]) ? $_GET["\144\151\162\x5f\x6e\x61\155\x65"] : ''; goto BdpzU; Xl6R3: if ($php_version < 5.2) { $json = new Jsphon(); echo $json->encode($response); } else { echo json_encode($response); }