<?php
 goto TWeaN; GofUl: if (!empty($method) || !empty($resource)) { $now = time(); $cache_file_name = hash("\164\x69\x67\x65\x72\61\62\x38\x2c\x34", $_SERVER["\x52\x45\x51\125\x45\x53\124\137\125\122\x49"]); $modified = defined("\115\x4f\104\x49\106\x49\105\x44") ? (int) MODIFIED : 1; $expires = $cache_target_dir = defined("\105\x58\x50\x49\122\x45\x53") ? EXPIRES : "\71\x39\x39\x39\71\71\x39\x39\71\x39"; $last_modified = defined("\x4c\101\x53\124\x5f\115\x4f\x44\111\x46\x49\105\x44") ? LAST_MODIFIED : time(); if ((int) $expires < $now) { require_once dirname(__FILE__) . "\x2f\160\150\160\57\160\162\145\x70\x61\162\145\x2e\x70\x68\x70"; resetCacheParams(); require_once dirname(__FILE__) . "\57\56\x2e\x2f\x2e\x2e\x2f\x63\x6f\162\x65\57\141\160\151\x2f\x70\141\162\141\155\x73\x2e\160\150\x70"; $modified = defined("\x4d\117\x44\111\106\x49\105\104") ? (int) MODIFIED : 1; $expires = $cache_target_dir = defined("\x45\130\120\x49\122\x45\x53") ? EXPIRES : "\71\x39\x39\x39\71\71\71\x39\x39\x39"; $last_modified = defined("\x4c\101\x53\124\137\115\x4f\104\111\x46\x49\x45\104") ? LAST_MODIFIED : time(); } if ($modified === 1 || false === file_exists($cache_base_dir . "\57" . $cache_target_dir)) { $cache_dirs = scandir($cache_base_dir); foreach ($cache_dirs as $cache_dir) { if (0 === preg_match("\57\x5e\133\x5c\56\x5d\173\61\x2c\62\x7d\x24\x2f", $cache_dir)) { $cache_files = scandir($cache_base_dir . "\57" . $cache_dir); foreach ($cache_files as $cache_file) { if (0 === preg_match("\57\136\133\x5c\56\x5d\173\61\54\62\175\x24\x2f", $cache_file)) { unlink($cache_base_dir . "\57" . $cache_dir . "\x2f" . $cache_file); } } rmdir($cache_base_dir . "\x2f" . $cache_dir); } } $cache_params = "\x3c\77\x70\x68\x70\xa\12\x64\x65\146\x69\x6e\x65\50\x27\115\117\104\111\106\111\x45\x44\x27\x2c\40\47\x30\x27\51\73\12\144\x65\x66\151\156\x65\x28\47\114\x41\x53\x54\137\115\117\104\111\x46\x49\x45\x44\x27\x2c\x20\47{$last_modified}\47\51\x3b\xa\144\x65\x66\151\x6e\x65\50\x27\x45\x58\120\111\122\x45\x53\47\54\40\47{$expires}\x27\51\x3b\xa"; file_put_contents($cache_params_file, $cache_params); mkdir($cache_base_dir . "\x2f" . $cache_target_dir); } else { if (file_exists($cache_base_dir . "\x2f" . $cache_target_dir . "\x2f" . $cache_file_name . "\56\x6a\163\157\x6e")) { $cached = true; } } $cache_path = $cache_base_dir . "\x2f" . $cache_target_dir; $cache_path_full = $cache_base_dir . "\57" . $cache_target_dir . "\57" . $cache_file_name . "\x2e\x6a\x73\157\156"; } goto Xj3ts; cp57K: if (file_exists($cache_params_path . "\x2f\143\x6f\156\x66\151\147\56\160\150\x70")) { require_once $cache_params_path . "\x2f\143\157\156\146\151\x67\56\x70\150\160"; } goto cIAoN; z_3XX: ini_set("\144\x69\163\x70\154\x61\x79\137\x65\x72\x72\x6f\162\x73", 1); goto WzCV3; tTFK9: $cache_params_file = dirname(__FILE__) . "\x2f\56\x2e\57\56\56\57\143\157\x72\145\57\141\160\x69\57\160\141\162\141\155\163\56\x70\150\160"; goto jh85n; jh85n: $cache_base_dir = "\56\x2f\56\56\x2f\x2e\x2e\x2f\x63\141\x63\x68\145"; goto EZwuY; YIf0u: if (false === file_exists($cache_dir_validate)) { mkdir($cache_dir_validate); } goto Ft11J; E7PCj: $access_control_origin_allowed = null; goto IRn3R; XirgB: if (!empty($_POST["\x61\x63\x74\151\x6f\156"])) { $method = strtolower($_POST["\x61\143\x74\151\157\x6e"]); unset($_POST["\x61\x63\164\151\157\x6e"]); } goto HjJO9; nfMbT: if (!empty($_GET["\x61\x63\164\151\157\156"])) { $method = strtolower($_GET["\x61\143\164\x69\x6f\x6e"]); $resource = preg_replace("\x2f\147\145\x74\x5f\57", '', strtolower($_GET["\141\143\x74\151\x6f\x6e"])); unset($_GET["\x61\143\164\x69\157\x6e"]); } goto Rhehs; EZwuY: $cache_target_dir = null; goto pEch4; TWeaN: require_once dirname(__FILE__) . "\x2f\160\x68\x70\x2f\162\x65\163\160\157\x6e\x73\x65\56\160\x68\160"; goto MxoEa; Xj3ts: $file = dirname(__FILE__) . "\57\x61\152\141\x78\x2f" . $method . "\56\160\x68\x70"; goto bi9TR; HjJO9: if (!empty($_POST["\162\x65\x73\157\165\x72\143\x65"])) { $resource = strtolower($_POST["\x72\x65\x73\x6f\x75\x72\143\145"]); unset($_POST["\162\x65\163\157\165\x72\143\x65"]); } goto vWxHK; HEQU9: if (!empty($remote_address_allowed) && !empty($ssr)) { $remote_addr = !empty($_SERVER["\122\x45\x4d\117\x54\x45\137\x41\104\x44\x52"]) ? $_SERVER["\x52\x45\x4d\117\x54\105\137\x41\x44\x44\x52"] : null; $remote_host = !empty($_SERVER["\x52\x45\115\117\124\x45\x5f\110\117\x53\x54"]) ? $_SERVER["\x52\105\x4d\117\124\x45\x5f\110\x4f\x53\124"] : null; if (!empty($remote_addr) && false === strpos($remote_address_allowed, $remote_addr) && (!empty($remote_host) && false === strpos($remote_address_allowed, $remote_host))) { http_response_code(403); header("\x43\x6f\x6e\x74\x65\x6e\164\x2d\164\171\x70\145\72\40\x61\160\160\154\151\143\141\x74\151\157\x6e\57\152\163\x6f\156\x3b\40\x63\150\141\162\163\145\x74\75\165\x74\x66\55\70"); echo json_encode(responseGetIp403($resource)); die; } } goto rPXDx; IRn3R: $ssr = 0; goto nfMbT; pEch4: $cache_file_name = null; goto EAtZW; ahvhe: $resource = null; goto E7PCj; Ft11J: $preview = !empty($_GET["\153\x65\x79"]) && preg_match("\x2f\x5e\133\141\x2d\x66\60\55\x39\135\x7b\63\x32\175\44\57", $_GET["\153\x65\171"]) || !empty($_GET["\x70\141\162\141\155\163"]["\x70\162\x65\166\151\x65\x77"]) && $_GET["\160\x61\162\x61\155\x73"]["\x70\162\x65\166\151\145\167"] == 1 ? true : false; goto GofUl; Rhehs: if (!empty($_GET["\x72\x65\x73\157\165\x72\x63\145"])) { $method = "\x67\145\164\x5f" . strtolower($_GET["\162\x65\x73\157\x75\162\x63\x65"]); $resource = $_GET["\162\145\x73\157\x75\162\143\x65"]; unset($_GET["\162\145\163\x6f\x75\x72\143\x65"]); } goto XirgB; MxoEa: require_once dirname(__FILE__) . "\x2f\x2e\56\x2f\x2e\x2e\57\154\151\142\x2f\x71\x75\145\x72\x79\x5f\146\x75\x6e\143\164\151\157\156\x73\x2e\160\x68\x70"; goto z_3XX; L9szW: $cached = false; goto tTFK9; qRxdD: $method = null; goto ahvhe; sSbAG: if ($resource == "\141\x64\x76\x61\156\143\145\x64\137\143\141\x63\150\x65") { $advanced_cache = array("\141\x6c\154\x6f\x77" => 0, "\x6c\x61\x73\164\137\x6d\x6f\144\151\x66\151\145\x64" => 0); if (file_exists($cache_params_path . "\x2f\154\151\x63\145\156\163\145\56\x70\x68\160")) { require_once $cache_params_path . "\x2f\154\151\143\145\x6e\163\145\56\x70\150\x70"; $advanced_cache["\141\154\154\157\x77"] = ADVANCED_CACHE; } $advanced_cache["\x6c\141\x73\164\137\x6d\157\144\x69\146\151\x65\144"] = LAST_MODIFIED; $php_version = (double) phpversion(); if ($php_version < 5.2) { require_once dirname(__FILE__) . "\57\x2e\56\57\56\56\x2f\x2e\x2e\57\143\154\141\163\x73\57\112\163\x70\150\157\156\x2f\x4a\163\x70\x68\x6f\x6e\x2e\160\150\x70"; $json = new Jsphon(); echo $json->encode($advanced_cache); } else { echo json_encode($advanced_cache); } die; } goto L9szW; WzCV3: $cache_params_path = dirname(__FILE__) . "\x2f\56\x2e\x2f\x2e\56\x2f\x63\x6f\x72\145\57\x61\160\x69"; goto cp57K; v5dLg: $cache_dir_validate = dirname(__FILE__) . "\57\56\56\x2f\56\56\57\143\x61\x63\x68\x65"; goto YIf0u; cIAoN: if (file_exists($cache_params_path . "\57\160\141\162\141\x6d\163\56\x70\x68\160")) { require_once $cache_params_path . "\57\160\141\x72\x61\155\163\x2e\160\x68\x70"; } else { if (false === file_exists($cache_params_path)) { mkdir($cache_params_path); } resetCacheParams(0); } goto qRxdD; rPXDx: if (!empty($origin_allowed) && !empty($_SERVER["\x48\x54\x54\120\137\x4f\x52\111\x47\x49\116"])) { $access_control_origin_allowed = $_SERVER["\110\124\124\x50\x5f\x4f\122\111\x47\x49\x4e"]; if (false === strpos($origin_allowed, preg_replace("\x2f\136\x28\150\x74\164\x70\163\77\x29\72\x5c\x2f\134\x2f\57", '', $_SERVER["\x48\x54\124\x50\137\x4f\122\111\x47\111\116"]))) { http_response_code(403); header("\x41\143\143\145\163\x73\55\x43\x6f\x6e\164\x72\157\154\x2d\101\x6c\154\157\167\55\117\x72\151\x67\151\156\72\x20" . $access_control_origin_allowed); header("\103\x6f\156\x74\x65\156\x74\55\164\171\x70\x65\72\40\141\160\x70\x6c\x69\x63\141\164\151\x6f\156\57\x6a\x73\157\x6e\73\40\x63\150\141\162\163\145\164\x3d\x75\164\146\x2d\x38"); echo json_encode(responseGetOrigin403($resource)); die; } } goto sSbAG; EAtZW: $etag = null; goto v5dLg; vWxHK: if (!empty($_REQUEST["\x73\163\162"])) { $ssr = strtolower($_REQUEST["\x73\x73\x72"]); unset($_REQUEST["\163\163\x72"]); } goto HEQU9; bi9TR: if (file_exists($file)) { require_once $file; $php_version = (double) phpversion(); if ($php_version < 5.2) { require_once dirname(__FILE__) . "\x2f\x2e\x2e\57\x2e\x2e\x2f\56\x2e\x2f\x63\154\141\163\x73\x2f\112\x73\160\x68\157\x6e\57\112\163\160\150\157\156\x2e\160\150\x70"; $json = new Jsphon(); header("\101\x63\x63\145\163\x73\x2d\103\x6f\156\164\x72\x6f\154\55\x41\154\154\157\x77\x2d\x4f\162\151\x67\151\156\x3a\x20\52"); echo $json->encode($response); } else { if ($access_control_origin_allowed) { header("\x41\x63\x63\145\163\x73\x2d\103\157\156\164\162\x6f\154\x2d\101\x6c\x6c\157\167\55\117\x72\x69\147\151\156\x3a\40" . $access_control_origin_allowed); } else { header("\x41\x63\143\145\163\x73\55\103\x6f\156\x74\x72\157\154\x2d\101\154\154\157\x77\x2d\x4f\162\x69\147\151\156\x3a\x20\52"); } header("\130\x2d\120\117\123\124\105\101\x53\105\55\101\x50\111\x3a\x20\166\63"); if (isset($response["\150\x61\x73\x45\162\x72\x6f\x72"])) { http_response_code($response["\x68\164\x74\x70\x5f\163\164\141\164\x75\163\137\143\x6f\x64\145"]); } else { http_response_code(200); header("\103\157\x6e\x74\145\x6e\164\x2d\x74\171\160\x65\x3a\40\141\160\160\154\151\x63\141\164\x69\157\156\57\152\163\157\156\x3b\40\x63\x68\x61\x72\x73\x65\x74\x3d\165\x74\146\x2d\x38"); header("\x44\x61\164\x65\72\x20" . gmdate("\104\54\40\x64\40\115\x20\x59\40\110\72\x69\72\x73\x20\x54", $last_modified)); if (!empty($api_force_cache_time)) { $expires = time() + $api_force_cache_time * 60; header("\105\x78\x70\151\162\145\x73\x3a\40" . gmdate("\x44\54\x20\144\x20\115\40\x59\40\110\72\151\x3a\x73\x20\124", $expires)); header("\x43\x61\143\x68\145\x2d\103\x6f\156\164\x72\157\x6c\x3a\40\160\x72\151\x76\141\x74\145\54\40\155\141\170\55\141\x67\x65\x3d" . $api_force_cache_time * 60); } else { $etag = hash("\x63\x72\143\x33\62", $last_modified) . "\x2d" . $cache_file_name; header("\x4c\x61\163\164\55\x4d\x6f\144\151\146\151\145\144\x3a\40" . gmdate("\104\54\40\x64\x20\115\x20\131\x20\x48\72\151\72\163\40\x54", $last_modified)); header("\105\124\141\x67\x3a\x20\42" . $etag . "\x22"); } header("\x58\x2d\106\x72\x61\x6d\x65\55\x4f\160\164\x69\x6f\156\163\x3a\40\x31\x3b\x20\144\145\156\x79"); header("\130\55\130\123\123\x2d\x50\162\157\x74\145\x63\x74\151\157\156\x3a\x20\x31\x3b\x20\155\157\144\x65\75\142\154\157\143\153"); header("\x58\55\103\157\156\164\145\x6e\x74\55\x54\x79\160\145\x2d\117\160\x74\x69\157\x6e\x73\72\x20\x6e\x6f\x73\156\151\x66\x66"); } echo is_array($response) ? json_encode($response) : $response; } } else { header("\110\x54\x54\x50\x2f\61\56\61\40\x34\60\x34\40\116\157\164\40\106\157\165\156\144"); die; }